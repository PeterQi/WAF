!function(e){var t=e.QHPass={VERSION:"5.0.3",RELEASE:"20532",$:jQuery,utils:{},plugin:{},ui:{}};t.version=[t.VERSION,t.RELEASE].join("."),t.init=function(e){var n=t.$;"string"==typeof e&&(e={src:e}),n.isPlainObject(e)&&t.setConfig(e),t._isInit||(t._isInit=!0,t.events.trigger("init.core"))}}(window),function(e){"use strict";function t(e){return u.each(e,function(t,n){"boolean"==u.type(n)&&(e[t]=n?1:0)}),e}function n(e,t){t.url&&(t.action=t.url,delete t.url),t.method="post";var n=u("<form>").attr(t).hide();return u.each(e,function(e,t){u("<input>").attr({type:"hidden",name:e,value:t}).appendTo(n)}),n[0]}function r(t){return t&&32!=t.length?e.utils.md5(t):t}function i(t){return function(n){var r=u.Deferred(),i=Object.prototype.toString.call(n).replace(/\[object (\w+)\]$/,"$1");return"Array"==i&&(n={errno:0,data:n}),n.errno=-1==n.errno.toString().indexOf("login_captcha")?parseInt(n.errno,10):e.ERROR.CAPTCHA_INVALID.errno,n.errno===t?r.resolve(n):(n.errmsg=e.utils.getErrorMsg(n.errno,n.errmsg||n.msg||""),r.reject(n)),r.promise()}}function s(e,t){u.each(t,function(t,n){void 0!==e[t]&&(e[n]=e[t],delete e[t])})}function o(){c=null}var u=e.$,a=!1,f=["360.cn","360pay.cn","haosou.com","yunpan.cn","so.com","qiku.com","360shouji.com"],l=function(n,r,i){i=i||"https"==e.getConfig("protocol").toLowerCase();var s=this.protocol=i&&!a?"https":"http",o={src:e.getConfig("src"),from:e.getConfig("src"),charset:e.getConfig("charset"),requestScema:s},f={url:s+"://login.360.cn",type:"GET",dataType:"jsonp",timeout:2e4};n=n||{},r=r||{},this.protocol=s,this.param=u.extend(o,t(n)),this.ajaxOpt=u.extend({data:this.param},f,r),this.I360=s+"://i.360.cn"};u.extend(l.prototype,{get:function(t){var n=this;e.events.trigger("get.sync",{opt:this.ajaxOpt,url:t});var r=u.ajax(t,this.ajaxOpt),i=this.ajaxOpt.data.m,s=QHPass.getConfig("mainDomain",[]),o=t?t.replace(/(http|https):\/\/login./gi,""):"";return r.done(function(t){e.events.trigger("receive.sync",t)}),r.then(this.done,function(e){if("setcookie"==i&&-1==u.inArray(o,s)){var r={errno:0,errmsg:"",domain:"not mainDomain"};return n.done(r)}return n.fail({method:"get",url:t,status:e})})},post:function(t){e.events.trigger("post.sync",{opt:this.ajaxOpt,url:t});var r=u.Deferred(),i=null,s=e.utils.getGuid(),o="QiUserJsonp"+s,a="QucI360Form"+s,f="QucI360Iframe"+s,l=u('<iframe name="'+f+'">').hide(),c=u.extend({},this.param,{proxy:e.getConfig("proxy"),callback:o,func:o}),h=n(c,{name:a,target:f,url:t||this.ajaxOpt.url});return window[o]=function(t){clearTimeout(i);var n;for(var s in t)t.hasOwnProperty(s)&&(n=decodeURIComponent(t[s]),n.match(/^(\{.*\})|(\[.*\])$/)&&(n=u.parseJSON(n)),t[s]=n);r.resolve(t),e.events.trigger("receive.sync",t)},i=setTimeout(function(){r.reject({method:"post",url:t,status:{status:0,statusText:"post \u8bf7\u6c42\u8d85\u65f6"}})},this.ajaxOpt.timeout),r.always(function(){u(l).remove(),u(h).remove();try{delete window[o]}catch(e){window[o]=null}}),u(document.body).append(l).append(h),u(h).submit(),r.then(this.done,e.utils.bind(this.fail,this))},done:i(0),fail:function(t){if("https"==this.protocol&&"http:"==location.protocol&&e.getConfig("retryWithHttp",!0))return"sso"==this.ajaxOpt.data.o&&"getToken"==this.ajaxOpt.data.m&&(a=!0),this.retryHttp(t);var n=u.Deferred();return n.reject({errno:999999,errmsg:"string"==u.type(t)?t:"\u7f51\u7edc\u9519\u8bef"}),e.events.trigger("error.sync",t.url||this.ajaxOpt.url),n.promise()},getDomainApi:function(e){return e=e||location.hostname.replace(/^(?:.+\.)?(\w+\.\w+)$/,"$1"),this.protocol+"://login."+e},retryHttp:function(t){this.protocol="http",this.ajaxOpt.url=this.ajaxOpt.url.replace(/^https/,"http"),this.I360="http://i.360.cn";var n=t.url&&t.url.replace(/^https/,"http");return e.events.trigger("retryHttp.sync",n||this.ajaxOpt.url),this[t.method](n)}});var c=null;e.sync={getRd:function(){var e=new l({o:"sso",m:"getRd"});return e.done=function(e){var t=u.Deferred();return e.rd?t.resolve(e):t.reject({errno:"999999",errmsg:"\u8bf7\u767b\u5f55\u5e10\u53f7"}),t.promise()},e.get()},getToken:function(e){var t=new l({o:"sso",m:"getToken",userName:e},{jsonp:"func"},!0);return t.get()},getUserInfo:function(t,n){var r=e.getConfig("headSize","100_100"),i=e.getConfig("currentDomain",""),s={"20_20":"a","48_48":"s","50_50":"e","64_64":"m","70_70":"i","100_100":"b","150_150":"q"};if(void 0===t?t=!0:"boolean"!=u.type(t)&&(n=t,t=!1),t&&c&&void 0===n)return u.Deferred().resolve(c).promise();var o=new l({o:"sso",m:"info",show_name_flag:"1",head_type:s[r]});return o.done=function(e){var t=u.Deferred();return e.qid?(void 0===n&&(c=e),t.resolve(e)):t.reject({errno:"999999",errmsg:"\u65e0\u6cd5\u83b7\u53d6\u767b\u5f55\u72b6\u6001"}),t.promise()},e.getConfig("ignoreCookie")?o.get():i&&e.utils.getCookie("Q")?o.get(o.getDomainApi(i)):e.utils.getCookie("Q")?o.get(o.getDomainApi(n)):u.Deferred().reject(e.ERROR.NOT_SIGNED_IN).promise()},getUserSecInfo:function(e){var t=new l({crumb:e});return t.get(t.I360+"/security/getUserSecInfo")},getIdentifyMethod:function(e,t){var n={o:"User",m:"getSecWays",crumb:e,sensop:t},r=new l(n);return r.post()},getCaptchaUrl:function(t){var n=e.getConfig("captchaAppId","i360"),r=new l({captchaScene:t,captchaApp:n});return r.get(r.I360+"/QuCapt/getQuCaptUrl")},checkEmailExist:function(e){var t=new l({o:"User",m:"checkemail",loginEmail:e});return t.done=i(202),t.get()},checkUsernameExist:function(e){var t=new l({o:"User",m:"checkuser",userName:e});return t.done=i(1e4),t.get()},checkNicknameExist:function(e){var t=new l({o:"User",m:"checknickname",nickName:e});return t.done=i(259),t.get()},checkMobileNumberExist:function(e,t){var e=t?t+e:e,n=new l({o:"User",m:"checkmobile",mobile:e});return n.post()},checkEmailStatus:function(e){var t=new l({crumb:e});return t.get(t.I360+"/active/checkLoginEmailStatus")},getMobileState:function(){var e=new l({o:"user",m:"getStateList",quc_lang:""});return e.get()},checkMobileLogin:function(e){var t=new l({o:"user",m:"checkLoginMethod",acctype:2,lm:1,account:e});return t.get()},checkSignUpCaptchaRequired:function(){var t=new l({captchaApp:e.getConfig("captchaAppId","i360")});return t.get(t.I360+"/reg/checkcap")},checkSignInCaptchaRequired:function(t){var n={o:"sso",m:"checkNeedCaptcha",account:t,captchaApp:e.getConfig("captchaAppId","i360")},r=new l(n);return r.get()},identify:function(e,t,n,i,s){var o={o:"User",m:"checkSecWay",crumb:e,vtype:n,sensop:t};"pwd"==n&&(i=r(i),o.captcha=s),o.vc=i;var u=new l(o,{},!0);return u.post()},setUsername:function(e,t){var n=new l({o:"User",m:"modifyUserName",userName:t,crumb:e},{},!0);return n.post().done(function(){o()})},setNickname:function(e,t){var n=new l({o:"User",m:"modifyNickName",nickName:t,crumb:e},{},!0);return n.post().done(function(){o()})},setEmail:function(e,t){var n=new l({crumb:e,loginEmail:t},{},!0);return n.post(n.I360+"/active/doSetLoginEmail").done(function(){o()})},setSecEmail:function(e,t){var n=new l({crumb:e,secemail:t},{},!0);return n.post(n.I360+"/profile/dosetsecemail").done(function(){o()})},setLoginMethod:function(e,t){var n=new l({o:"user",m:"modifyLoginMethod",loginMethod:1,crumb:e,toValue:t},{},!0);return n.post().done(function(){o()})},setCookie:function(t,n){var r=e.getConfig("supportHttps",f),i="https"==e.getConfig("protocol",null).toLowerCase();t=decodeURIComponent(t),void 0===n?n=e.getConfig("domainList",[]):u.isArray(n)||(n=[n]);var s,o=[];return u.each(n,function(e,n){u.inArray(n,r)>-1?(s=new l({o:"sso",m:"setcookie",s:t},{jsonp:"func"},!0),o.push(s.get(s.getDomainApi(n)))):i||(s=new l({o:"sso",m:"setcookie",s:t},{jsonp:"func"}),o.push(s.get(s.getDomainApi(n))))}),u.when.apply(u,o)},sendSmsTokenNeedPhrase:function(e,t,n,r,i){"boolean"==typeof e&&(n=t,t=e,r=n,i=r,e=null);var s=t?1:2,o={o:"User",m:"sendSmsCodeNew",condition:s,account:n,crumb:e,captcha:r,vt:i},u=new l(o);return u.post()},sendSmsToken:function(e,t,n){"boolean"==typeof e&&(n=t,t=e,e=null),"object"==typeof n&&(n=n.areaCode+n.mobileNumber);var r=t?1:2,i={o:"User",m:"sendSmsCode",condition:r,account:n,crumb:e},s=new l(i);return s.post()},sendEmailToken:function(e,t){var n={o:"User",m:"sendEmsCode",condition:1,crumb:e,vtype:t},r=new l(n);return r.post()},sendActivationEmail:function(e){var t=new l({crumb:e});return t.post(t.I360+"/active/doSendActiveEmail")},sendSecActivationEmail:function(e){var t=new l({crumb:e});return t.post(t.I360+"/profile/resendSecurityEmail")},sendSignUpActivationEmail:function(e){var t=new l;return t.get(e)},bindMobile:function(e,t,n){var t=t.areaCode+t.mobileNumber,r=new l({o:"user",m:"bindMobile",crumb:e,mobile:t,smscode:n},{},!0);return r.post().done(function(){o()})},unbindMobile:function(e,t,n){var i=new l({o:"user",m:"delMobile",crumb:e,smscode:t,password:r(n)},{},!0);return i.post().done(function(){o()})},signUp:function(t){var n={captchaFlag:!0,captchaApp:e.getConfig("captchaAppId","i360")};t=u.extend(n,t),t.password=r(t.password),t.passwordAgain=r(t.passwordAgain)||t.password,s(t,{emailActiveFlag:"loginEmailActiveFlag",passwordAgain:"rePassword",smsToken:"smscode",nickname:"nickName",username:"userName",agreeLicence:"is_agree"});var i=new l(t,{},!0);return i.post(i.I360+"/reg/doregAccount").done(function(){o()})},signIn:function(t){var n={o:"sso",m:"login",lm:"mobile"==t.type?1:0,captFlag:1,rtype:"data",validatelm:e.getConfig("signIn.mobile.isMustUseMobileSignIn",!1)?1:0,isKeepAlive:!1,captchaApp:e.getConfig("captchaAppId","i360"),userName:t.account};return"mobile"==t.type?t.acctype=2:t.password=r(t.password),u.when().then(function(){return t.token||e.sync.getToken(t.account).done(function(e){t.token=e.token})}).then(function(){var e=new l(u.extend(n,t),{},!0);return e.post().done(function(){o()})}).then(function(t){return e.sync.setCookie(t.s)}).then(function(){return e.getUserInfo(!1)})},signOut:function(t){var n=e.getConfig("supportHttps",f),r="https"==e.getConfig("protocol",null).toLowerCase();void 0===t||t===!0?t=e.getConfig("domainList",[]):u.isArray(t)||(t=[t]);var i,s=[];return u.each(t,function(e,t){u.inArray(t,n)>-1?(i=new l({o:"sso",m:"logout"},{jsonp:"func"},!0),s.push(i.get(i.getDomainApi(t)))):r||(i=new l({o:"sso",m:"logout"},{jsonp:"func"}),s.push(i.get(i.getDomainApi(t))))}),o(),u.when.apply(u,s)},fillProfile:function(e,t,n,i,s){i=i||n;var u=new l({o:"User",m:"perfectInfo",crumb:e,userName:t,captcha:s,password:r(n),rePassword:r(i)},{},!0);return u.post().done(function(){o()})},checkQrCodeSignInStatus:function(){var e=new l({o:"sso",m:"qrLogin"},{jsonp:"func"});return e.get()},getAuthenticationStatus:function(e){var t=new l({o:"User",m:"getShiMingStatus",crumb:e});return t.get()},submitAuthenMobile:function(e,t,n){var r=new l({o:"User",m:"verifyShiMingCaptcha",mobile:e,captcha:t,crumb:n},{},!0);return r.post()},fillAuthenInfo:function(e,t,n){var r=new l({o:"User",m:"verifyShiMingSmsCode",vt:e,vc:t,crumb:n},{},!0);return r.post()},authSendSmsToken:function(e,t){var n=new l({o:"User",m:"sendShiMingSmsCode",crumb:e,vt:t},{},!0);return n.post()}};var h={};u.each(e.sync,function(t,n){var r=function(){var r=arguments[0],i=t+(u.isPlainObject(r)?e.utils.JSON.stringify(r):[].join.apply(arguments)),s=h[i];return s?h[i]:(s=h[i]=n.apply(e.sync,arguments),s.always(function(){delete h[i]}),s)};r.funcName=n.funcName="sync."+t,e.sync[t]=r})}(QHPass),function(e){"use strict";var t=e.$,n={charset:document.charset||document.defaultCharset||document.characterSet||"UTF-8",domainList:["360pay.cn","yunpan.cn","so.com","haosou.com","360.cn","360.com","liangyi.com","qiku.com","360shouji.com"],protocol:location.protocol.replace(":",""),proxy:location.protocol+"//"+location.host+"/psp_jump.html",ignoreCookie:!1};e.getConfig=function(e,r){r=void 0!==r?r:null;for(var i,s=n,o=e.split(".");o.length>0;)if(i=o.shift(),0!=i.length){if(void 0===s[i]||o.length>0&&!t.isPlainObject(s[i]))return r;s=s[i]}var u=t.isPlainObject(s)?t.extend({},s):s;return u},e.setConfig=function(i,s){if(!i)return e.events.trigger("warn.config","setConfig parameter key is null or undefined"),e;if(t.isPlainObject(i))return r(!0,n,i),e;for(var o,u,f=n,l=i.split("."),h=!1;l.length>0;){if(u=l.shift(),void 0===f[u]&&(f[u]={}),!t.isPlainObject(f[u])&&l.length>0){h=!0;break}o=f,f=f[u]}return h?e.events.trigger("warn.config","setConfig cannot be set on "+i):o[u]=s,e};var r=function(){var e,n,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||t.isFunction(u)||(u={});f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],n=s[i],u!==n&&(l&&n&&t.isPlainObject(n)?(o=e&&t.isPlainObject(e)?e:{},u[i]=r(l,o,n)):void 0!==n&&(u[i]=n));return u}}(QHPass),function(e){"use strict";var t=e.$,n=t({});e.events={trigger:function(e,t){e=e.toLowerCase(),n.triggerHandler(e,t);var r=e.match(/^([^.]+)\.(.*)$/);r&&(e=r[1]+".\\*",t={namespace:r[2],data:t},n.triggerHandler(e,t))}},t.each(["on","off","one"],function(r,i){e.events[i]=function(){var r,s,o=[].slice.apply(arguments);o[0]=o[0].toLowerCase(),o[0].match(/\.\*$/)&&(s=o.pop(),r=function(e,t){e.namespace=e.namespace.replace(/\\\*/,t.namespace),e.isWildcard=!0,s.call(this,e,t.data)},r.guid=s.guid||(s.guid=e.utils.getGuid()),o.push(r)),t.fn[i].apply(n,o)}})}(QHPass),function(e){"use strict";var t=e.$,n=e.utils,r=parseInt((new Date).getTime().toString().substr(4),10);if(n.getGuid=function(){return r++},n.parseCallback=function(e){return"function"==t.type(e)?e:e===!0?function(){location.reload()}:"string"==t.type(e)&&0===e.indexOf("http")?function(){location.href=e}:function(){}},n.setCookie=function(e,t,n){var r=new Date;n=void 0!==n?n:2,r.setTime(r.getTime()+864e5*n),document.cookie=e+"="+encodeURIComponent(t)+";expires="+r.toGMTString()+";path=/"},n.getCookie=function(e){var t=null,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=document.cookie.match(n);return r&&(t=decodeURIComponent(r[2])),t},n.throttle=function(e,t,n,r){var i,s,o,u=+(new Date),a=0,f=0,l=null,c=function(){f=u,e.apply(s,o)};return function(){u=+(new Date),s=this,o=arguments,i=u-(r?a:f)-t,clearTimeout(l),r?n?l=setTimeout(c,t):i>=0&&c():i>=0?c():n&&(l=setTimeout(c,-i)),a=u}},n.debounce=function(e,t,r){return n.throttle(e,t,r,!0)},n.bind=function(e,n){if(e.bind&&e.bind===Function.prototype.bind)return e.bind(n);if(!t.isFunction(e))throw new TypeError;var r=[].slice.call(arguments,2),i=function(){var t=[].slice.apply(arguments);if(this instanceof i){var s=function(){};s.prototype=e.prototype;var o=new s;s.prototype=null;var u=e.apply(o,r.concat(t));return Object(u)===u?u:o}return e.apply(n,r.concat(t))};return i},n.initInputId=function(e){t(e).find(".quc-input:not([id])").each(function(e,r){var i=t(r),s=i.parent();if(s="LABEL"==s[0].tagName?s:s.siblings("label"),s.length){var o="quc_"+i.attr("name")+"_"+n.getGuid();i.attr("id",o),s.attr("for",o)}})},n.selectText=function(e,n,r){var i=t(e),s=i.val().length;for(n=parseInt(n)||0,r=parseInt(r)||s;0>n;)n+=s;i.each(function(e,t){if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r),i.select()}else if(t.setSelectionRange)t.setSelectionRange(n,r);else{if(!t.selectionStart)return!1;t.selectionStart=n,t.selectionEnd=r}}),i.focus()},n.JSON={parse:t.parseJSON,stringify:window.JSON&&JSON.stringify?JSON.stringify:function(e){var n=function(e){var r=typeof e,i=t.isArray(e);if("string"==r)return'"'+e.replace(/"/g,'"')+'"';if("number"==r||"boolean"==r)return e;if(i||t.isPlainObject(e)){var s=t.map(e,function(e,t){return i?n(e):'"'+t.toString().replace(/"/g,'"')+'":'+n(e)}).join();return i?"["+s+"]":"{"+s+"}"}return null},r=n(e);return r&&r.toString()}},n.support=t.extend({fixed:!1},t.support),t(function(){try{var e=t(document.body),r=t("<div>").height(3e3),i=t("<div>").css({position:"fixed",top:100}).html("x").appendTo(r),s=e.scrollTop();r.appendTo(e);var o=t(document.documentElement).position().top;o=o>0?o:0,e.scrollTop(500);var u=i[0].offsetTop;n.support.fixed=u-o===100,r.remove(),e.scrollTop(s)}catch(a){}}),n.browser=function(){var e=window.navigator,t=e.userAgent.toLowerCase(),n=/(msie|webkit|gecko|presto|opera|safari|firefox|chrome|maxthon|android|ipad|iphone|webos|hpwos|trident)[ \/os]*([\d_.]+)/gi,r={platform:e.platform};if(t.replace(n,function(e,t,n){r[t]||(r[t]=n)}),r.opera&&t.replace(/opera.*version\/([\d.]+)/,function(e,t){r.opera=t}),!r.msie&&r.trident&&t.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/gi,function(e,t){r.msie=t}),r.msie){r.ie=r.msie;var i=parseInt(r.msie,10);r["ie"+i]=!0}return r}(),n.browser.ie&&n.browser.ie6)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(i){}e.events.on("afterShow.* DOMUpdated.*",function(e,t){n.initInputId(t)})}(QHPass),function(e){"use strict";var t=e.$,n=window.document,r={set:function(e,t){localStorage.setItem(e,t)},get:function(e,t){var n=localStorage.getItem(e);return null!==n?n:t},remove:function(e){localStorage.removeItem(e)}},i={set:function(e,t){sessionStorage.setItem(e,t)},get:function(e,t){var n=sessionStorage.getItem(e);return null!==n?n:t},remove:function(e){sessionStorage.removeItem(e)}},s={set:function(e,t,r){r=r||{};var i=r.expires;"number"==typeof i&&(i=new Date,i.setTime(i.getTime()+r.expires));try{return n.cookie=e+"="+escape(t)+(i?";expires="+i.toGMTString():"")+(r.path?";path="+r.path:"")+(r.domain?"; domain="+r.domain:""),!0}catch(s){return!1}},get:function(e,t){try{var r,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(r=n.cookie.match(i))return unescape(r[2])}catch(s){}return t},remove:function(e){this.set(e,null,-100)}},o=e.utils.isCookieEnabled=function(){if(!n.cookie&&!navigator.cookieEnabled)return!1;var e="test_cookie_enable",t="test"+Math.random(),r=s.set(e,t);if(!r)return!1;var i=s.get(e);return s.remove(e),t==i},u={storeName:"qucUserDataStore",init:function(){var r=this;if(!r.isInit){r.isInit=!0;var i=r.object=t.extend(!0,{},a);i.init(),t(function(){var s="QhpassUserData",o=e.getConfig("proxy")+"?fun="+s,u=t("<iframe>").attr("src",o).hide();t(n.body).append(u),window[s]=function(){clearTimeout(a),delete r.object;var e=u[0].contentWindow,n=e.document,s=r.store=n.createElement("input");setTimeout(function(){s.addBehavior("#default#userData"),n.body.appendChild(s),s.load(r.storeName),t.each(i.data,function(e,t){s.setAttribute(e,t)}),s.save(r.storeName)},30)};var a=setTimeout(function(){u.remove()},2e4)})}},set:function(e,t){this.object?this.object.set(e,t):(this.store.load(this.storeName),this.store.setAttribute(e,t),this.store.save(this.storeName))},get:function(e,t){if(this.object)return this.object.get(e,t);this.store.load(this.storeName);var n=this.store.getAttribute(e);return null!==n?n:t},remove:function(e){this.object?this.object.remove(e):this.store.removeAttribute(e)}},a={init:function(){this.data=this.data||{}},set:function(e,t){this.data[e]=t},get:function(e,t){var n=this.data[e];return void 0!==n?n:t},remove:function(e){delete this.data[e]}},f=navigator.userAgent.toLowerCase(),l=f.match(/msie ([\d.]+)/),c=l&&l[1],h=6==c||7==c;e.utils.storage=function(e){var t;switch(e){default:case"local":try{t=window.localStorage?r:h?u:a}catch(n){t=a}break;case"session":try{t=window.sessionStorage?i:a}catch(n){t=a}break;case"cookie":t=o()?s:a;break;case"page":t=a}return t.init&&t.init(),t},h&&u.init()}(QHPass),function(e){"use strict";var t=e.$,n='<a class="quc-link quc-link-login" href="http://i.360.cn/login" target="_blank">\u7acb\u5373\u767b\u5f55</a>',r=e.ERROR={REALNAME_EMPTY:{errno:204,errmsg:"\u8bf7\u8f93\u5165\u60a8\u7684\u771f\u5b9e\u59d3\u540d"},REALNAME_INVALID:{errno:227,errmsg:"\u8bf7\u786e\u8ba4\u60a8\u8f93\u5165\u7684\u771f\u5b9e\u59d3\u540d\u662f\u5426\u6709\u8bef"},ACCOUNT_EMPTY:{errno:1030,errmsg:"\u8bf7\u8f93\u5165360\u5e10\u53f7"},ACCOUNT_INVALID:{errno:1035,errmsg:"\u8bf7\u786e\u8ba4\u60a8\u7684\u5e10\u53f7\u8f93\u5165\u662f\u5426\u6709\u8bef"},ACCOUNT_DUPLICATE:{errno:1037,errmsg:"\u8be5\u5e10\u53f7\u5df2\u7ecf\u6ce8\u518c\uff0c"+n},USERNAME_DUPLICATE:{errno:213,errmsg:"\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u4f7f\u7528\uff0c"+n},USERNAME_EMPTY:{errno:215,errmsg:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},USERNAME_INAPPROPRIATE:{errno:225,ermsg:"\u7528\u6237\u540d\u5305\u542b\u4e0d\u9002\u5f53\u5185\u5bb9"},USERNAME_INVALID:{errno:199,errmsg:'\u7528\u6237\u540d\u5e94\u4e3a2-14\u4e2a\u5b57\u7b26,\u652f\u6301\u4e2d\u82f1\u6587\u3001\u6570\u5b57\u6216"_"'},USERNAME_NUMBER:{errno:200,errmsg:"\u7528\u6237\u540d\u4e0d\u80fd\u5168\u4e3a\u6570\u5b57"},NICKNAME_EMPTY:{errno:205,errmsg:"\u8bf7\u8f93\u5165\u6635\u79f0"},NICKNAME_DUPLICATE:{errno:260,errmsg:"\u6635\u79f0\u5df2\u7ecf\u88ab\u4f7f\u7528"},NICKNAME_INAPPROPRIATE:{errno:226,errmsg:"\u6635\u79f0\u5305\u542b\u4e0d\u9002\u5f53\u5185\u5bb9"},NICKNAME_NUMBER:{errno:262,errmsg:"\u6635\u79f0\u4e0d\u80fd\u5168\u90e8\u662f\u6570\u5b57"},NICKNAME_INVALID:{errno:15e3,errmsg:'\u6635\u79f0\u5e94\u4e3a2-14\u4e2a\u5b57\u7b26,\u652f\u6301\u4e2d\u82f1\u6587\u3001\u6570\u5b57\u3001"_"\u6216"."'},EMAIL_EMPTY:{errno:203,errmsg:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},EMAIL_INVALID:{errno:1532,errmsg:"\u90ae\u7bb1\u683c\u5f0f\u6709\u8bef"},EMAIL_NOT_ACTIVATED:{errno:2e4},MOBILE_EMPTY:{errno:1107,errmsg:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},MOBILE_INVALID:{errno:1100,errmsg:"\u624b\u673a\u53f7\u683c\u5f0f\u6709\u8bef"},MOBILE_DUPLICATE:{errno:1106,errmsg:"\u8be5\u624b\u673a\u53f7\u5df2\u7ecf\u6ce8\u518c\uff0c"+n},CAPTCHA_INVALID:{errno:78e3,errmsg:"\u9a8c\u8bc1\u7801\u9519\u8bef\u8bf7\u91cd\u65b0\u8f93\u5165"},CAPTCHA_INVALID_OLD:{errno:1670,errmsg:"\u9a8c\u8bc1\u7801\u9519\u8bef\u8bf7\u91cd\u65b0\u8f93\u5165"},CAPTCHA_EMPTY:{errno:78002,errmsg:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},CAPTCHA_APPID_INVALID:{errno:1300,errmsg:"\u9a8c\u8bc1\u7801\u683c\u5f0f\u6709\u8bef"},SMS_TOKEN_EMPTY:{errno:1350,errmsg:"\u8bf7\u8f93\u5165\u6821\u9a8c\u7801"},SMS_TOKEN_INCORRECT:{errno:1351,errmsg:"\u6821\u9a8c\u7801\u8f93\u5165\u6709\u8bef"},PASSWORD_EMPTY:{errno:211,errmsg:"\u8bf7\u8f93\u5165\u5bc6\u7801"},PASSWORD_INVALID:{errno:1065,errmsg:"\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a6-20\u4e2a\u5b57\u7b26"},PASSWORD_LEVEL_LOW:{errno:1070,errmsg:"\u5bc6\u7801\u5b89\u5168\u7ea7\u522b\u8fc7\u4f4e"},PASSWORD_WEAK:{errno:1070,errmsg:"\u5bc6\u7801\u5f31\uff0c\u6709\u98ce\u9669\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"},PASSWORD_ORDERED:{errno:1070,errmsg:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u8fde\u7eed\u5b57\u7b26"},PASSWORD_CHAR_REPEAT:{errno:1070,errmsg:"\u5bc6\u7801\u4e0d\u80fd\u5168\u4e3a\u76f8\u540c\u5b57\u7b26"},PASSWORD_WRONG:{errno:220,errmsg:"\u767b\u5f55\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"},PASSWORD_NOT_MATCH:{errno:1091,errmsg:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"},PASSWORD_FULL_SHARP:{errno:54e3,errmsg:"\u5bc6\u7801\u4e2d\u4e0d\u80fd\u5305\u542b\u5168\u89d2\u5b57\u7b26"},IDENTIFY_EXPIRE:{errno:153e3},NOT_SIGNED_IN:{errno:1501,errmsg:"\u7528\u6237\u672a\u767b\u9646"},UNKNOWN_ERROR:{errno:999999,errmsg:"\u672a\u77e5\u9519\u8bef"},SUCCESS:{errno:0,errmsg:"\u64cd\u4f5c\u6210\u529f"},TIME_OUT:{errno:1,errmsg:"\u7f51\u7edc\u8d85\u65f6"}},i=e.utils=e.utils||{},s={1105:"\u8be5\u624b\u673a\u53f7\u672a\u6ce8\u518c360\u5e10\u53f7",1402:"\u624b\u673a\u53f7\u5f53\u5929\u53d1\u9001\u77ed\u4fe1\u6b21\u6570\u8d85\u9650",201:"\u8be5\u90ae\u7bb1\u5df2\u7ecf\u6ce8\u518c\uff0c"+n,3e4:"\u8be5\u624b\u673a\u53f7\u5df2\u7ecf\u6ce8\u518c\uff0c"+n,65002:'\u8be5\u5e10\u53f7\u672a\u5f00\u542f\u77ed\u4fe1\u767b\u5f55\u529f\u80fd\uff0c<a class="quc-link" href="http://i.360.cn/security/setloginmethod" target="_blank">\u7acb\u5373\u5f00\u542f</a>',65001:'\u8be5\u5e10\u53f7\u53ea\u80fd\u901a\u8fc7\u77ed\u4fe1\u767b\u5f55\uff0c<a class="quc-link quc-link-login" href="http://i.360.cn/security/setloginmethod" target="_blank">\u5173\u95ed\u6b64\u529f\u80fd</a>',221:'\u5e10\u53f7\u88ab\u5c01\u7981\uff0c<a class="quc-link quc-link-login" href="http://i.360.cn/complaint" target="_blank">\u70b9\u6b64\u8054\u7cfb\u5ba2\u670d</a>',78001:"\u63d0\u4ea4\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"};t.each(r,function(e,t){t.errmsg&&t.errmsg.length>0&&(s[t.errno]=t.errmsg)}),i.isSameError=function(e,t){return void 0===e.errno||void 0===t.errno?!1:e.errno===t.errno},i.defineError=function(e,t){var n;for(var i in r)r.hasOwnProperty(i)&&r[i].errno==e&&(n=r[i],n.errmsg=t);s[e]=t},i.getErrorMsg=function(e,n){return t.isPlainObject(e)&&(n=e.errmsg,e=e.errno),s[e]||n.replace(/\+/g," ").replace(/class=(['"]).+?\1/,'class="quc-link"')},i.getErrorType=function(e){switch(e=e.errno||e){case r.MOBILE_EMPTY.errno:case r.MOBILE_INVALID.errno:case r.MOBILE_DUPLICATE.errno:return"mobile";case r.EMAIL_EMPTY.errno:case r.EMAIL_INVALID.errno:return"email";case r.USERNAME_EMPTY.errno:case r.USERNAME_INVALID.errno:case r.USERNAME_DUPLICATE.errno:case r.USERNAME_NUMBER.errno:case r.USERNAME_INAPPROPRIATE.errno:return"username";case r.NICKNAME_EMPTY.errno:case r.NICKNAME_INVALID.errno:case r.NICKNAME_DUPLICATE.errno:case r.NICKNAME_INAPPROPRIATE.errno:case r.NICKNAME_NUMBER.errno:return"nickname";case r.ACCOUNT_EMPTY.errno:case r.ACCOUNT_INVALID.errno:case r.ACCOUNT_DUPLICATE.errno:return"account";case r.PASSWORD_INVALID.errno:case r.PASSWORD_EMPTY.errno:case r.PASSWORD_CHAR_REPEAT.errno:case r.PASSWORD_ORDERED.errno:case r.PASSWORD_WEAK.errno:case r.PASSWORD_WRONG.errno:case r.PASSWORD_LEVEL_LOW.errno:return"password";case r.PASSWORD_NOT_MATCH.errno:return"password-again";case r.CAPTCHA_INVALID.errno:case r.CAPTCHA_EMPTY.errno:case r.CAPTCHA_APPID_INVALID.errno:case r.CAPTCHA_INVALID_OLD.errno:return"captcha";case r.SMS_TOKEN_EMPTY.errno:case r.SMS_TOKEN_INCORRECT.errno:return"sms-token"}return e-=e>9e5?9e5:0,e>=1e4&&15e3>e?"username":e>=15e3&&2e4>e?"nickname":e>=2e4&&3e4>e?"email":e>=3e4&&45e3>e?"mobile":e>=5e4&&55e3>e?"password":e>=55e3&&6e4>e?"sec-email":e>=65e3&&75e3>e?"account":e>=78e3&&79e3>e?"captcha":"other"}}(QHPass),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function r(e,r,i,s,o,u){return t(n(t(t(r,e),t(s,u)),o),i)}function i(e,t,n,i,s,o,u){return r(t&n|~t&i,e,t,s,o,u)}function s(e,t,n,i,s,o,u){return r(t&i|n&~i,e,t,s,o,u)}function o(e,t,n,i,s,o,u){return r(t^n^i,e,t,s,o,u)}function u(e,t,n,i,s,o,u){return r(n^(t|~i),e,t,s,o,u)}function a(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var r,a,f,l,c,h=1732584193,p=-271733879,d=-1732584194,v=271733878;for(r=0;r<e.length;r+=16)a=h,f=p,l=d,c=v,h=i(h,p,d,v,e[r],7,-680876936),v=i(v,h,p,d,e[r+1],12,-389564586),d=i(d,v,h,p,e[r+2],17,606105819),p=i(p,d,v,h,e[r+3],22,-1044525330),h=i(h,p,d,v,e[r+4],7,-176418897),v=i(v,h,p,d,e[r+5],12,1200080426),d=i(d,v,h,p,e[r+6],17,-1473231341),p=i(p,d,v,h,e[r+7],22,-45705983),h=i(h,p,d,v,e[r+8],7,1770035416),v=i(v,h,p,d,e[r+9],12,-1958414417),d=i(d,v,h,p,e[r+10],17,-42063),p=i(p,d,v,h,e[r+11],22,-1990404162),h=i(h,p,d,v,e[r+12],7,1804603682),v=i(v,h,p,d,e[r+13],12,-40341101),d=i(d,v,h,p,e[r+14],17,-1502002290),p=i(p,d,v,h,e[r+15],22,1236535329),h=s(h,p,d,v,e[r+1],5,-165796510),v=s(v,h,p,d,e[r+6],9,-1069501632),d=s(d,v,h,p,e[r+11],14,643717713),p=s(p,d,v,h,e[r],20,-373897302),h=s(h,p,d,v,e[r+5],5,-701558691),v=s(v,h,p,d,e[r+10],9,38016083),d=s(d,v,h,p,e[r+15],14,-660478335),p=s(p,d,v,h,e[r+4],20,-405537848),h=s(h,p,d,v,e[r+9],5,568446438),v=s(v,h,p,d,e[r+14],9,-1019803690),d=s(d,v,h,p,e[r+3],14,-187363961),p=s(p,d,v,h,e[r+8],20,1163531501),h=s(h,p,d,v,e[r+13],5,-1444681467),v=s(v,h,p,d,e[r+2],9,-51403784),d=s(d,v,h,p,e[r+7],14,1735328473),p=s(p,d,v,h,e[r+12],20,-1926607734),h=o(h,p,d,v,e[r+5],4,-378558),v=o(v,h,p,d,e[r+8],11,-2022574463),d=o(d,v,h,p,e[r+11],16,1839030562),p=o(p,d,v,h,e[r+14],23,-35309556),h=o(h,p,d,v,e[r+1],4,-1530992060),v=o(v,h,p,d,e[r+4],11,1272893353),d=o(d,v,h,p,e[r+7],16,-155497632),p=o(p,d,v,h,e[r+10],23,-1094730640),h=o(h,p,d,v,e[r+13],4,681279174),v=o(v,h,p,d,e[r],11,-358537222),d=o(d,v,h,p,e[r+3],16,-722521979),p=o(p,d,v,h,e[r+6],23,76029189),h=o(h,p,d,v,e[r+9],4,-640364487),v=o(v,h,p,d,e[r+12],11,-421815835),d=o(d,v,h,p,e[r+15],16,530742520),p=o(p,d,v,h,e[r+2],23,-995338651),h=u(h,p,d,v,e[r],6,-198630844),v=u(v,h,p,d,e[r+7],10,1126891415),d=u(d,v,h,p,e[r+14],15,-1416354905),p=u(p,d,v,h,e[r+5],21,-57434055),h=u(h,p,d,v,e[r+12],6,1700485571),v=u(v,h,p,d,e[r+3],10,-1894986606),d=u(d,v,h,p,e[r+10],15,-1051523),p=u(p,d,v,h,e[r+1],21,-2054922799),h=u(h,p,d,v,e[r+8],6,1873313359),v=u(v,h,p,d,e[r+15],10,-30611744),d=u(d,v,h,p,e[r+6],15,-1560198380),p=u(p,d,v,h,e[r+13],21,1309151649),h=u(h,p,d,v,e[r+4],6,-145523070),v=u(v,h,p,d,e[r+11],10,-1120210379),d=u(d,v,h,p,e[r+2],15,718787259),p=u(p,d,v,h,e[r+9],21,-343485551),h=t(h,a),p=t(p,f),d=t(d,l),v=t(v,c);return[h,p,d,v]}function f(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function c(e){return f(a(l(e),8*e.length))}function h(e,t){var n,r,i=l(e),s=[],o=[];for(s[15]=o[15]=void 0,i.length>16&&(i=a(i,8*e.length)),n=0;16>n;n+=1)s[n]=909522486^i[n],o[n]=1549556828^i[n];return r=a(s.concat(l(t)),512+8*t.length),f(a(o.concat(r),640))}function p(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function v(e){return c(d(e))}function m(e){return p(v(e))}function g(e,t){return h(d(e),d(t))}function y(e,t){return p(g(e,t))}e.utils.md5=function(e,t){return t?y(t,e):m(e)}}(QHPass),function(e){"use strict";function t(e){return String(e).replace(/[^\x00-\xff]/g,"--").length}function n(e,n,r){var i=t(e);return i>=n&&r>=i}function r(e){return e=void 0===e?"":e,0==e.length}function i(e){e=String(e);for(var t,n=e.length,r=null,i=1;n>i;i++){if(t=e.charCodeAt(i)-e.charCodeAt(i-1),null!==r&&r!==t||Math.abs(t)>1)return!1;r=t}return!0}function s(e){e=String(e);var t,n=e.length,r=e.split(""),s=o.unique(r);if(n>=21||5>=n)return-1;if(1==s.length)return-2;if(i(e))return-3;if(a.join("#").indexOf("#"+e+"#")>-1)return-4;var u={d:0,c:0,o:0};return o.each(s,function(e,t){/\d/.test(t)?u.d=1:/[a-zA-Z]/.test(t)?u.c=1:u.o=1}),t=u.d+u.c+u.o+(n>9?2:1),t=Math.max(3,t)}var o=e.$,u=e.ERROR,a=["","abcabc","abc123","a1b2c3","aaa111","123abc","123456abc","abc123456","qwerty","qwertyuiop","qweasd","123qwe","1qaz2wsx","1q2w3e4r","1q2w3e4r5t","asdasd","asdfgh","asdfghjkl","zxcvbn","qazwsxedc","qq123456","admin","password","p@ssword","passwd","Password","Passwd","Iloveyou","Woaini","iloveyou","Wodemima","Woaiwojia","tamade","nimade","123789","1234560","123465","123321","102030","100200","4655321","987654","123123","123123123","121212","111222","12301230","168168","456456","321321","521521","5201314","520520","201314","211314","7758258","7758521","1314520","1314521","147258369","147852369","159357","741852","741852963","654321","852963","963852741","115415","123000",""];QHPass.validate={checkRealName:function(e){return e=o.trim(e),r(e)?u.REALNAME_EMPTY:/^[\u4e00-\u9fa5]{2,5}$/.test(e)?!1:u.REALNAME_INVALID},checkUsername:function(e){return e=o.trim(e),r(e)?u.USERNAME_EMPTY:/^[\w\u4e00-\u9fa5\.]{2,14}$/.test(e)?!1:u.USERNAME_INVALID},checkNickname:function(e){return e=o.trim(e),r(e)?u.NICKNAME_EMPTY:n(e,2,14)?/^[\w\u4e00-\u9fa5\.]{2,14}$/.test(e)?!1:u.NICKNAME_INVALID:u.NICKNAME_TOO_SHORT},checkEmail:function(e){var t=/^[a-z0-9](?:[\w.\-+]*[a-z0-9])?@[a-z0-9][\w.-]*\.[a-z]{2,8}$/i;return e=o.trim(e),r(e)?u.EMAIL_EMPTY:t.test(e)?!1:u.EMAIL_INVALID},checkMobile:function(e,t){var n,i,s;return t?(n=o.trim(e.mobileNumber),i=e.regExp||"^1\\d{10}$",s=new RegExp(i)):(n=o.trim(e),s=/^0?1[345789]\d{9}$/),r(n)?u.MOBILE_EMPTY:s.test(n)?!1:u.MOBILE_INVALID},checkAccount:function(e){return 0==e.length?u.ACCOUNT_EMPTY:this.checkUsername(e)&&this.checkEmail(e)&&this.checkMobile(e)?u.ACCOUNT_INVALID:!1},checkCaptcha:function(e){return e=o.trim(e),r(e)?u.CAPTCHA_EMPTY:/^([a-z0-9]{4,7}|\d{1,3}|[\u4E00-\u9FA5]{1,5})$/i.test(e)?!1:u.CAPTCHA_INVALID},checkSmsToken:function(e){return e=o.trim(e),r(e)?u.SMS_TOKEN_EMPTY:6!=e.length||isNaN(e)?u.SMS_TOKEN_INCORRECT:!1},checkPassword:function(e,t){if(e=String(e),r(e))return u.PASSWORD_EMPTY;if(e.match(/[^\x00-\xff]/))return u.PASSWORD_FULL_SHARP;if(!t)return!1;switch(s(e)){case-1:return u.PASSWORD_INVALID;case-2:return u.PASSWORD_CHAR_REPEAT;case-3:return u.PASSWORD_ORDERED;case-4:return u.PASSWORD_WEAK;default:return!1}},evaluatePassword:function(e){return s(e)},checkPasswordConfirm:function(e,t){return e===t?!1:u.PASSWORD_NOT_MATCH}}}(QHPass),function(e){"use strict";var t=e.$,n={title:"\u6b22\u8fce\u767b\u5f55360",content:"",width:"460",height:"auto",closeSelector:".quc-panel-close",titleSelector:".quc-panel-title",contentSelector:".quc-panel-bd",closeRemove:!0,showMask:!0,fixed:!0,tpl:'<div class="quc-panel quc-wrapper"><div class="quc-panel-hd"><div class="quc-panel-title">{title}</div><a href="#" class="quc-panel-close"><i>\u5173\u95ed</i></a></div><div class="quc-panel-bd">{content}</div><!--[if lte IE 6]><iframe class="quc-ie6-iframe" src="about:blank" border="0" frameborder="0"></iframe><![endif]--></div>'
,maskTpl:'<div class="quc-mask quc-mask-panel"><!--[if lte IE 6]><iframe class="quc-ie6-iframe" src="about:blank" border="0" frameborder="0"></iframe><div class="quc-mask-inner"></div><![endif]--></div>'},r=function(e){this.opt=t.extend({},n,e),this._init(),this._initEvent()};t.extend(r.prototype,{_init:function(){var e=this.opt,n=e.tpl;e.title&&(n=n.replace("{title}",e.title)),e.content&&(n=n.replace("{content}",e.content)),this.$el=t(n),this.$hd=this.$el.find(e.titleSelector),this.$bd=this.$el.find(e.contentSelector)},_initEvent:function(){var n=this;this.$el.on("click",this.opt.closeSelector,function(e){e.preventDefault(),n.hide(),t(n).triggerHandler("close")});var r=e.utils.throttle(n.adjustPosition,10,!0);this._adjustPosition=function(){r.apply(n)};var i=t(window);i.on("resize",this._adjustPosition),this.opt.fixed&&!e.utils.support.fixed&&i.on("scroll",this._adjustPosition),this.$el.on("DOMNodeInserted DOMNodeRemoved",this._adjustPosition)},setMask:function(){if(this.opt.showMask&&(this.$mask=this.$mask||t(this.opt.maskTpl),t(document.body).append(this.$mask),!e.utils.support.fixed)){var n=t(document.body);this.$mask.css({height:n.outerHeight(!0),width:n.outerWidth(!0)})}return this},removeMask:function(){return this.opt.showMask&&this.$mask&&this.$mask.remove(),this},removeClose:function(){return this.$el.find(this.opt.closeSelector).remove(),this},setTitle:function(e){return"string"==t.type(e)&&"<"!=t.trim(e).substr(0,1)?this.$hd.html(e):this.$hd.empty().append(t(e)),this},setContent:function(e){var n=t(e);return this.$bd.empty().append(n),this.adjustPosition(),n.on("QucDOMUpdated",this._adjustPosition),this},setSize:function(e,t){return e&&this.$el.width(e),t&&this.$bd.height(t),this.adjustPosition(),this},adjustPosition:function(n,r){var i=t(window),s=this.opt.fixed&&this.$el.outerHeight(!0)<=i.height(),o=e.utils.support.fixed;if(0==this.$el.parents("body").length)return this;if(n&&"center"!=n?n=parseInt(n,10):(n=(i.height()-this.$el.outerHeight(!0))/2,n=0>n?0:n),r&&"center"!=r?r=parseInt(r,10):(r=(i.width()-this.$el.outerWidth(!0))/2,r=0>r?0:r),s&&o||(n+=i.scrollTop(),r+=i.scrollLeft()),this.$el.css({top:n,left:r}),o)this.$el.css("position",s?"fixed":"absolute");else if(i.off("scroll",this._adjustPosition),s&&i.on("scroll",this._adjustPosition),this.opt.showMask){var u=t(document.body);this.$mask.css({height:u.outerHeight(!0),width:u.outerWidth(!0)})}return this},show:function(){return this.setMask(),0==this.$el.parent().length&&this.$el.appendTo(document.body),this.$el.show(),this.adjustPosition(),this},hide:function(e){return this.removeMask(),e===!0||this.opt.closeRemove?this.remove():e!==!1&&this.opt.closeRemove||this.$el.hide(),this},remove:function(){return this.$hd.detach(),this.$bd.detach(),this.$el.remove(),t(window).off("resize",this._adjustPosition),this}}),e.utils.Panel=r}(QHPass),function(e){"use strict";var t=e.$,n=function(e){this.timeOut=e||120,this.timeLeft=this.timeOut,this.timeStep=1e3,this.running=!1};t.extend(n.prototype,{start:function(){t(this).trigger("timer_start",this.timeLeft),this.running||(this.running=!0,this.interval=setInterval(e.utils.bind(function(){this.timeLeft--,this.timeLeft<=0?this.stop():t(this).trigger("timer_tick",this.timeLeft)},this),this.timeStep))},resume:function(){this.start()},pause:function(){this.running=!1,clearInterval(this.interval),t(this).trigger("timer_pause",this.timeLeft)},stop:function(){clearInterval(this.interval),this.running=!1,this.reset(),t(this).trigger("timer_stop")},reset:function(){this.timeLeft=this.timeOut},setTimeOut:function(e){this.timeOut=e},isRunning:function(){return this.running},on:function(){t().on.apply(t(this),arguments)}});var r={};e.utils.getTimer=function(e,t){return r[e]||(r[e]=new n(t)),r[e]}}(QHPass),function(e){"use strict";var t=e.$;e.utils.changeRT=function(e,n,r){var i=t(e);isNaN(n)&&(r=n,n=30),i.on("QucChangeRT",r),i.each(function(e,r){function i(){var e=u.val();s!==e&&(u.trigger("QucChangeRT",{oldValue:s,newValue:e}),s=e)}if("TEXTAREA"==r.tagName||"INPUT"==r.tagName){var s,o,u=t(r);u.focus(function(){s=u.val(),o=setInterval(i,n)}),u.blur(function(){clearInterval(o),i(),s=null})}})}}(QHPass),function(e){"use strict";var t=e.$,n="placeholder"in t("<input>")[0];e.utils.initPlaceholder=n?function(){}:function(n){var r="input[placeholder],textarea[placeholder],.quc-placeholder+input,.quc-placeholder+textarea",i=t(n);if(0!=i.length){var s,o=i[0].tagName;s="INPUT"==o||"TEXTAREA"==o?i.filter(r):t(n).find(r),s.each(function(n,r){function i(){0==s.val().length?o.show():o.hide()}var s=t(r),o=s.prev(".quc-placeholder");if(0==o.length){o=t("<label>");var u=parseFloat(s.css("border-width"))||0,f=s.attr("id")||"quc_placeholder_"+e.utils.getGuid();s.attr("id",f);var l=parseFloat(s.css("margin-left"))+parseFloat(s.css("padding-left"))+u+1||12,c=parseFloat(s.css("margin-top"))+parseFloat(s.css("padding-top"))+u+1||11;o.addClass("quc-placeholder").html(s.attr("placeholder")).attr("for",f).attr("unselectable","on").css({"margin-left":l,"margin-top":c,"line-height":s.css("line-height")||"20px","background-color":s.css("background-color")||"#fff","font-size":s.css("font-size")||"14px","font-family":s.css("font-family")}),s.before(o).attr("data-placeholder",s.attr("placeholder")),s[0].removeAttribute("placeholder")}e.utils.changeRT(s,i);var h=3,p=setInterval(function(){--h<=0&&clearInterval(p),i()},500);i()})}},e.events.on("afterShow.* DOMUpdated.*",function(n,r){t(r).parents("body").length>0&&e.utils.initPlaceholder(r)})}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-email-hint-wrapper"><div class="quc-email-hint"></div></div>';e.utils.emailHint=function(r,i){function s(e){var r=t(n),i=r.find(".quc-email-hint");i.css({width:e.outerWidth()});var s=function(){var t=e.val();u&&t.indexOf("@")<0||!t.match(/^[\w._]+@?[\w.]*$/)?i.hide():(i.show(),setTimeout(function(){0==i.find(".quc-on:visible").length&&(i.find(".quc-on").removeClass("quc-on"),i.children(":visible").first().addClass("quc-on"))},30))},o=function(e){switch(e.which){case 38:a(!0);break;case 40:a();break;case 13:case 32:var t=i.find(".quc-on");if(t.length>0){t.mousedown();break};case 27:f(0);break;default:return}e.preventDefault()},a=function(e){var t=i.find(".quc-on");0==t.length?t=i.children(":visible").first():t.removeClass("quc-on");var n=e?t.prevAll(":visible").first():t.nextAll(":visible").first();0==n.length&&(n=e?i.children(":visible").last():i.children(":visible").first()),n.addClass("quc-on")},f=function(t){e.off("blur",f),setTimeout(function(){e.off("QucChangeRT",s),e.off("keydown",o),r.remove()},isNaN(t)?100:t)};e.on("QucChangeRT",s),e.on("keydown",o),e.on("blur",f),s(),t.each(l,function(n,r){var s=t("<a>").attr("href","#").attr("tabindex",-1).appendTo(i).click(function(e){e.preventDefault()}).mousedown(function(){e.val(e.val().split("@")[0]+"@"+r),setTimeout(function(){e.parents(".quc-field").next(".quc-field").find(".quc-input,.quc-button").focus()},30),f(0)}).on("selectstart",function(e){e.preventDefault()}).on("mouseover",function(){s.addClass("quc-on").siblings(".quc-on").removeClass("quc-on")}),o=function(){var t=e.val().split("@");s.html(t[0].replace(/^(.{10}).{2,}(.{7})$/,"$1...$2")+"@"+r),t[1]&&-1==r.indexOf("."+t[1])&&0!==r.indexOf(t[1])?(s.hide(),s.hasClass("quc-on")&&(s.removeClass("quc-on"),i.children(":visible").first().addClass("quc-on"))):s.css("display","block")};e.on("QucChangeRT",o),e.one("blur",function(){e.off("QucChangeRT",o)}),o()}),e.after(r)}var o=t(r),u="account"==i,f=o.filter(":text").add(o.find(":text")),l=e.getConfig("emailHint",["sina.com","163.com","qq.com","126.com","vip.sina.com","sina.cn","hotmail.com","gmail.com","sohu.com","yahoo.com","139.com","189.cn"]);0!=f.length&&(e.utils.changeRT(f),f.on("focus",function(e){s(t(e.target))}))}}(QHPass),function(e){"use strict";var t=e.$,n=e.events,r=window,i=function(){function t(e){var t=0,n=0,r=e.length-1;for(r;r>=0;r--){var i=parseInt(e.charCodeAt(r),10);t=(t<<6&268435455)+i+(i<<14),0!=(n=266338304&t)&&(t^=n>>21)}return t}function n(){for(var e=navigator,n=[e.appName,e.version,e.language||e.browserLanguage,e.platform,e.userAgent,screen.width,"x",screen.height,screen.colorDepth,document.referrer].join(""),i=n.length,s=r.history.length;s;)n+=s--^i++;return 2147483647*(Math.round(2147483647*Math.random())^t(n))}var i="__guid",s=e.utils.storage("cookie"),o=document.domain,u=s.get(i);if(!u){u=[t(o),n(),+(new Date)+Math.random()+Math.random()].join(".");var f={expires:2592e7,path:"/",domain:o.toLowerCase().replace(/^(?:.+\.)?(\w+\.\w+)$/,".$1")};s.set(i,u,f)}return function(){return u}}();e.utils.monitor={};var s=r.__quc_moitor_imgs={},o=e.utils.monitor.send=function(n){if(!e.DEBUG&&e.getConfig("useMonitor",!0)){var r=e.getConfig("monitorUrl",e.getConfig("protocol")+"://s.360.cn/i360/qhpass.htm"),o="moitor_img+"+e.utils.getGuid(),u=s[o]=new Image;n=t.param(t.extend({src:e.getConfig("src"),version:e.version,guid:i()},n)),r+=(r.indexOf("?")>0?"&":"?")+n,u.onload=u.onerror=function(){s&&s[o]&&(s[o]=null,delete s[o])},u.src=r}};n.on("init.core",function(){var t=r.screen;o({action:"init",resolution:[t.width,t.height].join("x"),color:t.colorDepth,language:navigator.language,isCookieEnabled:e.utils.isCookieEnabled()})}),n.on("retryHttp.sync",function(e,t){t=t.replace(/\?.*/,""),o({action:"retryHttp",api:t})}),n.on("error.sync",function(e,t){t=t.replace(/\?.*/,""),o({action:"netError",api:t})}),n.on("show.*",function(e){o({action:"show",module:e.namespace})}),n.on("beforeSubmit.*",function(e){o({action:"submit",module:e.namespace})}),n.on("success.*",function(e){o({action:"success",module:e.namespace})}),n.on("changeType.*",function(e,t){var n="change"+e.namespace.replace(/^./,function(e){return e.toUpperCase()})+"Type";o({action:n,module:e.namespace,type:t})}),n.on("invalid.*",function(e,t){o({action:"invalid",module:e.namespace,errno:t.errno,errmsg:t.errmsg})}),n.on("warn.* warning.*",function(e,t){t.errno&&(t="("+t.errno+")"+t.errmsg),o({action:"warn",module:e.namespace,message:t})}),n.on("error.* fatal.*",function(e,t){t.errno&&(t="("+t.errno+")"+t.errmsg),o({action:"error",module:e.namespace,message:t})}),Math.random()<.01&&t.get(e.getConfig("proxy"),function(e){var t=e.match(/version\s*=\s*['"]?([\d.]+)['"]?/i),n=t&&t[1]||"old version";o({action:"pspJumpInit",jumpVersion:n})},"text"),n.on("init.core",function(){e.getConfig("preventClickPenetrate",!0)&&n.on("afterShow.*",function(){t(".quc-wrapper").mousedown(function(e){e.stopPropagation()})}),n.on("afterShow.*",function(e){t(".quc-wrapper").on("click","a",function(){var n=this;n.href.match(/[^#]$/)&&"_blank"==n.target&&o({action:"click",module:e.namespace,title:t(n).text(),link:n.href})})})})}(QHPass),function(e){"use strict";function t(e,t){return!e||(i.isFunction(e)?e(t):t===e)}function n(e,t){if(!e)return!1;var n=0;return i.each(e.match(/(\d+[wdhms]?)/g),function(e,t){var r=parseInt(t,10),i=t.substr(t.length-1);n+=u[i]?r*u[i]:r}),(new Date).getTime()-t>=n}function r(e){return i.map(e,function(e){return e.toString()}).join()}var i=e.$,s="quc.funcCache",o={};e.utils.cache={read:function(u,l,h){function p(){E[w]=E[w]||{},E[w][S]=m,v.set(s,e.utils.JSON.stringify(E))}i.isPlainObject(l)&&(h=l),h=h||{};var v,m,y,w=u.funcName;w?v=e.utils.storage("local"):(w=u.qucGuid||(u.qucGuid=e.utils.getGuid()),v=e.utils.storage("page"));var E=e.utils.JSON.parse(v.get(s,"{}")),S=r(l);return(y=o[w]&&o[w][S])?y:(m=E[w]&&E[w][S],!m||n(h.expire,m.date)?(m={data:u.apply(h.context||null,l),date:(new Date).getTime()},m.data.done&&m.data.fail?((o[w]=o[w]||{})[S]=m,m.data.done(function(e){t(h.condition,!0)&&(m.data=e,m.promise="resolve",p())}).fail(function(e){t(h.condition,!1)&&(m.data=e,m.promise="reject",p())}).always(function(){delete o[w][S]})):(t(h.condition,m.data)&&p(),m.data)):m.promise?i.Deferred()[m.promise](m.data).promise():m.data)},clear:function(t,n){t?cache[t]&&n?delete o[t][r(n)]:delete o[t]:(o={},e.utils.storage("page".remove(s)),e.utils.storage("local".remove(s)))}};var u={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5}}(QHPass),function(e){"use strict";var t=e.$,n=null,r=function(t){this.name="func_"+e.utils.getGuid(),this.extend(t),this._initFlag=!1,this._data={}};t.extend(r.prototype,{init:function(){var t=this;return t._initFlag?t.reset():(t._initFlag=!0,t.setUI(e.ui[t.name]),t.setDeferred(),t.trigger("init"),t.on("show",function(){t._isShown=!0}),t.on("hide",function(){t._isShown=!1})),t._passThrough=n,n=null,t},reset:function(){return this._isShown&&this.trigger("hide"),this.setDeferred(),this},isInit:function(){return this._initFlag},get:function(e,t){var n=this._data[e];return void 0!==n?n:t},set:function(e,n){return t.isPlainObject(e)?t.extend(this._data,e):this._data[e]=n,this},setDeferred:function(n){var r=this;return r._deferred=n||t.Deferred(),r._deferred.done(function(t){r._callback&&e.utils.parseCallback(r._callback)(t)}),r},resolve:function(e){return this._deferred&&this._deferred.resolve(e),this},getCallback:function(){return this._callback},setCallback:function(e){return this._callback=e,this},clear:function(){return this._data={},this},getUI:function(){return this.ui},setUI:function(e){return this.ui=e,e.init(this),this},getPassThrough:function(){return this._passThrough},setPassThrough:function(e){n=e},reportError:function(t,n,r){n=n?"Msg:"+n+" ":"",t.errno?n=n+"Error:("+t.errno+")"+t.errmsg:n+=t.toString(),e.events.trigger((r?"warn.":"error.")+this.name,n)},reportWarn:function(e,t){this.reportError(e,t,!0)},extend:function(){var e=[].slice.apply(arguments);e.unshift(this),t.extend.apply(null,e)},setCaptchaUrl:function(e){this._captchaUrl=e},getCaptchaUrl:function(n,r){var i=this,s=i._captchaUrl,o=t.Deferred();return!r&&s?(s+="&_="+(new Date).getTime(),o.resolve(s)):e.sync.getCaptchaUrl(n).then(function(e){s=i._captchaUrl=e.captchaUrl,s+="&_="+(new Date).getTime(),o.resolve(s)}),o.promise()}}),t.each(["on","one","off","trigger"],function(t,n){r.prototype[n]=function(){return arguments[0]=arguments[0].replace(/( |$)/g,"."+this.name+"$1"),e.events[n].apply(null,arguments),this}}),e.getLogic=function(e){return new r(e)}}(QHPass),function(e){"use strict";var t=e.$;e.getUserInfo=function(n,r,i){return"function"==t.type(n)&&(i=r,r=n,n=void 0),e.sync.getUserInfo(n).done(function(e){r&&r(e)}).fail(function(e){i&&i(e)})}}(QHPass),function(e){"use strict";e.getUserSecInfo=function(t){e.sync.getUserInfo().then(function(t){return e.sync.getUserSecInfo(t.crumb)}).always(t)}}(QHPass),function(e){"use strict";e.getEmailStatus=function(t){e.sync.getUserInfo().then(function(t){return e.sync.checkEmailStatus(t.crumb)}).always(t)}}(QHPass),function(e){"use strict";var t,n=e.$;e.getQuickLoginStatus=function(r,i){if(n.isFunction(r)&&(i=r,r=2e4),!t){var s=e.getConfig("protocol"),o=s+"://axlogin.passport.360.cn/ptlogin.php",u=o+"?nextUrl="+e.getConfig("proxy")+"&us=1&func=QHPass.getQuickLoginUserLength",f=n("<iframe>").attr("src",u).hide().appendTo(document.body);t=n.Deferred();var l=setTimeout(function(){t.reject()},r);e.getQuickLoginUserLength=function(e){t.resolve(e)},t.always(function(){t=null,clearTimeout(l),f.remove()})}t.then(function(t){i(n.extend({},e.ERROR.SUCCESS,{status:t.us>0?1:2,userLength:t.us}))},function(){i(n.extend({},e.ERROR.TIME_OUT))})}}(QHPass),function(e){"use strict";e.signOut=function(t,n){void 0===n&&(n=t,t=!0),e.sync.signOut(t).done(function(){e.events.trigger("success.signOut"),e.utils.parseCallback(n)()})}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-sign-in"><div class="quc-tip-wrapper"><p class="quc-tip"></p></div><div class="quc-main"></div><div class="quc-footer"><a class="quc-link quc-link-grey quc-link-normal-sign-in" href="#">\u4f7f\u7528\u5176\u4ed6\u5e10\u53f7\u767b\u5f55</a><a class="quc-link quc-link-grey quc-link-quick-sign-in" href="#">\u8fd4\u56de\u5feb\u901f\u767b\u5f55</a><a class="quc-link quc-link-grey quc-link-sign-up" href="#">\u6ce8\u518c\u65b0\u5e10\u53f7</a><a class="quc-link quc-link-about quc-link-about-normal" href="http://i.360.cn/findpwd/" target="_blank">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a><a class="quc-link quc-link-about quc-link-about-mobile" href="http://i.360.cn/help/smscode" target="_blank">\u6821\u9a8c\u7801\u5e38\u89c1\u95ee\u9898</a><a class="quc-link quc-link-about quc-link-about-qrcode" href="http://i.360.cn/findpwd/customerhelper#qrcode" target="_blank">\u4ec0\u4e48\u662f\u4e8c\u7ef4\u7801\u767b\u5f55\uff1f</a><a class="quc-link quc-link-about quc-link-about-onekey" href="#">\u4ec0\u4e48\u662f\u4e00\u952e\u767b\u5f55\uff1f</a></div></div>',r={normal:'<form method="POST" class="quc-form"><p class="quc-field quc-field-account quc-input-long"><label class="quc-label">\u5e10&nbsp;&nbsp;&nbsp;\u53f7</label><span class="quc-input-bg"><input class="quc-input quc-input-account" type="text" name="account" placeholder="\u624b\u673a\u53f7/\u7528\u6237\u540d/\u90ae\u7bb1" autocomplete="off"/></span></p><p class="quc-field quc-field-password quc-input-long"><label class="quc-label">\u5bc6&nbsp;&nbsp;&nbsp;\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-password" type="password" name="password" maxlength="20" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801" /></span></p><p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="phrase" maxlength="7" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801" /></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /> <a class="quc-link quc-captcha-change-link quc-captcha-change" href="#">\u6362\u4e00\u5f20</a></p><p class="quc-field quc-field-keep-alive"><label><input class="quc-checkbox quc-checkbox-keep-alive" type="checkbox" name="iskeepalive" checked="checked">\u4e0b\u6b21\u81ea\u52a8\u767b\u5f55</label></p><p class="quc-field quc-field-submit"><input type="submit" value="\u767b\u5f55" class="quc-submit quc-button quc-button-sign-in" /> </p><p class="quc-field quc-field-third-part"><span>\u5176\u4ed6\u5e10\u53f7\u767b\u5f55\uff1a</span><span class="quc-third-part"></span></p></form>',mobile:'<form method="POST" class="quc-form"><p class="quc-field quc-field-mobile quc-input-long"><label class="quc-label">\u624b\u673a\u53f7</label><span class="quc-input-bg"><input type="tel" name="mobile" class="quc-input quc-input-mobile" maxlength="11" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7" /></span></p><p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="captcha" maxlength="7" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"/></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /><a class="quc-link quc-link-captcha-change quc-captcha-change" href="#">&nbsp;\u6362\u4e00\u5f20</a><i class="quc-tip-icon"></i></p><p class="quc-field quc-field-sms-token quc-input-middle"><label class="quc-label">\u6821\u9a8c\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-sms-token" type="tel" name="smscode" autocomplete="off" maxlength="6" placeholder="\u8bf7\u8f93\u5165\u77ed\u4fe1\u6821\u9a8c\u7801" /></span><a class="quc-button quc-button-blue quc-button-get-sms-token" href="#">\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801</a></p><p class="quc-field quc-field-keep-alive"><label><input class="quc-checkbox quc-checkbox-keep-alive" type="checkbox" name="iskeepalive" checked="checked">\u4e0b\u6b21\u81ea\u52a8\u767b\u5f55</label></p><p class="quc-field quc-field-submit"><input class="quc-submit quc-button quc-button-sign-in" type="submit" value="\u767b\u5f55" /> </p></form>',qrcode:'<div class="quc-qrcode-wrapper"><div class="quc-qrcode-box"><img class="quc-qrcode" src="###"/><div class="quc-qrcode-mask"><i class="quc-qrcode-mask-bg"></i><div class="quc-qrcode-icon"><span class="quc-qrcode-tip-txt"></span><p class="quc-qrcode-refresh">\u5237\u65b0</p></div></div></div></div><p class="quc-title">\u4f7f\u7528 <a class="quc-link" href="http://i.360.cn/security/accountguard">360\u5e10\u53f7\u536b\u58eb</a>\u626b\u7801\u529f\u80fd\uff0c\u5b89\u5168\u767b\u5f55</p>',quick:'<div class="quc-loading"></div><iframe class="quc-sign-in-iframe" src="about:blank" frameborder="0" scrolling="no" allowtransparency></iframe>'},i={sina:'<a href="#" class="quc-third-part-icon quc-third-part-icon-sina" title="\u65b0\u6d6a\u5fae\u535a\u767b\u5f55"></a>',renren:'<a href="#" class="quc-third-part-icon quc-third-part-icon-renren" title="\u4eba\u4eba\u767b\u5f55"></a>',fetion:'<a href="#" class="quc-third-part-icon quc-third-part-icon-fetion" title="\u98de\u4fe1\u767b\u5f55"></a>',telecom:'<a href="#" class="quc-third-part-icon quc-third-part-icon-telecom" title="\u5929\u7ffc\u767b\u5f55"></a>',tencent:'<a href="#" class="quc-third-part-icon quc-third-part-icon-tencent" title="QQ\u767b\u5f55"></a>',weixin:'<a href="#" class="quc-third-part-icon quc-third-part-icon-weixin" title="\u5fae\u4fe1\u767b\u5f55"></a>'},s={quick:"\u5feb\u901f\u767b\u5f55",normal:"\u666e\u901a\u767b\u5f55",mobile:"\u77ed\u4fe1\u767b\u5f55",qrcode:"\u4e8c\u7ef4\u7801\u767b\u5f55",onekey:"\u4e00\u952e\u767b\u5f55"},o={},u=0,a={init:function(e){o={},this.model=e,this.$el=t(n),this.initForm(),this.initErrorTip(),this.initFooterLink(),this.initThirdPartSignIn(),this.initModelEvent(),this.initSmsToken(),this.initQrCode(),this.initCaptcha()},reset:function(){o={},this.initQuickSignIn(),u=0,this.signInType=null,this.$el.find(".quc-tip").html("")},changeType:function(e){var n,i=this,s=i.model,u=o[e];if(i.$el.attr("class","quc-mod-sign-in quc-mod-"+e+"-sign-in"),!u){u=o[e]=t(r[e]);var a=this.model.get("saveAccount");a&&e==a.type&&(n=u.find(".quc-input-account,.quc-input-mobile").val(a.account))}i.$el.find(".quc-main").empty().append(u),s.trigger("DOMUpdated",this.$el),i.signInType=e;var f=i.getTitle();i.$nav.replaceWith(f),i.$nav=f,u.find(".quc-input").each(function(e,r){var i=t(r);return 0==i.val()?(s.one("changeType afterShow",function(){n&&n.focus(),i.focus()}),!1):void 0}),s.trigger("afterShow.changeType",i.$el[0]),s.trigger("changeType",e),s.trigger("changeType:"+e)},initQuickSignIn:function(){if(this.model.isQuickSignInAvailable()){var e=t(r.quick);e.attr("src",this.model.getQuickSignInUrl()),o.quick=e}},initForm:function(){var n=this;n.model.on("changeType",function(r,i){"quick"!=i&&(n.$el.find(".quc-checkbox-keep-alive").prop("checked",n.model.get("isKeepAlive")).change(function(){n.model.set("isKeepAlive",t(this).prop("checked"))}),n.$el.find(".quc-input").focus(function(){t(this).parent().addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}),n.$el.find(".quc-form").submit(function(e){e.preventDefault();var r=t(this),s=n.model,o=r.find(".quc-button-sign-in");o.prop("disabled",!0).addClass("quc-button-signing-in"),s.one("invalid",function(){o.prop("disabled",!1).removeClass("quc-button-signing-in")}),"normal"==i?(s.set("username",t.trim(r.find(".quc-input-account").val())),s.set("password",r.find(".quc-input-password").val()),s.set("captcha",t.trim(r.find(".quc-input-captcha").val())),s.set("isNeedCheckCaptcha",n.$el.find(".quc-field-captcha:visible")[0]?!0:!1)):"mobile"==i&&(s.set("mobile",t.trim(r.find(".quc-input-mobile").val())),s.set("smsToken",t.trim(r.find(".quc-input-sms-token").val())),s.set("captcha",t.trim(r.find(".quc-input-captcha").val())),n.model.set("isNeedCheckCaptcha",n.$el.find(".quc-field-captcha:visible")[0]?!0:!1)),n.model.submit(i)}),e.getConfig("signIn.showEmailHint",!0)&&e.utils.emailHint(n.$el.find(".quc-input-account"),"account"))})},initFooterLink:function(){var e=this,t=this.$el.find(".quc-footer");t.find(".quc-link-sign-up").click(function(t){t.preventDefault(),e.onSignUp()}).end().find(".quc-link-quick-sign-in").click(function(t){t.preventDefault(),e.changeType("quick")}).end().find(".quc-link-normal-sign-in").click(function(t){t.preventDefault(),e.changeType(e.model.getSignInTypes()[0])}),e.model.on("changeType",function(n,r){"quick"==r?0==e.model.getSignInTypes().length&&t.hide():e.model.isQuickSignInAvailable()||t.find(".quc-link-quick-sign-in").hide()})},initQrCode:function(){function n(){a.model.listenQrcodeLogin().done(function(){clearTimeout(p),clearInterval(c)})}function r(){var v=e.getConfig("protocol")+"://login.360.cn/?o=sso&m=getLoginQrcode&s=3";i=e.getConfig("signIn.qrCodeUrl",v)+"&t="+Math.random(),o.show().find("span").html(l),s.hide(),s.off("load").on("load",function(){s.show(),o.hide(),u=(new Date).getTime(),c=setInterval(n,2e3),p=setTimeout(function(){a.model.trigger("timeout"),clearInterval(c)},f)}),s.off("error").on("error",function(){o.find("span").html("\u4e8c\u7ef4\u7801\u83b7\u53d6\u5931\u8d25"),o.find(".quc-qrcode-refresh").css("cursor","pointer").show(),o.off("click").one("click",".quc-qrcode-refresh",function(){o.find("span").html("\u4e8c\u7ef4\u7801\u52a0\u8f7d\u4e2d..."),t(this).hide(),r()}).show()}),s.attr("src",i)}var i,s,o,a=this,f=1e3*e.getConfig("signIn.qrCodeTTL",120),l="\u4e8c\u7ef4\u7801\u52a0\u8f7d\u4e2d...",c=0,p=0;a.model.on("changeType:qrcode",function(){s=a.$el.find(".quc-qrcode"),o=a.$el.find(".quc-qrcode-mask"),(new Date).getTime()-u>=f?r():(o.hide(),c=setInterval(n,2e3)),a.model.on("changeType",function(e,t){"qrcode"!=t&&clearInterval(c)})}).on("clearQrTime",function(){u=0,clearTimeout(p),clearInterval(c)}).on("timeout",function(){clearInterval(c),o.find("span").html("\u4e8c\u7ef4\u7801\u5df2\u8fc7\u671f"),o.find(".quc-qrcode-refresh").css("cursor","pointer").show(),o.off("click").one("click",".quc-qrcode-refresh",function(){o.find("span").html("\u4e8c\u7ef4\u7801\u52a0\u8f7d\u4e2d..."),t(this).hide(),r()}).show()})},initSmsToken:function(){var t,n,r,i,s=this,o=e.utils.getTimer("sign_in");o.on("timer_start",function(e,t){r.addClass("quc-button-disabled"),r.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),o.on("timer_tick",function(e,t){r.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),o.on("timer_stop",function(){r.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),r.removeClass("quc-button-disabled")});var u=function(e){e.preventDefault(),r.hasClass("quc-button-disabled")||(s.model.set("mobile",t.val()),s.model.set("captcha",n.val()),r.html("\u53d1\u9001\u4e2d..."),r.addClass("quc-button-disabled"),s.model.sendSmsToken().done(function(e){var t=s.$el.find(".quc-tip");t.removeClass("quc-tip-error").addClass("quc-tip-success").html("\u53d1\u9001\u6210\u529f").show(),i.find(".quc-input").one("change",function(){t.removeClass("quc-tip-success").html(t.attr("data-default-tip"))}),o.start(),s.model.set("token",e.vt),s.model.trigger("dealCaptcha")}).fail(function(e){r.html("\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801"),r.removeClass("quc-button-disabled"),e.field=s.$el.find(".quc-field-mobile");var t=e.errdetail&&e.errdetail.captchaUrl;t&&(e.fromServer=!0,s.model.setCaptchaUrl(t)),s.model.trigger("invalid",e)}))};this.model.on("changeType:mobile",function(){i=s.$el.find(".quc-field-mobile"),t=i.find(".quc-input-mobile"),n=s.$el.find(".quc-input-captcha"),r=s.$el.find(".quc-button-get-sms-token"),r.off("click",u).on("click",u),o.isRunning()&&o.resume()})},initThirdPartSignIn:function(){var e=this;e.model.on("changeType:normal",function(){var n=e.model.getThirdPartProviders();if(n=t.grep(n,function(t){return i[t]?!0:(e.model.trigger("warn","\u9519\u8bef\u7684\u7b2c\u4e09\u65b9\u767b\u5f55\u7c7b\u578b\uff1a"+t),!1)}),n.length>0){var r=t("<span>").addClass("quc-third-part");t.each(n,function(n,s){t(i[s]).click(function(t){t.preventDefault(),e.model.thirdPartSignIn(s)}).appendTo(r)}),e.$el.find(".quc-third-part").replaceWith(r)}else e.$el.find(".quc-field-third-part").hide()})},initModelEvent:function(){var n=this;n.model.on("show",function(e,t){n.show(t&&t.wrapper)}).on("success",function(){var n=e.getConfig("signInBoxWrapper",""),r=e.getConfig("signInBoxOpts",{});n&&e.plugin.signInBox&&t(n).empty().html(e.plugin.signInBox(r))}).on("hide",function(){n.hide()}).on("afterhide",function(){"qrcode"==n.getCurrentType()&&n.model.trigger("clearQrTime")}).on("close",function(){"qrcode"==n.getCurrentType()&&n.model.trigger("clearQrTime")}).on("dealCaptcha",function(){n.$el.find(".quc-field-captcha").hide(),n.$el.find(".quc-input-captcha").val(""),n.$el.find(".quc-input-mobile").off("change").on("change",function(){n.$el.find(".quc-field-captcha").show();try{n.$el.find(".quc-captcha-change").trigger("click")}catch(e){n.$el.find(".quc-captcha-img").attr("src",n.$el.find(".quc-captcha-img").attr("src")+"&_t="+(new Date).getTime())}n.model.set("token",null),n.model.trigger("timer_stop")})})},initErrorTip:function(){var t=this;t.model.on("invalid",function(n,r){var i=t.$el.find(".quc-tip");if(!r.signInType||t.signInType==r.signInType){var s=t.$el.find(".quc-input-"+e.utils.getErrorType(r));"password"==e.utils.getErrorType(r)&&e.utils.selectText(s),i.removeClass("quc-tip-success").addClass("quc-tip-error").html(r.errmsg),t.model.one("changeType",function(){i.html("")})}})},onSignUp:function(){this.model.signUp()},initCaptcha:function(){var n,r,i,s=this,o=!1,u=function(e){s.model.getCaptchaUrl("login").then(function(t){n.find(".quc-captcha-img").attr("src",t);var r=n.find(".quc-input-captcha").val("");e&&r.focus()})},a=function(t,r){var i="captcha"==e.utils.getErrorType(r);o&&r.fromServer&&s.signInType==r.signInType?u(i):i&&(n.show(),o||u(!0),o=!0)},f=function(e){l(e),r.show(),s.$el.find(".quc-captcha-change").on("mousedown",function(e){e.preventDefault()}).on("click",function(t){t.preventDefault(),l(e),r.find(".quc-input-captcha").focus()})},l=function(e){var n="mobile"==e?"strictreg":"reg";s.model.getCaptchaUrl(n,!0).then(function(e){r.find(".quc-captcha-img").attr("src",e),r.find(".quc-input-captcha").val(""),r.find(".quc-tip").removeClass("quc-tip-error").html(function(){return t(this).attr("data-default-tip")}),r.find(".quc-tip-icon").removeClass("quc-tip-icon-incorrect quc-tip-icon-correct")})};s.model.on("changeType",function(p,v){if(s.model.off("invalid",a),"normal"==v)n=s.$el.find(".quc-field-captcha"),s.$el.find(".quc-input-account").blur(function(){var e=t.trim(t(this).val());e&&s.model.checkIsCaptchaRequired(e).done(function(e){e?(n.show(),u()):n.hide(),o=e,s.$el.triggerHandler("QucDOMUpdated")})}),s.$el.find(".quc-captcha-change").click(function(e){e.preventDefault(),u()}),s.model.on("invalid",a);else{if("mobile"!=v)return;if(s.model.set("token",null),r=s.$el.find(".quc-field-captcha"),0==r.length)return;f(v),s.model.on("invalid",function(t,n){var r=n.type||"mobile";i||"captcha"!=e.utils.getErrorType(n)?n.fromServer&&l(r):(i=!0,f(r))})}})},getCurrentType:function(){return this.signInType||(this.signInType=this.model.isQuickSignInAvailable()?"quick":this.model.getSignInTypes()[0]),this.signInType},getTitle:function(){var n,r=this,i=r.model.getSignInTypes(),o=r.getCurrentType();return"quick"==o||i.length<2?n=t("<span>").html(e.getConfig("signIn.panelTitle","\u6b22\u8fce\u767b\u5f55360")):(n=t("<p>").addClass("quc-sign-in-nav quc-sign-in-nav-c"+i.length),t.each(i,function(e,i){t("<a>").addClass(o==i?"quc-current":"").attr({href:"#","data-type":i}).html(s[i]||"\u5176\u4ed6\u65b9\u5f0f").click(function(e){e.preventDefault(),o!=i&&r.changeType(i)}).appendTo(n)})),n},show:function(n){var r=this;if(this.reset(),this.$nav=this.getTitle(),this.changeType(this.getCurrentType()),n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{var i=this.panel=new e.utils.Panel;i.setTitle(this.$nav),i.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),i.show(),t(i).on("close",e.getConfig("signIn.panelCloseHandler",t.noop)),t(i).on("close",function(){r.model.trigger("close")})}this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterHide",this.$el[0])}};e.ui.signIn={init:function(){a.init.apply(a,arguments)},changeType:function(e){a.changeType(e)},setOnSignUpCallback:function(e){a.onSignUp=e}}}(QHPass),function(e){"use strict";var t,n=e.$,r=e.getLogic({name:"signIn",validate:function(t,n){var r=e.validate,i=!1;switch(n=n||this.get(t),t.toLowerCase()){case"username":i=n?!1:r.checkAccount(n);break;case"password":i=r.checkPassword(n),i&&(i=e.utils.isSameError(i,e.ERROR.PASSWORD_EMPTY)?i:e.ERROR.PASSWORD_WRONG);break;case"mobile":i=r.checkMobile(n);break;case"smstoken":i=r.checkSmsToken(n);break;case"captcha":i=r.checkCaptcha(n)}return i},getSignInTypes:function(){return n.grep(e.getConfig("signIn.types"),function(e){return"quick"!=e})},getThirdPartProviders
:function(){var t=e.getConfig("src"),r=["pcw_so_wenda","pcw_so_baike","pcw_so_image","pcw_so_music","pcw_so","pcw_so_map","pcw_so_adunion","pcw_so_zc","pcw_so_zhanzhang","pcw_open_app","pcw_wan","pcw_wan_youxi","pcw_wan_tg"];return n.inArray(t,r)>-1?e.getConfig("signIn.thirdPart.providers",["sina","renren","fetion","telecom","tencent","weixin"])||[]:e.getConfig("signIn.thirdPart.providers",["sina","renren","fetion","telecom"])||[]},prepareQuickSignIn:function(r){var i=this,s=n.Deferred();return void 0!==t&&!r||-1==n.inArray("quick",e.getConfig("signIn.types"))?s.resolve():(e.ptLogin=function(n){0==n.s?e.sync.getRd().then(function(t){return e.sync.setCookie(t.rd)}).then(function(){return e.getUserInfo(!1)}).then(function(e){i.trigger("hide").trigger("success",e).resolve(e)}):2==n.s&&(t=!1,i.trigger("quickSignInFailed"),s.reject())},e.getQuickLoginStatus(function(e){t=0==e.errno&&e.status<2,s.resolve()})),s.promise()},isQuickSignInAvailable:function(){return!!t},sendSmsToken:function(){var t=this.get("mobile"),r=this.get("captcha"),i=this.get("token"),s=this.validate("mobile",t)||(i?!1:this.validate("captcha",r));return s?n.Deferred().reject(s).promise():e.sync.sendSmsTokenNeedPhrase(null,!0,t,r,i)},run:function(t){var n=this;n.isInit()||n.set("isKeepAlive",e.getConfig("signIn.defaultKeepAlive")),n.init().trigger("showLoading");var r=e.utils.storage().get("lastSignInAccount","").split(",");r[2]&&(new Date).getTime()<=r[2]?n.set("saveAccount",{type:r[1],account:r[0]}):e.utils.storage().remove("lastSignInAccount"),n.prepareQuickSignIn().always(function(){n.trigger("hideLoading").trigger("show",{wrapper:t})})},submit:function(t){var n,r=this,i={type:t},s=r.get("isNeedCheckCaptcha",!1);if(this.trigger("beforeSubmit"),"mobile"==t)i.account=r.get("mobile"),i.password=r.get("smsToken"),n=r.validate("mobile")||s&&r.validate("captcha")||r.validate("smsToken");else{var s=r.get("isNeedCheckCaptcha");i.account=r.get("username"),i.password=r.get("password"),i.captcha=r.get("captcha"),n=r.validate("username")||r.validate("password")||s&&r.validate("captcha")}return i.isKeepAlive=r.get("isKeepAlive"),n?(n.signInType=t,void r.trigger("invalid",n)):void e.sync.signIn(i).then(function(n){var s=e.getConfig("signIn.saveAccount",604800);if(s&&"normal"==t){var o=(new Date).getTime()+1e3*s;e.utils.storage().set("lastSignInAccount",[i.account,t,o].join(","))}r.trigger("hide").trigger("success",n).resolve(n)},function(e){e.fromServer=!0,e.signInType=t;var n=e.errdetail&&e.errdetail.captchaUrl;n&&r.setCaptchaUrl(n),r.trigger("invalid",e)})},checkIsCaptchaRequired:function(t){var r=n.Deferred(),i=this;return e.sync.checkSignInCaptchaRequired(t).always(function(e){e.captchaUrl&&i.setCaptchaUrl(e.captchaUrl),r.resolve(!!e.captchaFlag)}),r.promise()},getQuickSignInUrl:function(){var t=n.map(e.getConfig("domainList",[]),function(e){return e.split(".")[0]}).join(","),r=e.getConfig("protocol"),i=e.getConfig("signIn.quick.showUserNum",3),s=e.getConfig("signIn.quick.stylesheet",""),o=e.getConfig("signIn.quick.mode","picture");return r+"://axlogin.passport.360.cn/ptlogin.php?displayType="+o+"&custUserNum="+i+"&nextUrl="+encodeURIComponent(e.getConfig("proxy"))+"&requestScema="+r+"&custStyleUrl="+encodeURIComponent(s)+"&src="+e.getConfig("src")+"&domain_list="+t+"&t="+(new Date).getTime()},thirdPartSignIn:function(t){var r,i=this,s=e.getConfig("signIn.thirdPart",{}),o="jump"==s.mode,u=this.get("callback"),f=o&&s.jumpUrl||o&&"string"==typeof u&&u||location.href,l={sina:"Sina",renren:"RenRen",msn:"Msn",fetion:"Fetion",telecom:"Telecom",tencent:"qq",weixin:"weixin"};f=o?f.replace(/(?:http(s?):\/\/)?(.*)/,"http$1://$2"):f.replace(/((?:https?:\/\/)?[\w.:]*\/?).*/,"$1");var h=e.getConfig("protocol")+"://i.360.cn/oauth/loginByOauth?c="+l[t]+"&type="+(o?"normal":"pop")+"&destUrl="+encodeURIComponent(f)+"&f="+e.getConfig("src")+"&r="+(new Date).getTime();if(o)location.href=h;else{var p="";if("tab"!=s.mode){var d=n(window),v=645,m=875,g=Math.max(Math.round((d.outerWidth()-m)/2),0),y=Math.max(Math.round((d.outerHeight()-v)/2),0);p="height="+v+",width="+m+",left="+g+",top="+y+",alwaysRaised=yes"}r=window.open(h,"oauthlogin",p)}e.thirdLoginSuccess=function(){e.sync.getRd().then(function(t){return e.sync.setCookie(t.rd)}).then(function(){return e.getUserInfo(!1)}).then(function(e){r.close(),i.trigger("hide").trigger("success",e).resolve(e)},function(t){e.reportWarn(t),i.trigger("invalid",t)})}},signUp:function(){var t=this.getCallback();e.signUp?(this.trigger("hide"),e.signUp(t)):location.href="http://i.360.cn/reg/?src="+e.getConfig("src")+"&destUrl="+encodeURIComponent("string"==typeof t?t:location.href)},listenQrcodeLogin:function(){var t=this;return e.utils.getCookie("i360QRKEY")?e.sync.checkQrCodeSignInStatus().done(function(n){return e.sync.setCookie(n.s).then(function(){return e.getUserInfo(!1)}).then(function(e){t.trigger("hide").trigger("success",e).resolve(e)},function(n){e.reportWarn(n),t.trigger("invalid",n)})}):void 0}});e.events.on("init.core",function(){e.getConfig("signIn.prepareQuick",!1)&&r.prepareQuickSignIn()}),e.signIn=function(e,t){!e||1==e.nodeType||e instanceof n||(t=e,e=void 0),r.setCallback(t).run(e)},e.setConfig({signIn:{types:["quick","normal"],defaultKeepAlive:!0}})}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-sign-up quc-clearfix"><div class="quc-left-bar"><ul class="quc-sign-up-type"></ul></div><div class="quc-main"><div class="quc-tip-wrapper quc-global-error"><p class="quc-tip quc-tip-error"></p></div><form class="quc-form" method="post" action="https://i.360.cn/signUp/dosignUpAccount"><p class="quc-field quc-field-submit"><input class="quc-button quc-button-sign-up" type="submit" value="\u7acb\u5373\u6ce8\u518c" /></p><p class="quc-field quc-field-licence"><label><input class="quc-checkbox" type="checkbox" name="is_agree" data-name="agreeLicence" checked="checked"><span>\u6211\u5df2\u7ecf\u9605\u8bfb\u5e76\u540c\u610f<a class="quc-link" href="http://i.360.cn/pub/protocol.html" target="_blank">\u300a360\u7528\u6237\u670d\u52a1\u6761\u6b3e\u300b</a></span></label></p><p class="quc-login">\u5df2\u6709\u5e10\u53f7\uff0c<a href="#" class="quc-link quc-link-login">\u7acb\u5373\u767b\u5f55</a></p></form></div></div>',r={mobile:'<p class="quc-field quc-field-mobile quc-input-long"><label class="quc-label">\u624b\u673a\u53f7</label><span class="quc-input-bg"><input class="quc-input quc-input-mobile" type="tel" name="account" data-name="mobile" maxlength="11" /></span><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7</span></p>',email:'<p class="quc-field quc-field-email quc-input-long"><label class="quc-label">\u90ae\u7bb1</label><span class="quc-input-bg"><input class="quc-input quc-input-email" type="text" name="account" data-name="email" autocomplete="off"/></span><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u8f93\u5165\u60a8\u7684\u5e38\u7528\u90ae\u7bb1\uff0c<a class="quc-link" href="http://email.163.com/" target="_blank" tabindex="99">\u6ca1\u6709\u90ae\u7bb1\uff1f</a></span></p>',username:'<p class="quc-field quc-field-username quc-input-long"><label class="quc-label">\u7528\u6237\u540d</label><span class="quc-input-bg"><input class="quc-input quc-input-username" type="text" name="userName" data-name="username" maxlength="14" /></span><i class="quc-tip-icon"></i><span class="quc-tip">2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587</span></p>',nickname:'<p class="quc-field quc-field-nickname quc-input-long"><label class="quc-label">\u6635\u79f0</label><span class="quc-input-bg"><input class="quc-input quc-input-nickname" type="text" name="nickname" maxlength="14" /></span><i class="quc-tip-icon"></i><span class="quc-tip">2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587</span></p>',password:'<p class="quc-field quc-field-password quc-input-long"><label class="quc-label">\u5bc6\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-password" type="password" name="password" maxlength="20" /></span><i class="quc-tip-icon"></i><span class="quc-tip">6-20\u4e2a\u5b57\u7b26(\u533a\u5206\u5927\u5c0f\u5199)</span></p>',passwordAgain:'<p class="quc-field quc-field-password-again quc-input-long"><label class="quc-label">\u786e\u8ba4\u5bc6\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-password-again" type="password" name="passwordAgain" maxlength="20" /></span><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801</span></p>',captcha:'<p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="captcha" maxlength="7" autocomplete="off" /></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /><a class="quc-link quc-link-captcha-change quc-captcha-change" href="#">\u6362\u4e00\u5f20</a><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</span></p>',smsToken:'<p class="quc-field quc-field-sms-token quc-input-middle quc-clearfix"><label class="quc-label">\u6821\u9a8c\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-sms-token" type="text" name="smscode" data-name="smsToken" maxlength="6" /></span><a href="#" class="quc-button quc-button-blue quc-get-sms-token">\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801</a><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u8f93\u5165\u77ed\u4fe1\u4e2d6\u4f4d\u6570\u5b57\u6821\u9a8c\u7801</span><a class="quc-mobile-tip quc-link" href="http://i.360.cn/help/smscode" target="_blank" tabindex="99">\u6821\u9a8c\u7801\u5e38\u89c1\u95ee\u9898</a></p>'},i={email:{name:"\u90ae\u7bb1\u6ce8\u518c",fields:["email","username","nickname","password","passwordAgain","captcha"]},mobile:{name:"\u624b\u673a\u6ce8\u518c",fields:["mobile","captcha","smsToken","username","nickname","password","passwordAgain"]},username:{name:"\u7528\u6237\u540d\u6ce8\u518c",fields:["username","nickname","password","passwordAgain","captcha"]}},s={},o={init:function(e){this.model=e,this.initModelEvent(),this.initCaptcha(),this.initSmsToken(),this.initErrorTip()},setElement:function(){s={};var e=this;e.$el&&e.$el.remove(),e.$el=t(n),e.userType=null,e.initNav(),e.$el.on("click",".quc-link-login,.quc-button-login",function(t){t.preventDefault(),e.onSignIn()}),e.$el.find(".quc-form").submit(function(t){t.preventDefault(),e.submit()}),e.$el.find(".quc-checkbox").on("click",function(){e.model.trigger("afterShow.changeType")})},initModelEvent:function(){var n=this;n.model.on("show",function(e,t){n.show(t&&t.wrapper)}).on("success",function(){var n=e.getConfig("signInBoxWrapper",""),r=e.getConfig("signInBoxOpts",{});n&&e.plugin.signInBox&&t(n).empty().html(e.plugin.signInBox(r))}).on("hide",function(){n.hide()}).on("dealCaptcha",function(){n.$el.find(".quc-field-captcha").hide(),n.$el.find(".quc-input-captcha").val(""),n.$el.find(".quc-input-mobile").off("change").on("change",function(){n.$el.find(".quc-field-captcha").show(),n.$el.find(".quc-captcha-change").trigger("click"),n.model.set("token",null),n.model.trigger("timer_stop")})})},initCaptcha:function(){var n,r,i=this,s=function(e){var n="mobile"==e?"strictreg":"reg";i.model.getCaptchaUrl(n,!0).then(function(e){r.find(".quc-captcha-img").attr("src",e),r.find(".quc-input-captcha").val(""),r.find(".quc-tip").removeClass("quc-tip-error").html(function(){return t(this).attr("data-default-tip")}),r.find(".quc-tip-icon").removeClass("quc-tip-icon-incorrect quc-tip-icon-correct")})},o=function(e){s(e),r.show(),r.find(".quc-captcha-change").on("mousedown",function(e){e.preventDefault()}).on("click",function(t){t.preventDefault(),s(e),r.find(".quc-input-captcha").focus()})};i.model.on("changeType",function(e,t){r=i.$el.find(".quc-field-captcha"),0!=r.length&&(n||(n=i.model.isCaptchaRequired())||"mobile"==t)&&o(t)}),this.model.on("invalid",function(t,r){var i=r.type||"reg";n||"captcha"!=e.utils.getErrorType(r)?r.fromServer&&s(i):(n=!0,o(i))})},initSmsToken:function(){var t,n,r,i,s=this,o="quc-button-disabled",u=e.utils.getTimer("sign_up");u.on("timer_start",function(e,t){n.addClass(o),n.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),u.on("timer_tick",function(e,t){n.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),u.on("timer_stop",function(){n.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),n.removeClass(o)}),s.model.on("timer_stop",function(){u.stop()});var f=function(e){e.preventDefault();var a=n.siblings(".quc-tip-icon");n.hasClass(o)||(s.model.set("mobile",t.val()),s.model.set("captcha",i.val()),n.html("\u53d1\u9001\u4e2d..."),n.addClass(o),a.hide(),s.model.trigger("afterShow.changeType"),s.model.sendSmsToken().done(function(e){var t=r.find(".quc-tip");t.addClass("quc-tip-success").html("\u53d1\u9001\u6210\u529f").show(),r.find(".quc-input").one("change",function(){t.removeClass("quc-tip-success").html(t.attr("data-default-tip"))}),a.show(),u.start(),s.model.set("token",e.vt),s.model.trigger("dealCaptcha")}).fail(function(e){a.show(),n.html("\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801"),n.removeClass(o),e.type="mobile";var t=e.errdetail&&e.errdetail.captchaUrl;t&&(e.fromServer=!0,s.model.setCaptchaUrl(t)),s.model.trigger("invalid",e)}))};this.model.on("changeType",function(){r=s.$form.find(".quc-field-sms-token"),t=s.$form.find(".quc-input-mobile"),i=s.$form.find(".quc-input-captcha"),n=r.find(".quc-get-sms-token"),0!=r.length&&(n.off("click",f).on("click",f),u.isRunning()&&u.resume())})},initErrorTip:function(){var e=this;e.model.on("invalid",function(t,n){var r=n.field||e.getErrorField(n.errno),i=r.find(".quc-input-bg"),s=r.find(".quc-tip"),o=r.find(".quc-tip-icon");s.removeClass("quc-tip-success").addClass("quc-tip-error").html(n.errmsg).show(),o.removeClass("quc-tip-icon-incorrect").addClass("quc-tip-icon-incorrect"),i.addClass("quc-input-bg-incorrect"),r.find(".quc-input").one("focus quc-validate",function(){s.removeClass("quc-tip-error").html(s.attr("data-default-tip")),o.removeClass("quc-tip-icon-incorrect"),i.removeClass("quc-input-bg-incorrect")})}),e.model.on("afterShow.changeType",function(){e.$el.find(".quc-global-error .quc-tip").html("")})},initNav:function(){var e=this,n=this.model.getTypes(),r=this.$el.find(".quc-left-bar").show().find(".quc-sign-up-type").empty();t.each(n,function(n,s){if(i[s]){var o=t("<a>").attr("href","#").html(i[s].name).prepend(t("<i>").addClass("quc-icon quc-icon-"+s)).click(function(t){t.preventDefault(),e.changeType(s)});t("<li>").addClass("quc-type-"+s).append(o).appendTo(r)}}),this.changeType(n[0])},onSignIn:function(){this.model.signIn()},getFieldEl:function(e){var n=this,i=r[e],s=t(i);return s.find(".quc-input").focus(function(){t(this).parent().addClass("quc-input-bg-focus"),n.model.trigger("afterShow.changeType")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus"),n.validate(s),s.hasClass("quc-field-password")&&n.validate(s.siblings(".quc-field-password-again")),s.hasClass("quc-field-password-again")&&n.validate(s.siblings(".quc-field-password"))}),s},getFormEl:function(n){var r=this;if(!s[n]){if(!i[n])return void r.model.reportWarn("\u672a\u5b9a\u4e49\u7684\u7c7b\u522b typeConf:"+n);var o=t("<div>");t.each(i[n].fields,function(e,t){r.model.isShowField(t,n)&&o.append(r.getFieldEl(t))}),s[n]=o,e.utils.emailHint(o.find(".quc-input-email"))}return s[n][0]},getErrorField:function(t){var n=e.utils.getErrorType(t);return"account"==n?this.$form.find(".quc-field-"+this.userType):"other"!=n?this.$form.find(".quc-field-"+n):this.$el.find(".quc-global-error")},changeType:function(e){var n=this.$el.find(".quc-sign-up-type .quc-type-"+e);n.length>0&&this.userType!=e&&(n.addClass("quc-current"),n.siblings(".quc-current").removeClass("quc-current"),this.$form&&this.$form.detach(),this.$form=t(this.getFormEl(e)),this.$form.prependTo(this.$el.find(".quc-form")),this.model.trigger("DOMUpdated",this.$el),this.$el.triggerHandler("QucDOMUpdated"),this.model.trigger("afterShow.changeType",this.$el[0]),this.model.trigger("changeType",e),this.userType=e,this.$form.find(".quc-field .quc-tip").attr("data-default-tip",function(){return t(this).html()}),this.model.clear())},validate:function(e){var t=this,n=e.find(".quc-input"),r=n.attr("data-name")||n.attr("name"),i=n.val();0!=e.length&&0!=i.length&&(n.trigger("quc-validate"),t.model.validate(r,i,!0).done(function(){var t=e.find(".quc-tip-icon");t.removeClass("quc-tip-icon-incorrect").addClass("quc-tip-icon-correct"),n.one("focus",function(){t.removeClass("quc-tip-icon-correct")})}).fail(function(n){n.field=e,t.model.trigger("invalid",n)}))},submit:function(){var e=this,n=e.$el.find(".quc-button-sign-up");e.$el.find(".quc-form input:not(:submit, :button)").each(function(n,r){var i=t(r),s=i.attr("data-name")||i.attr("name"),o=t.inArray(i.attr("type"),["checkbox","radio"])>=0?i.prop("checked"):i.val();e.model.set(s,o)}),n.prop("disabled",!0).addClass("quc-button-submitting"),e.model.one("invalid",function(){n.prop("disabled",!1).removeClass("quc-button-submitting")}),e.model.set("isNeedCheckCaptcha",e.$el.find(".quc-field-captcha:visible")[0]?!0:!1),e.model.set("userType",this.userType),e.model.submit()},show:function(n){if(this.setElement(),n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("signUp.panelTitle","\u6b22\u8fce\u6ce8\u518c360\u5e10\u53f7")),r.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),r.show(),t(r).on("close",e.getConfig("signUp.panelCloseHandler",t.noop));var i=e.utils.browser;(i.ie6||i.ie7)&&r.setSize(i.ie6?564:544)}this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterHide",this.$el[0])}};e.ui.signUp={init:function(){o.init.apply(o,arguments)},changeType:function(e){o.changeType(e)}}}(QHPass),function(e){"use strict";var t,n=e.$,r={email:1,mobile:2,username:4},i=e.getLogic({name:"signUp",validate:function(t,r,i){var s,o=e.validate;switch("boolean"==typeof r&&(r=this.get(t)),t.toLowerCase()){case"mobile":s=o.checkMobile(r);break;case"email":s=o.checkEmail(r);break;case"username":s=o.checkUsername(r);break;case"nickname":s=o.checkNickname(r);break;case"password":this.set("password",r),s=o.checkPassword(r,!0);break;case"passwordagain":s=o.checkPasswordConfirm(this.get("password"),r);break;case"captcha":s=o.checkCaptcha(r);break;case"smstoken":s=o.checkSmsToken(r)}if(!i)return s;var u=e.sync,f=n.Deferred();if(s)return f.reject(s);switch(t.toLowerCase()){case"mobile":return u.checkMobileNumberExist(r);case"email":return u.checkEmailExist(r);case"username":return u.checkUsernameExist(r);case"nickname":return u.checkNicknameExist(r);default:return f.resolve()}},isCaptchaRequired:function(){return t},prepareCaptcha:function(){var r=this;return e.sync.checkSignUpCaptchaRequired().then(function(e){t=e.captchaFlag,r.setCaptchaUrl(e.captchaUrl)},function(){return t=!0,n.Deferred().resolve().promise()})},isShowField:function(t,r){var i=n.inArray(t,["username","nickname","passwordAgain"])>=0,s="signUp.hide"+t.substr(0,1).toUpperCase()+t.substr(1);return!i||r==t||!e.getConfig(s,!1)},sendSmsToken:function(){var t=this.get("mobile"),r=this.get("captcha"),i=this.get("token"),s=this.validate("mobile",t)||(i?!1:this.validate("captcha",r));return s?n.Deferred().reject(s).promise():e.sync.sendSmsTokenNeedPhrase(null,!1,t,r,i)},run:function(t){var n=this;n.init().trigger("showLoading"),n.prepareCaptcha().then(function(){return e.activeEmail.prepare(n,t)}).done(function(){n.trigger("hideLoading").trigger("show",{wrapper:t})})},getTypes:function(){return e.getConfig("signUp.types",["mobile","email"])},submit:function(){var i=this,s=i.get("userType"),o=i.get("isNeedCheckCaptcha",!1),u=r[s];if(!u)return void i.model.reportWarn("\u672a\u5b9a\u4e49\u7684\u7c7b\u522b typeConf:"+s);this.trigger("beforeSubmit");var f={acctype:u,account:i.get(s),password:i.get("password")};f.emailActiveFlag=e.getConfig("signUp.sendActiveEmail",!0),n.each(["username","nickname","passwordAgain","smsToken","agreeLicence"],function(e,t){var n=i.get(t,void 0);void 0!==n&&(f[t]=n)}),o&&(f.captcha=i.get("captcha"));var l=!1,h={mobile:i.get("mobile"),email:i.get("email")};n.each(n.extend({},f,h),function(e,t){var n=i.validate(e,t);n&&i.trigger("invalid",n),l=l||n}),!l&&e.sync.signUp(f).then(function(t){var r=n.Deferred();return t.activeurl?(t.email=i.get("email"),e.activeEmail(t,function(){e.sync.getRd().done(function(e){r.resolve(e)}).fail(function(){i.signIn()})})):(t.rd=encodeURIComponent(t.rd),r.resolve(t)),r.promise()}).then(function(t){return e.sync.setCookie(t.rd)}).then(function(){return e.getUserInfo(!1)}).done(function(e){i.trigger("hide").trigger("success",e).resolve(e)}).fail(function(e){e.fromServer=!0;var n=e.errdetail&&e.errdetail.captchaUrl;n&&(t=!0,i.setCaptchaUrl(n)),i.trigger("invalid",e)})},signIn:function(){var t=this.getCallback();e.signIn?(this.trigger("hide"),e.signIn(t)):location.href="http://i.360.cn/login/?src="+e.getConfig("src")+"&destUrl="+encodeURIComponent("string"==typeof t?t:location.href)}});e.signUp=function(e,t){!e||1==e.nodeType||e instanceof n||(t=e,e=void 0),i.setCallback(t).run(e)},e.setConfig("signUp.hideNickname",!0)}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-set-username"><form class="quc-form"><p class="quc-input-wrapper quc-input-long"><span class="quc-input-bg"><input type="text" name="username" class="quc-input quc-input-username" maxlength="14" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff1a2-14\u4e2a\u5b57\u7b26,\u652f\u6301\u4e2d\u82f1\u6587"/></span><input type="submit" value="\u4fdd\u5b58" class="quc-submit quc-button quc-button-save"/></p><p class="quc-tip"></p><div class="quc-alternative-wrapper"><p class="quc-tip-error">\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u5360\u7528\uff0c\u6211\u4eec\u4e3a\u60a8\u63a8\u8350\u4ee5\u4e0b\u7528\u6237\u540d\uff1a</p><div class="quc-alternatives"></div></div></form></div> ',r='<a href="#" class="quc-link"></a>',i={init:function(e){this.model=e,this.$el=t(n),this.initModelEvent(),this.initElementEvent()},reset:function(){this.$el.remove(),this.$el=t(n),this.initElementEvent()},initElementEvent:function(){var e=this;e.$el.find(".quc-input").focus(function(){t(this).parent().removeClass("quc-input-bg-incorrect").addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}),e.$el.find(".quc-form").submit(function(n){var r=t(this),i=r.find(".quc-submit"),s="quc-button-saving",o=t.trim(r.find(".quc-input-username").val());n.preventDefault(),i.prop("disabled",!0).addClass(s),e.model.one("invalid",function(){i.prop("disabled",!1).removeClass(s)}),e.model.set("username",o),e.model.submit()})},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n&&n.wrapper)}).on("hide",function(){e.hide()}).on("invalid",function(t,n){e.showErrorTip(n)})},setUsername:function(e){this.$el.find(".quc-input-username").val(e).focus()},showErrorTip:function(t){var n=this.$el.find(".quc-input-username");if(e.utils.isSameError(t,e.ERROR.USERNAME_DUPLICATE)&&this.model.get("alternatives",[]).length>0)this.showAlternatives();else{var r=this.$el.find(".quc-tip");this.$el.find(".quc-input-bg").addClass("quc-input-bg-incorrect"),r.addClass("quc-tip-error").html(t.errmsg).show(),n.one("focus",function(){r.html("")})}n.parent().addClass("quc-input-bg-incorrect")},showAlternatives:function(){var e,n=this,i=this.model.get("alternatives",[]),s=this.$el.find(".quc-tip");if(!(i.length<=0)){var o=this.$el.find(".quc-alternatives"),u=function(e){return function(t){t.preventDefault(),n.setUsername(e)}};o.empty();for(var a=0,f=i.length;f>a;a++)e=i[a],t(r).html(e).on("click",u(e)).appendTo(o);o.parent().show(),s.hide(),this.$el.find(".quc-input-username").on("change",function(e){var n=t(this);-1==t.inArray(n.val(),i)&&(o.parent().hide(),s.show(),n.off(e))})}},show:function(n){if(n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{this.panel&&this.reset();var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("setUsername.panelTitle","\u8bbe\u7f6e\u7528\u6237\u540d")),r.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),r.show(),t(r).on("close",e.getConfig("setUsername.panelCloseHandler",t.noop))}this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterHide",this.$el[0])}};e.ui.setUsername={init:function(){i.init.apply(i,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n=e.getLogic({name:"setUsername",validate:function(t){return t=t||this.get("username"),e.validate.checkUsername(t)},run:function(e){this.init().trigger("show",{wrapper:e})},submit:function(){var n=this,r=t.Deferred(),i=n.validate();return this.trigger("beforeSubmit"),i?r.reject(i):r.resolve(),r.then(function(){return e.getUserInfo(!1)}).then(function(t){return e.sync.setUsername(t.crumb,n.get("username"))}).done(function(e){n.trigger("hide").trigger("success").resolve(e)}).fail(function(e){n.set("alternatives",e.userinfo),n.trigger("invalid",e)})}});e.setUsername=function(e,r){!e||1==e.nodeType||e instanceof t||(r=e,e=void 0),n.setCallback(r).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-authentication"><div class="quc-tip-wrapper quc-global-error"><p class="quc-tip quc-tip-error"></p></div><div class="quc-mod-authentication-captcha"><form method="post" class="quc-form quc-form-captcha"><p class="quc-field quc-input-long quc-field-mobile quc-clearfix"><label class="quc-label">\u624b\u673a\u53f7</label><span class="quc-input-bg"><input class="quc-input quc-input-mobile" type="tel" name="account" data-name="mobile" maxlength="11" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7" autocomplete="off"/></span></p><p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="captcha" data-name="captcha" maxlength="7" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801" /></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /> <a class="quc-link quc-captcha-change-link quc-captcha-change" href="#">\u6362\u4e00\u5f20</a></p><p><input class="quc-button quc-button-big quc-button-submit quc-button-check-captcha" type="submit" value="\u63d0\u4ea4" /></p></form></div><div class="quc-mod-authentication-token"><form method="post" class="quc-form quc-form-token"><div class="quc-field quc-clearfix"><p class="quc-field-send-smstoken"><span class="quc-input quc-input-method">\u6821\u9a8c\u7801\u5df2\u53d1\u9001\u81f3\uff1a<i class="quc-sec-mobile"></i></span><a href="#" class="quc-button quc-button-blue quc-get-sms-token">\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801</a></p><a class="quc-link quc-link-mobile-tip" href="http://i.360.cn/help/smscode" target="_blank" tabindex="99">\u6821\u9a8c\u7801\u5e38\u89c1\u95ee\u9898</a></div><p class="quc-field quc-field-sms-token quc-input-long"><label class="quc-label">\u6821\u9a8c\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-sms-token" type="text" name="smscode" data-name="smstoken" maxlength="6" placeholder="\u8bf7\u8f93\u5165\u516d\u4f4d\u6821\u9a8c\u7801" autocomplete="off"/></span></p><p><input class="quc-button quc-button-big quc-button-submit quc-button-identify" type="submit" value="\u63d0\u4ea4" /><a href="###" class="quc-link quc-link-go-back">\u8fd4\u56de</a></p></form></div><div class="quc-mod-authentication-success"><p class="quc-field quc-field-success">\u8be5\u5e10\u53f7\u5df2\u5b8c\u6210\u8ba4\u8bc1\uff01</p><p class="quc-field quc-field-success"><input class="quc-button quc-button-blue quc-button-ensure" type="submit" value="\u786e\u8ba4" /></p></div></div>',r={init:function(e){this.model=e,this.$el=t(n),this.initModelEvent(),this.initElementEvent(),this.initSmsToken(),this.initCaptcha()},reset:function(){this.$el&&this.$el.remove(),this.$el=t(n),this.initElementEvent(),this.initCaptcha()},initCaptcha:function(){var t=this,n=t.$el.find(".quc-field-captcha"),r=function(e){t.model.getCaptchaUrl("shiming").then(function(t){n.find(".quc-captcha-img").attr("src",t);var r=n.find(".quc-input-captcha").val("");e&&r.focus()})},i=function(t,n){var i="captcha"==e.utils.getErrorType(n);n.fromServer&&r(i)};t.$el.find(".quc-captcha-change").click(function(e){e.preventDefault(),r()}),t.model.on("invalid",i),r()},initElementEvent:function(){var e=this,n=e.model;e.$el.find(".quc-input").focus(function(){t(this).parent().removeClass("quc-input-bg-incorrect").addClass("quc-input-bg-focus")}).blur(function(){var e=t(this);e.parent().removeClass("quc-input-bg-focus");var r=e.attr("data-name")||e.attr("name"),i=t.trim(e.val());if(0!=i.length){var s=n.validate(r,i);s?n.trigger("invalid",s):n.trigger("clean")}}),e.$el.find(".quc-form-captcha").submit(function(e){e.preventDefault();var r=t(this),i="quc-button-submitting",s=r.find(".quc-button-check-captcha");s.prop("disabled",!0).addClass(i),n.one("invalid",function(){s.prop("disabled",!1).removeClass(i)}),n.set("mobile",t.trim(r.find(".quc-input-mobile").val())),n.set("captcha",t.trim(r.find(".quc-input-captcha").val())),n.checkPhrase()}),e.$el.find(".quc-link-go-back").on("click",function(t){t.preventDefault(),e.model.trigger("showCaptchaPanel")}),e.$el.find(".quc-form-token").submit(function(e){e.preventDefault();var r=t(this),i="quc-button-submitting",s=r.find(".quc-button-identify");s.prop("disabled",!0).addClass(i),n.one("invalid",function(){s.prop("disabled",!1).removeClass(i)}),n.set("smstoken",t.trim(r.find(".quc-input-sms-token").val())),n.submit()})},initSmsToken:function(){var t,n=this,r="quc-button-disabled",i=e.utils.getTimer("bind_mobile");i.on("timer_start",function(e,n){t.addClass(r),t.html(n+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),i.on("timer_tick",function(e,n){t.html(n+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),i.on("timer_stop",function(){t.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),t.removeClass(r)});var s=function(e){e.preventDefault(),t.hasClass(r)||(t.html("\u53d1\u9001\u4e2d..."),t.addClass(r),n.model.sendSmsToken().done(function(){i.start(),n.model.trigger("sendSmsTokenSuccess")}).fail(function(e){t.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),t.removeClass(r),n.model.trigger("invalid",e)}))};n.model.on("timerStop",function(){i.stop()}),n.model.on("afterCheckCaptcha",function(e,o){t=n.$el.find(".quc-get-sms-token"),t.off("click",s).on("click",s),n.$el.find(".quc-sec-mobile").html(o.mobile),i.isRunning()&&i.resume(),t.html("\u53d1\u9001\u4e2d..."),t.addClass(r),i.stop(),i.start()})},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n&&n.wrapper),e.model.trigger("showCaptchaPanel")}).on("hide",function(){e.model.trigger("beforeHide",e.$el[0]),e.panel&&e.panel.hide(),e.model.trigger("afterHide",e.$el[0])}).on("sendSmsTokenSuccess",function(){var t=e.$el.find(".quc-tip");t.removeClass("quc-tip-error").addClass("quc-tip-success").html("\u53d1\u9001\u6210\u529f").show()}).on("invalid",function(t,n){var r=e.$el.find(".quc-tip");r.removeClass("quc-tip-success").addClass("quc-tip-error").html(n.errmsg)}).on("clean",function(){var t=e.$el.find(".quc-tip");t.html("")}).on("showSuccessPanel",function(){var t=e.$el.find(".quc-mod-authentication-token"),n=e.$el.find(".quc-mod-authentication-success");t.hide(),n.show(),n.find(".quc-button-ensure").on("click",function(t){var n=e.model.get("secMobile");t.preventDefault(),e.model.trigger("hide").trigger("success").resolve(n)})}).on("showSmsTokenPanel",function(){var t=e.$el.find(".quc-mod-authentication-captcha"),n=e.$el.find(".quc-mod-authentication-token"),r="quc-button-submitting";t.hide(),n.show(),n.find(".quc-input-sms-token").val("").focus(),e.$el.find(".quc-button-check-token").prop("disabled",!1).removeClass(r),e.model.trigger("clean"),e.model.trigger("sendSmsTokenSuccess")}).on("showCaptchaPanel",function(){var t=e.$el.find(".quc-mod-authentication-captcha"),n=e.$el.find(".quc-mod-authentication-token"),r=e.$el.find(".quc-mod-authentication-success"),i="quc-button-submitting";t.show(),n.hide(),r.hide(),t.find(".quc-input-mobile").val(""),t.find(".quc-input-captcha").val(""),t.find(".quc-captcha-change")
.trigger("click"),e.$el.find(".quc-button-check-captcha").prop("disabled",!1).removeClass(i),e.model.trigger("clean")}).on("reset",function(){var t="quc-button-submitting";e.$el.find(".quc-button-identify").prop("disabled",!1).removeClass(t),e.$el.find(".quc-input-sms-token").val(""),e.model.trigger("clean"),e.model.trigger("timerStop")})},show:function(n){var r=this;if(n)r.model.trigger("beforeShow",r.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(r.$el);else{r.panel&&r.reset();var i=r.panel=new e.utils.Panel;i.setTitle(e.getConfig("authenticate.panelTitle","\u5b9e\u540d\u8ba4\u8bc1")),i.setContent(this.$el),r.model.trigger("beforeShow",r.$el[0]),i.show(),t(i).on("close",e.getConfig("authenticate.panelCloseHandler",t.noop))}r.model.trigger("afterShow",this.$el[0])}};e.ui.authenticate={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n=e.getLogic({name:"authenticate",validate:function(t,n){var r,i=e.validate;switch(t.toLowerCase()){case"mobile":r=i.checkMobile(n);break;case"captcha":r=i.checkCaptcha(n);break;case"smstoken":r=i.checkSmsToken(n)}return r},run:function(t){var n=this;n.init(),n.trigger("showLoading"),e.getUserInfo(!1).then(function(t){return n.set("crumb",t.crumb),e.sync.getAuthenticationStatus(t.crumb)}).always(function(){n.trigger("hideLoading")}).done(function(e){e.details&&e.details.isNeedAuthen?(n.setCaptchaUrl(e.details.captchaUrl),n.trigger("show",{wrapper:t})):n.trigger("success").resolve(e.details.mobile)})},checkPhrase:function(){var n=this,r=!1,i={mobile:n.get("mobile"),captcha:n.get("captcha")},s=n.get("crumb");this.trigger("beforeCheckCaptcha"),t.each(t.extend({},i),function(e,t){var i=n.validate(e,t);return r=r||i,i?(n.trigger("invalid",i),!1):void 0}),!r&&e.sync.submitAuthenMobile(i.mobile,i.captcha,s).done(function(e){var t=e.details&&e.details.mobile,r=e.details&&e.details.vt;n.set("token",r),n.trigger("afterCheckCaptcha",{mobile:t,vt:r}),n.trigger("showSmsTokenPanel")}).fail(function(e){e.fromServer=!0;var t=e.errdetail&&e.errdetail.captchaUrl;t&&n.setCaptchaUrl(t),n.trigger("invalid",e)})},submit:function(){var t=this,n=t.get("token"),r=t.get("smstoken"),i=t.get("crumb"),s=t.validate("smstoken",r),o=e.getConfig("authenticate.hideSuccessPanel",!1);this.trigger("beforeSubmit"),s&&t.trigger("invalid",s),!s&&e.sync.fillAuthenInfo(n,r,i).done(function(e){t.set("secMobile",e.details.mobile),t.trigger("reset"),o?t.trigger("hide").trigger("success").resolve(e.details.mobile):t.trigger("showSuccessPanel")}).fail(function(e){t.trigger("invalid",e)})},sendSmsToken:function(){var n=this.get("mobile"),r=this.get("token"),i=this.get("crumb"),s=this.validate("mobile",n);return s?t.Deferred().reject(s).promise():e.sync.authSendSmsToken(i,r)}});e.authenticate=function(e,r){!e||1==e.nodeType||e instanceof t||(r=e,e=void 0),n.setCallback(r).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-set-nickname"><form class="quc-form"><p class="quc-input-wrapper quc-input-long"><span class="quc-input-bg"><input type="text" name="nickname" class="quc-input quc-input-nickname" maxlength="14" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u6635\u79f0\uff1a2-14\u4e2a\u5b57\u7b26,\u652f\u6301\u4e2d\u82f1\u6587"/></span><input type="submit" value="\u4fdd\u5b58" class="quc-submit quc-button quc-button-save"/></p><p class="quc-tip"></p><div class="quc-alternative-wrapper"><p class="quc-tip-error">\u6635\u79f0\u5df2\u7ecf\u88ab\u5360\u7528\uff0c\u6211\u4eec\u4e3a\u60a8\u63a8\u8350\u4ee5\u4e0b\u6635\u79f0\uff1a</p><div class="quc-alternatives"></div></div></form></div> ',r='<a href="#" class="quc-link"></a>',i={init:function(e){this.model=e,this.$el=t(n),this.initModelEvent(),this.initElementEvent()},reset:function(){this.$el.remove(),this.$el=t(n),this.model.reset(),this.initElementEvent()},initElementEvent:function(){var e=this;e.$el.find(".quc-input").focus(function(){t(this).parent().removeClass("quc-input-bg-incorrect").addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}),e.$el.find(".quc-form").submit(function(n){var r=t(this),i=r.find(".quc-submit"),s="quc-button-saving",o=t.trim(r.find(".quc-input-nickname").val());n.preventDefault(),i.prop("disabled",!0).addClass(s),e.model.one("invalid",function(){i.prop("disabled",!1).removeClass(s)}),e.model.set("nickname",o),e.model.submit()})},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n&&n.wrapper)}).on("hide",function(){e.hide()}).on("invalid",function(t,n){e.showErrorTip(n)})},setNickname:function(e){this.$el.find(".quc-input-nickname").val(e).focus()},showErrorTip:function(t){var n=this.$el.find(".quc-input-nickname");if(e.utils.isSameError(t,e.ERROR.NICKNAME_DUPLICATE)&&this.model.get("alternatives",[]).length>0)this.showAlternatives();else{var r=this.$el.find(".quc-tip");this.$el.find(".quc-input-bg").addClass("quc-input-bg-incorrect"),r.addClass("quc-tip-error").html(t.errmsg).show(),n.one("focus",function(){r.html("")})}n.parent().addClass("quc-input-bg-incorrect")},showAlternatives:function(){var e,n=this,i=this.model.get("alternatives",[]),s=this.$el.find(".quc-tip");if(!(i.length<=0)){var o=this.$el.find(".quc-alternatives"),u=function(e){return function(t){t.preventDefault(),n.setNickname(e)}};o.empty();for(var a=0,f=i.length;f>a;a++)e=i[a],t(r).html(e).on("click",u(e)).appendTo(o);o.parent().show(),s.hide(),this.$el.find(".quc-input-nickname").on("change",function(e){var n=t(this);-1==t.inArray(n.val(),i)&&(o.parent().hide(),s.show(),n.off(e))})}},show:function(n){var r=this.model.get("nickname");if(n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{this.panel&&this.reset();var i=this.panel=new e.utils.Panel;i.setTitle(e.getConfig("setNickname.panelTitle",r?"\u4fee\u6539\u6635\u79f0":"\u8bbe\u7f6e\u6635\u79f0")),i.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),i.show(),t(i).on("close",e.getConfig("setNickname.panelCloseHandler",t.noop))}this.$el.find(".quc-input-nickname").val(r),this.model.trigger("aftershow",this.$el[0])},hide:function(){this.model.trigger("beforehide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterhide",this.$el[0])}};e.ui.setNickname={init:function(){i.init.apply(i,arguments)}}}(QHPass),function(e){"use strict";var t,n=e.$,r=e.getLogic({name:"setNickname",validate:function(t){return t=t||this.get("nickname"),e.validate.checkNickname(t)},run:function(n){var r=this;r.init().trigger("showLoading"),e.getUserInfo().always(function(){r.trigger("hideLoading")}).done(function(e){e.nickname&&(r.set("nickname",e.nickname),t=e.nickname),r.trigger("show",{wrapper:n})})},submit:function(){var r=this,i=n.Deferred(),s=r.validate();return this.trigger("beforeSubmit"),s?i.reject(s):i.resolve(),i.then(function(){return e.getUserInfo()}).then(function(t){return e.sync.setNickname(t.crumb,r.get("nickname"))}).done(function(){var e={oldValue:t,newValue:r.get("nickname")};t=e.newValue,r.trigger("hide").trigger("success").resolve(e)}).fail(function(t){e.utils.isSameError(e.ERROR.NICKNAME_DUPLICATE,t)&&r.set("alternatives",t.userinfo),r.trigger("invalid",t)})}});e.setNickname=function(e,t){!e||1==e.nodeType||e instanceof n||(t=e,e=void 0),r.setCallback(t).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-set-email"><p class="quc-tip">&nbsp;</p><form class="quc-form"><p class="quc-field quc-input-long"><label class="quc-label">\u767b\u5f55\u90ae\u7bb1</label><span class="quc-input-bg"><input type="text" name="email" class="quc-input quc-input-email" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u767b\u5f55\u90ae\u7bb1" autocomplete="off"></span></p><p class="quc-field"><input class="quc-button quc-button-big quc-button-submit" value="\u63d0\u4ea4" type="submit"/></p><div class="quc-help"><p>\u70b9\u51fb\u201c\u63d0\u4ea4\u201d\u540e\uff0c\u6211\u4eec\u4f1a\u5411\u60a8\u7684\u90ae\u7bb1\u53d1\u9001\u4e00\u5c01\u9a8c\u8bc1\u90ae\u4ef6\uff0c\u8bf7\u6309\u7167\u90ae\u4ef6\u4e2d\u7684\u63d0\u793a\u5b8c\u6210\u64cd\u4f5c\u3002</p></div></form></div>',r={init:function(r){this.model=r,this.$el=t(n),this._$el=this.$el,this.initModelEvent(),this.initElementEvent(),e.utils.emailHint(this.$el.find(".quc-input-email"))},reset:function(){this.$el=this._$el,this.$el.find(".quc-button-submit").prop("disabled",!1).removeClass("quc-button-submitting"),this.$el.find(".quc-tip").removeClass("quc-tip-error quc-tip-success").html(""),this.$el.find(".quc-input").val("").parent().removeClass("quc-input-bg-focus")},initElementEvent:function(){var e=this;this.$el.find(".quc-input").focus(function(){t(this).parent().removeClass("quc-input-bg-incorrect").addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}).filter(".quc-input-email").blur(function(){var n=t(this).val();if(n.length>0){var r=e.model.validate(n);r&&e.showTip(r.errmsg,r.errno)}}),e.$el.find(".quc-form").submit(function(t){t.preventDefault(),e.submit()})},initModelEvent:function(){var t=this;this.model.on("show",function(e,n){t.show(n&&n.wrapper)}).on("hide",function(){t.hide()}).on("invalid",function(n,r){e.utils.isSameError(r,e.ERROR.IDENTIFY_EXPIRE)||t.showTip(r)}).on("reset",function(){t.$el.find(".quc-button-submit").prop("disabled",!1).removeClass("quc-button-submitting")})},showTip:function(e,t){var n=this,r=this.$el.find(".quc-tip");e.errno&&(t=e.errno,e=e.errmsg),t?(r.addClass("quc-tip-error").removeClass("quc-tip-success"),setTimeout(function(){n.$el.one("focus",".quc-input",function(){r.html("")})},30)):r.addClass("quc-tip-success").removeClass("quc-tip-error"),r.html(e)},submit:function(){var e=this,t="quc-button-submitting",n=e.$el.find(".quc-button-submit");n.prop("disabled",!0).addClass(t),e.model.one("invalid",function(){n.prop("disabled",!1).removeClass(t)}),e.model.set("email",e.$el.find(".quc-input-email").val()),e.model.submit(),e.model.one("next",function(){n.prop("disabled",!1).removeClass(t)})},show:function(n){if(this.reset(),n)this.model.trigger("beforeshow",this.$el[0]),n.addClass("quc-wrapper quc-page").empty().append(this.$el);else{var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("setEmail.panelTitle","\u8bbe\u7f6e\u767b\u5f55\u90ae\u7bb1")),r.setContent(this.$el),this.model.trigger("beforeshow",this.$el[0]),r.show(),t(r).on("close",e.getConfig("setEmail.panelCloseHandler",t.noop))}this.model.trigger("aftershow",this.$el[0])},hide:function(){this.model.trigger("beforehide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterhide",this.$el[0])}};e.ui.setEmail={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n=e.getLogic({name:"setEmail",validate:function(t){return t=t||this.get("email"),e.validate.checkEmail(t)},run:function(t){var n=this;n.init().trigger("showLoading"),e.identify(n).then(function(){return e.activeEmail.prepare(n)}).always(function(){n.trigger("hideLoading")}).done(function(){n.trigger("show",{wrapper:t})})},submit:function(){var n=this,r=t.Deferred(),i=n.validate();return this.trigger("beforeSubmit"),i?r.reject(i):r.resolve(),r.then(function(){return e.getUserInfo()}).then(function(t){return e.sync.setEmail(t.crumb,n.get("email"))}).then(function(r){n.trigger("next");var i=t.Deferred();return e.activeEmail(r,function(){i.resolve()}),i.promise()}).then(function(e){n.trigger("hide").trigger("success").resolve(e)},function(e){n.trigger("invalid",e)})}});e.setEmail=function(e,r){!e||1==e.nodeType||e instanceof t||(r=e,e=void 0),n.setCallback(r).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-set-sec-email"><p class="quc-tip">&nbsp;</p><form class="quc-form"><p class="quc-field quc-input-long"><label class="quc-label">\u5bc6\u4fdd\u90ae\u7bb1</label><span class="quc-input-bg"><input type="text" name="secEmail" class="quc-input quc-input-sec-email" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u4fdd\u90ae\u7bb1" autocomplete="off"></span></p><p class="quc-field"><input class="quc-button quc-button-big quc-button-submit" value="\u63d0\u4ea4" type="submit"/></p></form></div>',r={init:function(r){this.model=r,this.$el=t(n),this._$el=this.$el,this.initModelEvent(),this.initElementEvent(),e.utils.emailHint(this.$el.find(".quc-input-sec-email"))},reset:function(){this.$el=this._$el,this.$el.find(".quc-button-submit").prop("disabled",!1).removeClass("quc-button-submitting"),this.$el.find(".quc-tip").removeClass("quc-tip-error quc-tip-success").html(""),this.$el.find(".quc-input").val("").parent().removeClass("quc-input-bg-focus")},initElementEvent:function(){var e=this;e.$el.find(".quc-input").focus(function(){t(this).parent().addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}).filter(".quc-input-sec-email").blur(function(){var n=t(this).val();if(n.length>0){var r=e.model.validate(n);r&&e.showTip(r.errmsg,r.errno)}}),e.$el.find(".quc-form").submit(function(t){t.preventDefault(),e.submit()})},initModelEvent:function(){var t=this;t.model.on("show",function(e,n){t.show(n&&n.wrapper)}).on("hide",function(){t.hide()}).on("invalid",function(n,r){e.utils.isSameError(r,e.ERROR.IDENTIFY_EXPIRE)||t.showTip(r)}).on("reset",function(){t.$el.find(".quc-button-submit").prop("disabled",!1).removeClass("quc-button-submitting")})},showTip:function(e,t){var n=this,r=this.$el.find(".quc-tip");e.errno&&(t=e.errno,e=e.errmsg),t?(r.addClass("quc-tip-error").removeClass("quc-tip-success"),setTimeout(function(){n.$el.one("focus",".quc-input",function(){r.html("")})},30)):r.addClass("quc-tip-success").removeClass("quc-tip-error"),r.html(e)},submit:function(){var e=this,t="quc-button-submitting",n=e.$el.find(".quc-button-submit");n.prop("disable",!0).addClass(t),e.model.one("invalid",function(){n.prop("disable",!1).removeClass(t)}),e.model.set("secemail",e.$el.find(".quc-input-sec-email").val()),e.model.submit(),e.model.one("next",function(){n.prop("disabled",!1).removeClass(t)})},show:function(n){if(this.reset(),n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("setSecEmail.panelTitle","\u8bbe\u7f6e\u5bc6\u4fdd\u90ae\u7bb1")),r.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),r.show(),t(r).on("close",e.getConfig("setSecEmail.panelCloseHandler",t.noop))}this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterHide",this.$el[0])}};e.ui.setSecEmail={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n=e.getLogic({name:"setSecEmail",validate:function(t){return t=t||this.get("secemail"),e.validate.checkEmail(t)},run:function(t){var n=this;n.init().trigger("showLoading"),e.identify(n).then(function(){return e.activeEmail.prepare(n)}).always(function(){n.trigger("hideLoading")}).done(function(){n.trigger("show",{wrapper:t})})},submit:function(){var n=this,r=t.Deferred(),i=n.validate();return this.trigger("beforeSubmit"),i?r.reject(i):r.resolve(),r.then(function(){return e.getUserInfo()}).then(function(t){return e.sync.setSecEmail(t.crumb,n.get("secemail"))}).then(function(r){n.trigger("next");var i=t.Deferred();return e.activeEmail(r,function(){i.resolve()}),i.promise()}).then(function(e){n.trigger("hide").trigger("success").resolve(e)},function(e){n.trigger("invalid",e)})}});e.setSecEmail=function(e,r){!e||1==e.nodeType||e instanceof t||(r=e,e=void 0),n.setCallback(r).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-bind-mobile"><div class="quc-tip-wrapper quc-global-error"><p class="quc-tip quc-tip-error"></p></div><form method="post" class="quc-form"><div class="quc-field quc-field-mobile quc-input-middle quc-clearfix"><div class="quc-input-bg"><input class="quc-input quc-input-mobile" type="tel" placeholder="\u8bf7\u8f93\u5165\u65b0\u624b\u673a\u53f7\u7801" name="account" data-name="mobile" /><div class="quc-state-wrapper"><div class="quc-area-arrow"></div><span class="quc-activeState">+86</span></div><ul class="quc-mobile-Statelist"></ul></div><i class="quc-tip-icon"></i><span class="quc-tip" data-default-tip=""></span></div><p class="quc-field quc-field-sms-token quc-input-middle"><span class="quc-input-bg"><input class="quc-input quc-input-sms-token" type="text" placeholder="\u77ed\u4fe1\u9a8c\u8bc1\u7801" name="smscode" data-name="smsToken" maxlength="6" /></span><a href="#" class="quc-button quc-button-blue quc-get-sms-token">\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801</a><i class="quc-tip-icon"></i><a class="quc-link quc-link-mobile-tip" href="http://i.360.cn/help/smscode" target="_blank" tabindex="99">\u6821\u9a8c\u7801\u5e38\u89c1\u95ee\u9898</a><span class="quc-tip" data-default-tip=""></span></p><p><input class="quc-button quc-button-big quc-button-submit" type="submit" value="\u63d0\u4ea4" /></p></form></div>',r={init:function(e){this.model=e,this.$el=t(n),this.initModelEvent(),this.initMobileStates(),this.initElementEvent(),this.initSmsToken(),this.initErrorTip(),this.initTips()},reset:function(){this.$el&&this.$el.remove(),this.$el=t(n),this.initTips(),this.initElementEvent()},initTips:function(){this.$el.find(".quc-field .quc-tip").attr("data-default-tip",function(){return t(this).html()})},iePlaceholder:function(){QHPass.utils.initPlaceholder("input[name=account],input[name=smscode]")},initElementEvent:function(){var e=this,n=e.model;e.$el.find(".quc-input").focus(function(){t(this).parent().removeClass("quc-input-bg-incorrect").addClass("quc-input-bg-focus")}).blur(function(){var e=t(this);e.parent().removeClass("quc-input-bg-focus");var r=e.attr("data-name")||e.attr("name"),i=e.val(),s=t(".quc-activeState").html(),o=e.data("regexp");0!=i.length&&(i="mobile"==r?{mobileNumber:i,regExp:o,areaCode:s}:i,n.validate(r,i,!0).done(function(){var t=e.parent(".quc-field").find(".quc-tip-icon");t.removeClass("quc-tip-icon-correct").addClass("quc-tip-icon-correct"),e.one("focus",function(){t.removeClass("quc-tip-icon-correct")})}).fail(function(t){t.field=e.parents(".quc-field"),n.trigger("invalid",t)}))}),e.$el.find(".quc-form").submit(function(e){e.preventDefault();var r,i=t(this),s="quc-button-submitting",o=i.find(".quc-submit"),u=i.find(".quc-input-mobile");r=i.find(".quc-activeState").html(),o.prop("disabled",!0).addClass(s),n.one("invalid",function(){o.prop("disabled",!1).removeClass(s)});var a=u.val(),f=u.data("regexp");n.set("mobile",{mobileNumber:a,regExp:f,areaCode:r}),n.set("smsToken",i.find(".quc-input-sms-token").val()),n.submit()})},initSmsToken:function(){var n,r,i=this,s="quc-button-disabled",o=e.utils.getTimer("bind_mobile");o.on("timer_start",function(e,t){r.addClass(s),r.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),o.on("timer_tick",function(e,t){r.html(t+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),o.on("timer_stop",function(){r.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),r.removeClass(s)});var u=function(e){e.preventDefault();var u=n.val(),a=t(".quc-activeState").html(),l=n.data("regexp");i.model.set("mobile",{mobileNumber:u,regExp:l,areaCode:a}),r.hasClass(s)||(r.html("\u53d1\u9001\u4e2d..."),r.addClass(s),i.model.sendSmsToken().done(function(){var e=i.$el.find(".quc-field-mobile"),t=e.find(".quc-tip");r.siblings(".quc-tip-icon"),t.removeClass("quc-tip-error").addClass("quc-tip-success").html("\u53d1\u9001\u6210\u529f").show(),e.find(".quc-input").on("change",function(){t.removeClass("quc-tip-success").html(t.attr("data-default-tip")),e.find(".quc-tip-icon").removeClass("quc-tip-icon-correct")}).parent().removeClass("quc-input-bg-incorrect"),e.find(".quc-tip-icon").removeClass("quc-tip-icon-incorrect").addClass("quc-tip-icon-correct"),o.start()}).fail(function(e){r.html("\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801"),r.removeClass(s),e.field=i.$el.find(".quc-field-mobile"),i.model.trigger("invalid",e)}))};i.model.on("show",function(){n=i.$el.find(".quc-input-mobile"),r=i.$el.find(".quc-get-sms-token"),r.off("click",u).on("click",u),o.isRunning()&&o.resume()})},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n&&n.wrapper)}).on("hide",function(){e.panel&&e.panel.hide()})},initMobileStates:function(){var e=this,n=e.$el,r="";e.model.prepareMobileState().then(function(i){for(var s=i.data,o=s.length,u=0;o>u;u++)r+='<li class="quc-list-item" data-regexp='+s[u].pattern+'><span class="quc-left-tip">'+s[u].zone+'</span><span class="quc-right-tip">'+s[u].state+"</span></li>";n.find(".quc-mobile-Statelist").append(r),e.$el.on("mouseenter",".quc-list-item",function(){t(this).css({backgroundColor:"#2994fd",color:"#ffffff"})}).on("mouseleave",".quc-list-item",function(){t(this).css({backgroundColor:"#ffffff",color:"#808080"})}),t(document).on("click",function(e){var n=t(e.target);if(n.hasClass("quc-list-item")||n.hasClass("quc-left-tip")||n.hasClass("quc-right-tip")){var r=n.hasClass("quc-list-item")?n:n.closest("li"),i=r.find(".quc-left-tip").html(),s=r.data("regexp");t(".quc-activeState").html(i),t(".quc-activeState").parent().siblings("input").data("regexp",s)}n.hasClass("quc-activeState")||n.hasClass("quc-area-arrow")?t(".quc-mobile-Statelist").show():t(".quc-mobile-Statelist").hide()})},function(t){e.model.trigger("invalid",t)})},initErrorTip:function(){var t=this;t.model.on("invalid",function(n,r){if(!e.utils.isSameError(r,e.ERROR.IDENTIFY_EXPIRE)){var i=r.field||t.getErrorField(r.errno),s=i.find(".quc-input-bg"),o=i.find(".quc-tip"),u=i.find(".quc-tip-icon");o.removeClass("quc-tip-success").addClass("quc-tip-error").html(r.errmsg).show(),u.addClass("quc-tip-icon-incorrect"),s.addClass("quc-input-bg-incorrect"),i.find(".quc-input").one("focus",function(){o.removeClass("quc-tip-error").html(o.attr("data-default-tip")),u.removeClass("quc-tip-icon-incorrect"),s.removeClass("quc-input-bg-incorrect")})}})},getErrorField:function(t){var n=e.utils.getErrorType(t);return this.$el.find("other"!=n?".quc-field-"+n:".quc-global-error")},show:function(n){var r=this;if(n)r.model.trigger("beforeShow",r.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(r.$el);else{r.panel&&r.reset();var i=r.panel=new e.utils.Panel;i.setTitle(e.getConfig("bindMobile.panelTitle","\u7ed1\u5b9a\u624b\u673a\u53f7")),i.setContent(this.$el),r.model.trigger("beforeShow",r.$el[0]),i.show(),t(i).on("close",e.getConfig("bindMobile.panelCloseHandler",t.noop))}r.model.trigger("afterShow",this.$el[0])}};e.ui.bindMobile={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n={},r=e.getLogic({name:"bindMobile",validate:function(r,i,s){var o,u=e.validate;switch(("boolean"==typeof i||void 0===i)&&(i=this.get(r)),r.toLowerCase()){case"mobile":o=u.checkMobile(i,!0);break;case"smstoken":o=u.checkSmsToken(i)}if(s){var f,l=e.sync;if(o)f=t.Deferred(),f.reject(o);else if("mobile"==r){var h=i.mobileNumber,p=i.areaCode,d=n[h];if(d)return d;f=l.checkMobileNumberExist(h,p),n[h]=f.promise()}else f=t.Deferred(),f.resolve();return f.promise()}return o},run:function(t){var n=this;n.init(),n.trigger("showLoading"),e.identify(n).always(function(){n.trigger("hideLoading")}).done(function(){n.trigger("show",{wrapper:t})})},prepareMobileState:function(){return e.sync.getMobileState()},submit:function(){var n=this,r=t.Deferred();this.trigger("beforeSubmit");var i=n.validate("mobile")||n.validate("smsToken");return i?r.reject(i):r.resolve(),r.then(function(){return e.getUserInfo()}).then(function(t){return e.sync.bindMobile(t.crumb,n.get("mobile"),n.get("smsToken"))}).done(function(){n.trigger("hide").trigger("success").resolve()}).fail(function(e){n.trigger("invalid",e)})},sendSmsToken:function(){var n=this,r=n.validate("mobile");return r?t.Deferred().reject(r).promise():e.getUserInfo().then(function(t){return e.sync.sendSmsToken(t.crumb,!1,n.get("mobile"))})}});e.bindMobile=function(e,n){!e||1==e.nodeType||e instanceof t||(n=e,e=void 0),r.setCallback(n).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-fill-profile"><div class="quc-tip-wrapper quc-global-error"><p class="quc-tip quc-tip-error"></p></div><form class="quc-form" method="post" action="https://i.360.cn/signUp/dosignUpAccount"><p class="quc-field quc-field-username quc-input-long"><label class="quc-label">\u7528\u6237\u540d</label><span class="quc-input-bg"><input type="text" name="userName" data-name="username" maxlength="14"  class="quc-input quc-input-username" /></span><i class="quc-tip-icon"></i><span class="quc-tip">2-14\u4e2a\u5b57\u7b26\uff1a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e2d\u6587</span></p><p class="quc-field quc-field-password quc-input-long"><label class="quc-label">\u5bc6\u7801</label><span class="quc-input-bg"><input type="password" name="password" class="quc-input quc-input-password" maxlength="20" /></span><i class="quc-tip-icon"></i><span class="quc-tip">6-20\u4e2a\u5b57\u7b26(\u533a\u5206\u5927\u5c0f\u5199)</span></p><p class="quc-field quc-field-password-again quc-input-long"><label class="quc-label">\u786e\u8ba4\u5bc6\u7801</label><span class="quc-input-bg"><input type="password" name="passwordAgain" class="quc-input quc-input-password-again" maxlength="20" /></span><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801</span></p><p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="captcha" maxlength="7" autocomplete="off" /></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /><a class="quc-link quc-link-captcha-change quc-captcha-change" href="#">\u6362\u4e00\u5f20</a><i class="quc-tip-icon"></i><span class="quc-tip">\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</span></p><p class="quc-field quc-field-submit"><input class="quc-button quc-button-submit" type="submit" value="\u7acb\u5373\u6ce8\u518c" /></p></form></div>',r={init:function(e){this.model=e,this.initModelEvent(),this.initCaptcha(),this.initErrorTip()},initCaptcha:function(){var e,n=this,r=function(){n.model.getCaptchaUrl().then(function(n){e.find(".quc-captcha-img").attr("src",n),e.find(".quc-input-captcha").val(""),e.find(".quc-tip").removeClass("quc-tip-error").html(function(){return t(this).attr("data-default-tip")}),e.find(".quc-tip-icon").removeClass("quc-tip-icon-incorrect")})},i=function(){r(),e.find(".quc-captcha-change").on("mousedown",function(e){e.preventDefault()}).on("click",function(t){t.preventDefault(),r(),e.find(".quc-input-captcha").focus()})};this.model.on("show",function(){e=n.$el.find(".quc-field-captcha"),i()}),this.model.on("invalid",function(e,t){t.fromServer&&r()})},setElement:function(){var e=this;e.$el&&e.$el.remove(),e.$el=t(n),e.$el.find(".quc-form").submit(function(t){t.preventDefault(),e.submit()}),e.model.isShowPasswordAgain()||e.$el.find(".quc-field-password-again").remove(),e.$el.find(":text,:password").focus(function(){t(this).parent().addClass("quc-input-bg-focus")}).blur(function(){var n=t(this),r=n.parents(".quc-field");n.parent().removeClass("quc-input-bg-focus"),e.validate(r),r.hasClass("quc-field-password")&&e.validate(r.siblings(".quc-field-password-again")),r.hasClass("quc-field-password-again")&&e.validate(r.siblings(".quc-field-password"))}),this.$el.find(".quc-field .quc-tip").attr("data-default-tip",function(){return t(this).html()})},validate:function(e){var t=this,n=e.find(".quc-input"),r=n.attr("data-name")||n.attr("name"),i=n.val();0!=i.length&&(n.trigger("quc-validate"),t.model.validate(r,i,!0).done(function(){var t=e.find(".quc-tip-icon");t.removeClass("quc-tip-icon-incorrect").addClass("quc-tip-icon-correct"),n.one("focus",function(){t.removeClass("quc-tip-icon-correct")})}).fail(function(n){n.field=e,t.model.trigger("invalid",n)}))},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n&&n.wrapper)}).on("hide",function(){e.hide()})},initErrorTip:function(){var e=this;e.model.on("invalid",function(t,n){var r=n.field||e.getErrorField(n.errno),i=r.find(".quc-input-bg"),s=r.find(".quc-tip"),o=r.find(".quc-tip-icon");s.removeClass("quc-tip-success").addClass("quc-tip-error").html(n.errmsg).show(),o.removeClass("quc-tip-icon-incorrect").addClass("quc-tip-icon-incorrect"),i.addClass("quc-input-bg-incorrect"),r.find(".quc-input").one("focus quc-validate",function(){s.removeClass("quc-tip-error").html(s.attr("data-default-tip")),o.removeClass("quc-tip-icon-incorrect"),i.removeClass("quc-input-bg-incorrect")})})},getErrorField:function(t){var n=e.utils.getErrorType(t);return this.$el.find("other"!=n?".quc-field-"+n:".quc-global-error")},submit:function(){var e=this,n=this.$el.find(".quc-button-submit");n.prop("disabled",!0).addClass("quc-button-submitting"),e.model.one("invalid",function(){n.prop("disabled",!1).removeClass("quc-button-submitting")}),e.$el.find(".quc-input").each(function(n,r){var i=t(r),s=i.attr("data-name")||i.attr("name"),o=i.val();e.model.set(s,o)}),e.model.submit()},show:function(n){if(this.setElement(),n)this.model.trigger("beforeShow",this.$el[0]),t(n).addClass("quc-wrapper quc-page").empty().append(this.$el);else{var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("fillProfile.panelTitle","\u5b8c\u5584\u5e10\u53f7\u8d44\u6599")),r.setContent(this.$el),this.model.trigger("beforeShow",this.$el[0]),r.show(),t(r).on("close",e.getConfig("fillProfile.panelCloseHandler",t.noop))}this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel&&this.panel.hide(),this.model.trigger("afterHide",this.$el[0])}};e.ui.fillProfile={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n={},r=e.getLogic({name:"fillProfile",validate:function(r,i,s){var o,u=e.validate;switch(("boolean"==typeof i||void 0===i)&&(i=this.get(r)),r.toLowerCase()){case"username":o=u.checkUsername(i);break;case"password":this.set("password",i),o=u.checkPassword(i,!0);break;case"passwordagain":o=u.checkPasswordConfirm(this.get("password"),i);break;case"captcha":o=u.checkCaptcha(i)}if(s){var f,l=e.sync;if(o)f=t.Deferred(),f.reject(o);else if("username"==r){var h=n[i];if(h)return h;f=l.checkUsernameExist(i),n[i]=f.promise()}else f=t.Deferred(),f.resolve();return f.promise()}return o},prepareCaptcha:function(){var n=this;return e.sync.getCaptchaUrl().then(function(e){n.setCaptchaUrl(e.captchaUrl)},function(){return t.Deferred().resolve().promise()})},run:function(e){var t=this;t.init().trigger("showLoading"),t.prepareCaptcha().done(function(){t.trigger("hideLoading").trigger("show",{wrapper:e})})},submit:function(){var n,r=this,i=["username","password","captcha"];this.trigger("beforeSubmit"),r.isShowPasswordAgain()&&i.push("passwordAgain"),t.each(i,function(e,t){var i=r.validate(t);i&&r.trigger("invalid",i),n=n||i}),!n&&e.getUserInfo().then(function(t){return e.sync.fillProfile(t.crumb,r.get("username"),r.get("password"),r.get("passwordAgain",void 0),r.get("captcha")).then(function(){r.trigger("hide").trigger("success").resolve(t)})}).fail(function(e){e.fromServer=!0;var t=e.errdetail&&e.errdetail.captchaUrl;t&&r.setCaptchaUrl(t),r.trigger("invalid",e)})},isShowPasswordAgain:function(){return!e.getConfig("fillProfile.hidePasswordAgain",!1)}});e.fillProfile=function(e,n){!e||1==e.nodeType||e instanceof t||(n=e,e=void 0),r.setCallback(n).run(e)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-identify"><form class="quc-form"><div class="quc-tip-wrapper"><p class="quc-tip">\u4e3a\u4e86\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\uff0c\u64cd\u4f5c\u524d\u8bf7\u60a8\u8fdb\u884c\u5b89\u5168\u9a8c\u8bc1</p></div><div class="quc-other-wrapper"><p class="quc-field quc-field-method quc-clearfix"><label class="quc-label">\u9a8c\u8bc1\u65b9\u5f0f</label><select class="quc-select quc-select-method" name="secMethod"></select><span class="quc-input quc-input-method"></span><a class="quc-method-tip quc-link" href="http://i.360.cn/complaint" target="_blank" tabindex="99">\u9a8c\u8bc1\u65b9\u5f0f\u90fd\u4e0d\u80fd\u7528\u4e86\uff1f</a></p><p class="quc-field quc-field-token quc-input-middle quc-clearfix"><label class="quc-label">\u6821\u9a8c\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-token" type="tel" name="token" maxlength="6" placeholder="\u8bf7\u8f93\u51656\u4f4d\u6821\u9a8c\u7801" /></span><a href="#" class="quc-button quc-button-blue quc-get-token">\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801</a><span class="quc-tip"></span><a class="quc-token-tip quc-link" href="#" target="_blank" tabindex="99"></a></p></div><div class="quc-password-wrapper"><p class="quc-field quc-field-password quc-input-long quc-clearfix"><label class="quc-label">\u767b\u5f55\u5bc6\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-password" type="password" name="password" maxlength="20" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u767b\u5f55\u5bc6\u7801" /></span><i class="quc-tip-icon"></i><a class="quc-token-tip quc-link" href="http://i.360.cn/findpwd/" target="_blank" tabindex="99">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></p><p class="quc-field quc-field-captcha quc-input-short"><label class="quc-label">\u9a8c\u8bc1\u7801</label><span class="quc-input-bg"><input class="quc-input quc-input-captcha" type="text" name="phrase" maxlength="7" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801" /></span><img class="quc-captcha-img quc-captcha-change" alt="\u9a8c\u8bc1\u7801" title="\u70b9\u51fb\u66f4\u6362" tabindex="99" /> <a class="quc-link quc-captcha-change-link quc-captcha-change" href="#">\u6362\u4e00\u5f20</a></p></div><p class="quc-field quc-field-submit"><input class="quc-button quc-button-submit" type="submit" value="\u63d0\u4ea4" /></p></form></div>'
,r={init:function(e){this.model=e,this.initModelEvent(),this.initMethods(),this.initToken(),this.initErrorTip()},selElement:function(){this.$el&&this.$el.remove(),this.$el=t(n),this.initElementEvent()},initToken:function(){var t,n=this,r=e.utils.getTimer("identify"),i="quc-button-disabled";r.on("timer_start",function(e,n){t.addClass(i),t.html(n+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),r.on("timer_tick",function(e,n){t.html(n+"\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6")}),r.on("timer_stop",function(){t.html("\u91cd\u65b0\u83b7\u53d6\u6821\u9a8c\u7801"),t.removeClass(i)});var s=function(e){e.preventDefault(),t.hasClass(i)||(t.html("\u53d1\u9001\u4e2d..."),t.addClass(i),n.model.sendToken().done(function(){r.start(),n.$el.find(".quc-tip-wrapper .quc-tip").removeClass("quc-tip-error").addClass("quc-tip-success").html("\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u67e5\u6536\uff01")}).fail(function(e){t.html("\u514d\u8d39\u83b7\u53d6\u6821\u9a8c\u7801"),t.removeClass(i),n.model.trigger("invalid",e)}))};n.model.on("show",function(){t=n.$el.find(".quc-get-token"),t.on("click",s),r.isRunning()&&r.resume()})},initElementEvent:function(){var e=this;this.$el.find(".quc-input").focus(function(){t(this).parent().addClass("quc-input-bg-focus")}).blur(function(){t(this).parent().removeClass("quc-input-bg-focus")}),this.$el.find(".quc-form").submit(function(t){t.preventDefault(),e.submit()}),this.$el.find(".quc-select-method").on("change",function(){var n=t(this).val();"secMobile"==n?e.$el.find(".quc-sec-help").children("a").attr("href","http://i.360.cn/findpwd/customerhelper#mobiledisabled"):e.$el.find(".quc-sec-help").children("a").attr("href","http://i.360.cn/findpwd/customerhelper#recieveemailcode")})},initMethods:function(){var e=this;this.model.on("show",function(){var n=e.$el.find(".quc-select-method"),r=!0,i=e.model.getMethods(),s=[];if(t.each(i,function(i,o){r&&(e.changeMethod(i,o.captchaUrl),r=!1),t("<option>").val(i).html(o.name+"("+o.value+")").appendTo(n),s.push(i)}),1==s.length){var o=i[s[0]];e.$el.find(".quc-input-method").html(o.name+"("+o.value+")"),n.parent().addClass("quc-method-single")}n.change(function(){e.changeMethod(n.val())}),r&&e.changeMethod("pwd")})},changeMethod:function(e,t){var n=this.$el.find(".quc-token-tip"),r=this.$el.find(".quc-field-captcha"),i=this,s=function(e){i.model.getCaptchaUrl("login").then(function(t){r.find(".quc-captcha-img").attr("src",t);var n=r.find(".quc-input-captcha").val("");e&&n.focus()})};"pwd"==e?(this.$el.find(".quc-other-wrapper").hide(),this.$el.find(".quc-password-wrapper").children().show(),t&&(this.model.setCaptchaUrl(t),s()),this.$el.find(".quc-captcha-change").click(function(e){e.preventDefault(),s()})):"secMobile"==e?n.attr("href","http://i.360.cn/findpwd/customerhelper#mobiledisabled").html("\u6536\u4e0d\u5230\u77ed\u4fe1\u6821\u9a8c\u7801\u600e\u4e48\u529e\uff1f"):n.attr("href","http://i.360.cn/findpwd/customerhelper#recieveemailcode").html("\u6536\u4e0d\u5230\u90ae\u4ef6\u6821\u9a8c\u7801\u600e\u4e48\u529e\uff1f"),this.model.set("method",e),this.model.on("invalid",function(e,t){t.fromServer&&s()})},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n)}).on("hide",function(){e.hide()})},submit:function(){var e=this,t="quc-button-submitting",n=e.$el.find(".quc-button-submit"),r=e.$el.find(".quc-input-token").val(),i=e.$el.find(".quc-input-password").val(),s=e.$el.find(".quc-input-captcha").val();n.prop("disabled",!0).addClass(t),e.model.one("invalid",function(){n.prop("disabled",!1).removeClass(t)}),e.model.set("token",r),e.model.set("password",i),e.model.set("captcha",s),e.model.submit()},initErrorTip:function(){var e=this;e.model.on("invalid",function(t,n){var r=e.$el.find(".quc-tip-wrapper .quc-tip");r.removeClass("quc-tip-success").addClass("quc-tip-error").html(n.errmsg),e.$el.find(".quc-input, .quc-select").one("focus",function(){r.html("")})})},show:function(n){if(this.$orgForm=t(n),this.selElement(),this.model.trigger("beforeShow",this.$el[0]),this.$orgForm.parents(".quc-panel").length>0)this.$orgForm.hide().before(this.$el);else{var r=this.panel=new e.utils.Panel;r.setTitle(e.getConfig("identify.panelTitle","\u9700\u8981\u6821\u9a8c\u60a8\u7684\u8eab\u4efd")).setContent(this.$el).show()}this.$orgForm.triggerHandler("QucDOMUpdated"),this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel?this.panel.hide():(this.$el.remove(),this.$orgForm.show()),this.$orgForm.triggerHandler("QucDOMUpdated"),this.model.trigger("afterHide",this.$el[0])}};e.ui.identify={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t,n=e.$,r={},i=e.getLogic({name:"identify",validate:function(t,n){var r,i=e.validate;switch(n=n||this.get(t),t.toLowerCase()){case"token":r=i.checkSmsToken(n);break;case"password":r=i.checkPassword(n),r&&(r=e.utils.isSameError(r,e.ERROR.PASSWORD_EMPTY)?r:e.ERROR.PASSWORD_WRONG);break;case"captcha":r=i.checkCaptcha(n)}return r},getMethods:function(){return r[t]},prepareMethods:function(t){return r[t]?n.Deferred().resolve().promise():e.getUserInfo().then(function(n){return e.sync.getIdentifyMethod(n.crumb,t)}).done(function(e){r[t]=e.ways})},sendToken:function(t){var n=this;return t=t||this.get("method"),e.getUserInfo().then(function(n){return"secMobile"==t?e.sync.sendSmsToken(n.crumb,!0):e.sync.sendEmailToken(n.crumb,t)}).fail(function(e){n.trigger("invalid",e)})},run:function(e,n){var r=this;r.init(),t=e,r.trigger("show",n)},submit:function(){var r=this,i=r.get("token"),s=r.get("method"),o=r.get("password"),u=r.get("captcha"),f=n.Deferred();this.trigger("beforeSubmit");var l="pwd"==s?r.validate("password")||r.validate("captcha"):r.validate("token");return l?f.reject(l):f.resolve(),f.then(function(){return e.getUserInfo()}).then(function(n){var r="pwd"==s?o:i;return e.sync.identify(n.crumb,t,s,r,u)}).done(function(){r.trigger("hide").trigger("success")}).fail(function(e){var t=e.errdetail&&e.errdetail.captchaUrl;t&&r.setCaptchaUrl(t),e.fromServer=!0,r.trigger("invalid",e)})}}),s={bindMobile:"bindMobile",setEmail:"setLoginEmail",setSecEmail:"setSecEmail"};e.identify=function(t){var n,r=s[t.name];return t.one("beforeShow",function(e,t){n=t,i.run(r,t)}),t.on("invalid",function(t,s){e.utils.isSameError(s,e.ERROR.IDENTIFY_EXPIRE)&&i.run(r,n)}),t.on("reset",function(){i.run(r,n)}),i.prepareMethods(r)}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-mod-active-email"><p class="quc-send-result">\u9a8c\u8bc1\u90ae\u4ef6\u5df2\u7ecf\u53d1\u9001\u5230\u60a8\u7684\u90ae\u7bb1:</p><p class="quc-email-address"><a href="#" class="quc-link quc-link-jump" target="_blank">\u53bb\u6fc0\u6d3b</a></p><p class="quc-tip">\u8bf7\u60a8\u572848\u5c0f\u65f6\u5185\u767b\u5f55\u90ae\u7bb1\u5b8c\u6210\u9a8c\u8bc1</p><p class="quc-button-wrapper"><a href="#" class="quc-button quc-button-blue quc-button-activated" target="_blank">\u5df2\u5b8c\u6210\u6fc0\u6d3b</a></p><div class="quc-resend"><p>\u6ca1\u6536\u5230\u90ae\u4ef6\u600e\u4e48\u529e\uff1f</p><p class="quc-modify-wrapper">&middot; \u90ae\u7bb1\u586b\u9519\u4e86\uff0c<a href="#" class="quc-link quc-link-modify">\u91cd\u65b0\u8bbe\u7f6e\u90ae\u7bb1</a></p><p>&middot; <a href="#" class="quc-link quc-link-resend">\u91cd\u65b0\u53d1\u9001</a>\u9a8c\u8bc1\u90ae\u4ef6&nbsp;<span class="quc-resend-result"></span></p><p>&middot; \u4f9d\u7136\u6536\u4e0d\u5230\u90ae\u4ef6\uff0c<a class="quc-link" href="http://i.360.cn/findpwd/customerhelper#recieveemailcode" target="_blank">\u67e5\u770b\u5e2e\u52a9</a></p></div></div>',r={init:function(e){this.model=e,this.initModelEvent()},initModelEvent:function(){var e=this;e.model.on("show",function(t,n){e.show(n)}).on("hide",function(){e.hide()}).on("resendSuccess",function(){e.$el.find(".quc-resend-result").removeClass("quc-resending quc-tip-error").html("\u53d1\u9001\u6210\u529f\uff01").show()}).on("resendFail",function(t,n){e.$el.find(".quc-resend-result").removeClass("quc-resending").addClass("quc-tip-error").html(n.errmsg).show()})},selElement:function(){var e=this;e.$el&&e.$el.remove(),e.$el=t(n);var r=this.model.getEmailInfo();r.site&&e.$el.find(".quc-link-jump").attr("href",r.site).show(),"signUp"==r.type&&e.$el.find(".quc-modify-wrapper").hide(),e.$el.find(".quc-email-address").prepend(r.email),e.$el.find(".quc-link-resend").click(function(t){t.preventDefault(),e.model.resend(),e.$el.find(".quc-resend-result").addClass("quc-resending").html("\u53d1\u9001\u4e2d...").show()}),e.$el.find(".quc-link-modify").click(function(t){t.preventDefault(),e.hide(),e.model.modify()}),e.$el.find(".quc-button-activated").click(function(n){n.preventDefault();var i=t(this);i.html("\u68c0\u67e5\u6fc0\u6d3b\u72b6\u6001...").addClass("quc-button-disabled"),e.model.checkActive().fail(function(){var t=r.site?'<a class="quc-link" href="'+r.site+'" target="_blank">\u767b\u5f55\u90ae\u7bb1</a>':"\u767b\u5f55\u90ae\u7bb1";e.$el.find(".quc-tip").addClass("quc-tip-error").html("\u60a8\u4f3c\u4e4e\u8fd8\u6ca1\u6709\u6fc0\u6d3b\uff0c\u8bf7"+t+"\uff0c\u5e76\u6309\u90ae\u4ef6\u5185\u7684\u63d0\u793a\u64cd\u4f5c\u3002"),i.html("\u5df2\u5b8c\u6210\u6fc0\u6d3b").removeClass("quc-button-disabled")})})},show:function(){if(this.$orgForm=t(this.model.getEmailInfo().el),this.selElement(),this.model.trigger("beforeShow",this.$el[0]),this.$orgForm.parents(".quc-panel").length>0)this.$orgForm.hide().before(this.$el);else{var n=this.panel=new e.utils.Panel;n.setTitle("\u8bf7\u6fc0\u6d3b\u60a8\u7684\u90ae\u7bb1").setContent(this.$el).show()}this.$orgForm.triggerHandler("QucDOMUpdated"),this.model.trigger("afterShow",this.$el[0])},hide:function(){this.model.trigger("beforeHide",this.$el[0]),this.panel?this.panel.hide():(this.$el.remove(),this.$orgForm.show()),this.$orgForm.triggerHandler("QucDOMUpdated"),this.model.trigger("afterHide",this.$el[0])}};e.ui.activeEmail={init:function(){r.init.apply(r,arguments)}}}(QHPass),function(e){"use strict";var t=e.$,n={},r=e.getLogic({name:"activeEmail",run:function(t){var r=this,i=e.getConfig("activeEmail.destUrl",location.href);if(r.init(),"signUp"==n.type){if(n.activeUrl=t.activeurl+"&destUrl="+encodeURIComponent(i),n.email=t.email,n.wrapper)return void (location.href=n.activeUrl);e.sync.sendSignUpActivationEmail(n.activeUrl).then(function(e){n.site=e.goToMail,r.trigger("show")})}else{if("setEmail"==n.type)n.email=t.loginEmailUnactivated;else{if("setSecEmail"!=n.type)return void this.trigger("error","");n.email=t.safeSecEmail}n.site=t.mailHostUrl,r.trigger("show")}},getEmailInfo:function(){return n},resend:function(){var r=this,i=t.when();return"signUp"==n.type?i=e.sync.sendSignUpActivationEmail(n.activeUrl):"setEmail"==n.type?i=e.getUserInfo().then(function(t){return e.sync.sendActivationEmail(t.crumb)}):"setSecEmail"==n.type&&(i=e.getUserInfo().then(function(t){return e.sync.sendSecActivationEmail(t.crumb)})),i.done(function(e){r.trigger("resendSuccess",e)}).fail(function(e){r.trigger("resendFail",e)})},modify:function(){n.model.trigger("reset")},checkActive:function(){var r=this,i=t.Deferred();return"signUp"==n.type?e.sync.checkEmailExist(n.email).always(function(t){e.utils.isSameError(t,e.ERROR.EMAIL_NOT_ACTIVATED)?i.reject():i.resolve()}):"setEmail"==n.type?e.getEmailStatus(function(e){e.loginEmail?i.resolve():i.reject()}):e.getUserSecInfo(function(e){e.safeSecEmail?i.resolve():i.reject()}),i.then(function(){r.trigger("hide").trigger("success").resolve()}),i.promise()}});e.activeEmail=function(e,t){r.setCallback(t).run(e)},e.activeEmail.prepare=function(e,t){n.model=e,n.wrapper=t,n.type=e.name,e.on("beforeShow",function(e,t){n.el=t})}}(QHPass),function(e){"use strict";var t=e.$,n='<div class="quc-loading"></div><div class="quc-mask quc-mask-loading"><!--[if lte IE 6]><iframe class="quc-ie6-iframe" src="about:blank" border="0" frameborder="0"></iframe><div class="quc-mask-inner"></div><![endif]--></div>',r=e.ui.loading={$el:t(n),show:function(){if(r.$el.appendTo(document.body),!e.utils.support.fixed){var n=t(window),i=t(document.body);r.$el.filter(".quc-mask").css({height:i.outerHeight(!0),width:i.outerWidth(!0)}),r.$el.filter(".quc-loading").css({height:n.height(),width:n.width(),top:n.scrollTop(),left:n.scrollLeft()})}},hide:function(){r.$el.remove()}};e.events.on("showLoading.*",r.show),e.events.on("hideLoading.*",r.hide)}(QHPass),function(e){"use strict";var t=e.$;e.when={signIn:function(t){var n=function(n){"bind"==n.type&&0==n.userName.indexOf("360U")?e.fillProfile(function(){t(n)}):t(n)};e.getUserInfo(!1,n,function(){e.signIn(n)})},username:function(t){this.signIn(function(n){0==n.username.indexOf("360U")?e.setUsername(t):t()})},nickname:function(t){this.signIn(function(n){n.nickname?t():e.setNickname(t)})},email:function(t){this.signIn(function(){e.getEmailStatus(function(n){n.loginEmail?t():e.setEmail(t)})})},secEmail:function(t){this.signIn(function(){e.getUserSecInfo(function(n){n.safeSecEmail?t():e.setSecEmail(t)})})},mobile:function(t){this.signIn(function(){e.getUserSecInfo(function(n){n.safeSecMobile?t():e.bindMobile(t)})})},emailOrMobile:function(n,r){this.signIn(function(){var i=t.Deferred(),s=t.Deferred();e.getUserSecInfo(function(e){e.safeSecMobile?s.reject():s.resolve()}),e.getEmailStatus(function(e){e.loginEmail?i.reject():i.resolve()}),t.when(i,s).then(function(){r?e.bindMobile(n):e.setEmail(n)},n)})},mobileOrEmail:function(e,t){this.emailOrMobile(e,!t)},authenticate:function(t){this.signIn(function(n){var r=n.crumb;e.sync.getAuthenticationStatus(r).then(function(n){var r=n.details&&n.details.mobile,i=n.details&&n.details.isNeedAuthen;i?e.authenticate(t):t&&t(r)})})}}}(QHPass);