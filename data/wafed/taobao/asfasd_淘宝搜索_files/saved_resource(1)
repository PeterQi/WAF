KISSY.add("tbc/search-suggest/6.1.3/mods/storage",["base","json"],function(e,a,t,o){function r(e){return s||(r.superclass.constructor.call(this,e||{}),s=this,s.initialize()),s}var s,i=a("base"),n=a("json");r.ATTRS={src:{value:location.protocol+"//g.alicdn.com/kg/search-suggest/6.0.10/storage.swf"},bridge:{value:null},hasInit:{value:!1}},KISSY.extend(r,i,{initialize:function(e){e=e||{};var a=this;try{a._addFlash(e.appendTo),a.hasInit=!0}catch(t){KISSY.log(t.message)}},_saveToArr:function(e,a){var t=this.lazyArr||[];t.push({func:e,args:a}),this.lazyArr=t},_addFlash:function(e){var a,t=this,o=document,r=o.createElement("div"),s=t.get("src"),i="";window.__StorageIsReady=function(){t.isLoaded=!0;var e=t.lazyArr;KISSY.each(e,function(e){e.func.apply(t,e.args)})},r.id="storagetool",r.style.height=0,r.style.overflow="hidden",i+='<object id="J_StorageObj" name="J_StorageObj" ',i+='classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" ',i+='codebase="'+location.protocol+'//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab">',i+='<param name="movie" value="'+s+'" />',i+='<param name="allowScriptAccess" value="always" />',i+='<embed name="J_StorageEmbed" src="'+s+'" width="1" height="1" ',i+='allowScriptAccess="always" type="application/x-shockwave-flash" ',i+='pluginspage="'+location.protocol+'//www.adobe.com/go/getflashplayer">',i+="</embed></object>",e=e||o.body,e.appendChild(r),r.innerHTML=i,-1!==navigator.appVersion.indexOf("MSIE")?(r.style.zoom=1,r.style.filter="alpha(opacity=10)",a=window.J_StorageObj):(r.style.opacity=.1,a=o.J_StorageEmbed),t.set("bridge",a)},save:function(e,a,t){var o=this,r=o.get("bridge");if(!o.isLoaded)return void o._saveToArr(arguments.callee,arguments);try{return r.save(e,a),r.read(e)?n.parse(r.read(e)).length:(t&&t.onSuccess(a),0)}catch(s){t&&t.onFailure&&t.onFailure(s)}},read:function(e,a,t){var o,r=this,s=r.get("bridge");if(t=t||0,!r.isLoaded)return void r._saveToArr(arguments.callee,arguments);try{if(s.read)o=s.read(e),a&&a.onSuccess(o);else{if(200===t)return void(a&&a.onFailure&&a.onFailure());setTimeout(function(){r.read(e,a,t+1)},500)}return o}catch(i){a&&a.onFailure&&a.onFailure(i)}}}),o.exports=r});KISSY.add("tbc/search-suggest/6.1.3/mods/utils",["base"],function(e,t,n,i){function o(e){return r?r:(o.superclass.constructor.call(this,e||{}),void(r=this))}var r,s=t("base");KISSY.extend(o,s,{pluginInitializer:function(e){var t=this;t.set("caller",e)},getCookie:function(e){var t=window;if(t.userCookie&&!KISSY.isUndefined(t.userCookie[e]))return t.userCookie[e];if(t.SRP_COOKIES||(t.SRP_COOKIES={})&&KISSY.isUndefined(SRP_COOKIES[e])){var n=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");n&&n[1]?SRP_COOKIES[e]=decodeURIComponent(n[1]):SRP_COOKIES[e]=""}return SRP_COOKIES[e]},fireEvent:function(e,t){var n=document;if(n.createEvent){var i=n.createEvent("MouseEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)}else n.createEventObject&&e.fireEvent("on"+t)}},{ATTRS:{pluginId:{value:"utils"}}}),i.exports=o});