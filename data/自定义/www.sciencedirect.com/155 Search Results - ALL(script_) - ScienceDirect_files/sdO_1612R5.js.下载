function createCookie(cookieName,value){var finalCookie;var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";var cookieValue;if(value){cookieValue=cookieStart;cookieValue+=value;cookieValue+=cookieEnd}finalCookie=cookieName+"="+cookieValue+";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=
-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;if(domain)finalCookie+=";domain="+domain;document.cookie=finalCookie}
var Cookie={get:function(cName){var beg=document.cookie.indexOf(cName+"=");var val=null;if(beg!=-1){beg=beg+cName.length+1;var end=document.cookie.indexOf(";",beg);if(end==-1)val=unescape(document.cookie.slice(beg));else val=unescape(document.cookie.slice(beg,end))}return val},getDomain:function(hn){var hostName=document.location.hostname;if(hn)hostName=hn;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";
else if(hostName.indexOf(".lexisnexis.com")!=-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;else domain="";return domain},set:function(name,value,expDate){var expStr="";if(expDate!=null&&(typeof expDate=="object"&&Object.prototype.toString.call(expDate)=="[object Date]"))expStr=expDate.toGMTString();var path="/";var domain=Cookie.getDomain();var finalCookie=name+"="+escape(value)+";path="+path;if(expStr&&expStr!="")finalCookie+=";expires="+expStr;
if(domain&&domain!="")finalCookie+=";domain="+domain;document.cookie=finalCookie},remove:function(name){var pastDate=new Date;pastDate.setTime(1E3*60*60*5);Cookie.set(name,"",pastDate)},expiresIn:function(base,unit,amt){if(amt!=null&&unit!=null){var shift=0;if(unit=="milliseconds")shift=amt;else if(unit=="seconds")shift=1E3*amt;else if(unit=="minutes")shift=1E3*60*amt;else if(unit=="hours")shift=1E3*60*60*amt;else if(unit=="days")shift=1E3*60*60*24*amt;else shift=0;if(base!=null&&(typeof base=="object"&&
Object.prototype.toString.call(base)=="[object Date]")){base.setTime(base.getTime()+shift);return base}else return null}else return base}};var DBG={out:function(lvl,str){if(typeof SDM!="object")return;if(typeof SDM.pm!="object")return;if(SDM.pm.df=="undefined")return;if(SDM.pm.df>=lvl||(lvl==0||typeof ut=="object"))if(typeof console==="undefined"||typeof console.log==="undefined");else console.log(str)}};var PluginDetect={plugins:navigator.plugins,getByName:function(pluginName){var plugs=[];for(var p=0;p<this.plugins.length;p++)if(typeof this.plugins[p].name=="string")if(this.plugins[p].name==pluginName)plugs.push(this.plugins[p]);return plugs},getByType:function(typeStr){var plugs=[];for(var p=0;p<this.plugins.length;p++)if(this.isOfType(this.plugins[p],typeStr))plugs.push(this.plugins[p]);return plugs},dump:function(plugs){if(plugs==undefined)plugs=this.plugins;var s="";for(var p=0;p<plugs.length;p++){s+=
p+" "+plugs[p].name+" "+plugs[p].version+"\n";for(var m=0;m<plugs[p].length;m++)s+="\t"+m+" "+plugs[p][m].suffixes+" "+plugs[p][m].type+"\n"}return s},isOfType:function(plug,typeStr){var s="";for(var m=0;m<plug.length;m++)if(plug[m].type==typeStr)return true;return false},printPlugins:function(){if(typeof console==="undefined"||typeof console.log==="undefined");else console.log(this.dump())}};
var AdobeDetect={getVersion:function(){if(window.ActiveXObject){var xObj;try{xObj=new ActiveXObject("ACROPDF.PDF")}catch(e){}if(!xObj)try{xObj=new ActiveXObject("PDF.PdfCtrl")}catch(e){}try{if(xObj){var v1=xObj.getVersions().split(",");var v2=v1[0].split("=");var v3=v2[1];if(v3[v3.length-1]==".")v3=v3.slice(0,v3.length-1);return v3}}catch(e){}return undefined}else{var plug=PluginDetect.getByName("Adobe Acrobat");if(plug.length)if(plug[0].version!=undefined)return plug[0].version;else if(plug[0].description!=
undefined){var d=plug[0].description.split(" ");if(d.length)return d[d.length-1];else return undefined}else return undefined;else return undefined}}};var DynamicPubContent={dynamicComponents:null,buildDynamicData:function(){var dynamicReqObj=new Object;var requestObj=new Object;requestObj.cid=JDM.pm.cid;requestObj.issn=JDM.pm.issn;requestObj.allowVIA=JDM.pm.allowVIA;dynamicReqObj.pageMetaData=requestObj;DynamicPubContent.requestData=JSON.stringify(dynamicReqObj);DynamicPubContent.retryNum=0;DynamicPubContent.ajaxCallInFlight=false;DynamicPubContent.retrieve()},retrieve:function(){DynamicPubContent.ajaxCallInFlight=true;var jqxhr=$.post(JDM.ep.urlPrefix+
"/dc/pub/all",{data:DynamicPubContent.requestData},function(res){try{JDM.pf.dc.respObj=$.parseJSON(res);DynamicPubContent.ajaxCallInFlight=false;DynamicPubContent.processResponse()}catch(e){DynamicPubContent.ajaxCallInFlight=false;DynamicPubContent.retryRetrieve()}});jqxhr.fail(function(){DBG.out(0,JDM.ep.urlPrefix+"/dc/pub/all POST call failed.");DynamicPubContent.ajaxCallInFlight=false;DynamicPubContent.retryRetrieve()})},retryRetrieve:function(){if(!DynamicPubContent.ajaxCallInFlight&&DynamicPubContent.retryNum<
JDM.pf.dc.retry){DynamicPubContent.retryNum++;var delay=DynamicPubContent.retryNum*JDM.pf.dc.retryDelay*JDM.pf.dc.retryFactor;setTimeout(DynamicPubContent.retrieve,delay)}},processResponse:function(){try{if(JDM.pf.dc.respObj.DynamicComponentsResp==undefined||JDM.pf.dc.respObj.DynamicComponentsResp==null)DynamicPubContent.retryRetrieve();else{DBG.out(0,JDM.pf.dc.respObj);DynamicPubContent.dynamicComponents=JDM.pf.dc.respObj.DynamicComponentsResp;DynamicPubContent.populateDynamicComponents()}}catch(e){DynamicPubContent.retryRetrieve()}},
populateDynamicComponents:function(){if(DynamicPubContent.dynamicComponents==null||DynamicPubContent.dynamicComponents==undefined)return;var scope="#pubPg";if($(scope+" #alertLink")[0])DynamicPubContent.buildAlertLink(scope);if($(scope+" #OLLinks")[0])DynamicPubContent.buildOLLinks(scope);if($(scope+" #favorite")[0])DynamicPubContent.buildFavoriteLink(scope);if($(scope+" #sampleCopy")[0])DynamicPubContent.buildSampleCopy(scope)},buildAlertLink:function(scope){if(DynamicPubContent.dynamicComponents.alertLink==
null||DynamicPubContent.dynamicComponents.alertLink==undefined)return;if(DynamicPubContent.dynamicComponents.alertLink.createLink!=undefined){$(scope+" #alertLink").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.alertLink.createLink));if(JDM.pm.contentType=="JL")$(scope+" #alertLink").find("span").text("Subscribe to new article alerts");else $(scope+" #alertLink").find("span").text("Subscribe to new volume alerts");$(scope+" #alertLink").show()}if(DynamicPubContent.dynamicComponents.alertLink.removeLink!=
undefined){$(scope+" #alertLink").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.alertLink.removeLink));if(JDM.pm.contentType=="JL")$(scope+" #alertLink").find("span").text("Unsubscribe from new article alerts");else $(scope+" #alertLink").find("span").text("Unsubscribe from new volume alerts");$(scope+" #alertLink").show()}},buildOLLinks:function(scope){if(DynamicPubContent.dynamicComponents.OLLinks==null||DynamicPubContent.dynamicComponents.OLLinks==undefined)return;
if(DynamicPubContent.dynamicComponents.OLLinks.outwardLink!=undefined){$(scope+" #OLLinks").find("table").text(DynamicPubContent.dynamicComponents.OLLinks.outwardLink);$(scope+" #OLLinks").show()}},buildFavoriteLink:function(scope){if(DynamicPubContent.dynamicComponents.favLinks==null||DynamicPubContent.dynamicComponents.favLinks==undefined)return;if(!JDM.dac.favObj)JDM.dac.favObj=Object();if(DynamicPubContent.dynamicComponents.favLinks.favLink!=undefined)if(DynamicPubContent.dynamicComponents.favLinks.favSet!=
undefined)if(DynamicPubContent.dynamicComponents.favLinks.favSet=="N"){$(scope+" #favorite").html('<a id="favLink"></a>');$(scope+" #favorite").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.favLinks.favLink));if(DynamicPubContent.dynamicComponents.prodImgPath!=undefined)$(scope+" #favorite").find("a").addClass("favIcon_"+DynamicPubContent.dynamicComponents.prodImgPath);if(DynamicPubContent.dynamicComponents.favLinks.Individual!=undefined)$(scope+" #favorite").find("a").bind("click",
DynamicPubContent.processFav);$(scope+" #favorite").find("a").html('<span class="favText">Add to Favorites</span>');JDM.dac.favObj.favSet="N"}else{$(scope+" #favorite").html('<span id="favLink"></span>');if(DynamicPubContent.dynamicComponents.prodImgPath!=undefined)$(scope+" #favorite").find("span").addClass("favIcon_"+DynamicPubContent.dynamicComponents.prodImgPath);$(scope+" #favorite").find("span").attr("title","Added to Favorites");$(scope+" #favorite").find("span").html('<span class="favText">Added to Favorites [</span><a class="favText" href="">remove</a><span class="favText">]</span>');
$(scope+" #favorite").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.favLinks.favLink));if(DynamicPubContent.dynamicComponents.favLinks.Individual!=undefined)$(scope+" #favorite").find("a").bind("click",DynamicPubContent.processFav);JDM.dac.favObj.favSet="Y"}$(scope+" #favorite").show()},processFav:function(e){e.preventDefault();var scope=$(this);var favUrl=$(scope).attr("href");$.get(favUrl,function(res){if(res){var obj=$.parseJSON(res);if(JDM.dac.favObj.favSet=="Y"){JDM.dac.favObj.favSet=
"N";if(obj.FavoriteResp==undefined||obj.FavoriteResp==null)return;else{$("#favorite").html("");$("#favorite").html('<a id="favLink"></a>');$("#favorite").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.favLinks.favLink));if(DynamicPubContent.dynamicComponents.prodImgPath!=undefined)$("#favorite").find("a").addClass("favIcon_"+DynamicPubContent.dynamicComponents.prodImgPath);if(DynamicPubContent.dynamicComponents.favLinks.Individual!=undefined)$("#favorite").find("a").bind("click",
DynamicPubContent.processFav);$("#favorite").find("a").html('<span class="favText">Add to Favorites</span>')}}else{JDM.dac.favObj.favSet="Y";if(obj.FavoriteResp==undefined||obj.FavoriteResp==null)return;else{$("#favorite").html("");$("#favorite").html('<span id="favLink"></span>');if(DynamicPubContent.dynamicComponents.prodImgPath!=undefined)$("#favorite").find("span").addClass("favIcon_"+DynamicPubContent.dynamicComponents.prodImgPath);$("#favorite").find("span").attr("title","Added to Favorites");
$("#favorite").find("span").html('<span class="favText">Added to Favorites [</span><a class="favText" href="">remove</a><span class="favText">]</span>');$("#favorite").find("a").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.favLinks.favLink));if(DynamicPubContent.dynamicComponents.favLinks.Individual!=undefined)$("#favorite").find("a").bind("click",DynamicPubContent.processFav)}}$("#favorite").show()}})},buildSampleCopy:function(scope){if(DynamicPubContent.dynamicComponents.sampleCopy==
null||DynamicPubContent.dynamicComponents.sampleCopy==undefined)return;if(DynamicPubContent.dynamicComponents.sampleCopy.sampleCopyLink!=undefined){$(scope+" #sampleCopy").attr("href",decodeURIComponent(DynamicPubContent.dynamicComponents.sampleCopy.sampleCopyLink));if(JDM.pm.contentType=="JL"){$(scope+" #sampleCopy").attr("title","Sample Issue Online");$(scope+" #sampleCopy").text("Sample Issue Online")}else{$(scope+" #sampleCopy").attr("title","Sample Volume Online");$(scope+" #sampleCopy").text("Sample Volume Online")}$(scope+
" #sampleCopy").show();$(scope+" #sampleCopy").parent().show()}}};$.fn.ieWarning=function(){var container=this;init();function init(){var state=Cookie.get("ie_warning_state");if(state)removeMsg();else showMsg()}function showMsg(){container.show();$(".closeBt",container).on("click",disableMsg);setTimeout(disableMsg,2E4)}function hideMsg(){container.animate({top:-container.outerHeight()},removeMsg)}function disableMsg(){Cookie.set("ie_warning_state",1);hideMsg()}function removeMsg(){container.remove()}};var LoginBox={getStyleObj:function(elem,parent){if(document.layers)if(parent)return"document."+parent+".document."+elem;else return"document."+elem+".style";else if(document.all)return"document.all."+elem+".style";else if(document.getElementById)return"document.getElementById('"+elem+"').style"},flipLogin:function(e,button){var t=eval(LoginBox.getStyleObj(e));var u=document.getElementById("loginPlus");var v=document.getElementById("userPlus");var userbox=document.getElementById("userBox");var j=document.getElementById("loginPlusScript");
if(button==null)if(t.display=="none"){t.display="block";j.className="minus";$("#username").focus();$("#loginPlusScript").attr("aria-expanded","true");$(document).on("keyup",LoginBox.handleEscKey)}else{t.display="none";j.className="plus";$("#loginPlusScript").attr("aria-expanded","false");$(document).off("keyup",LoginBox.handleEscKey)}else if(button=="userPlus")if(t.display=="none"){t.display="block";v.className="userMinus";$("#userPlus").attr("aria-expanded","true");$("#logoutPlus > span").addClass("logoutSpan");
$("#logoutPlus > span h2").addClass("logoutSpan");$(document).on("keyup",LoginBox.handleEscKey)}else{t.display="none";v.className="userPlus";$("#userPlus").attr("aria-expanded","false");$("#logoutPlus > span").removeClass("logoutSpan");$("#logoutPlus > span h2").removeClass("logoutSpan");$(document).off("keyup",LoginBox.handleEscKey)}else if(t.display=="none"){t.display="block";userbox.style.display="none";v.className="userPlus";$(document).off("keyup",LoginBox.handleEscKey)}else t.display="none";
this.truncateRecentInst();LoginBox.setTabs()},truncateRecentInst:function(){var textContainerHeight=$(".recentInst").height();$(".recentInst a").each(function(){var $ellipsisText=$(this);if($ellipsisText.outerHeight(true)>textContainerHeight)while($ellipsisText.outerHeight(true)>textContainerHeight)$ellipsisText.text(function(index,text){return text.replace(/\W*\s(\S)*$/,"...")});else $ellipsisText.parent(".recentInst").css("height","auto")})},handleEscKey:function(e){if(e.keyCode==27)if($("#loginBox,#userBox").is(":visible")){$("#loginBox,#userBox").hide();
$("#loginPlusScript").addClass("plus").removeClass("minus").attr("aria-expanded","false");$("#userPlus").addClass("userPlus").removeClass("userMinus").attr("aria-expanded","false");$("#logoutPlus > span").removeClass("logoutSpan");$("#logoutPlus > span h2").removeClass("logoutSpan")}},setTabs_deprecated:function(){$("#header").off("keydown","#loginBox :tabbable:last,#userBox :tabbable:last").on("keydown","#loginBox :tabbable:last,#userBox :tabbable:last",function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();
$(this).closest("#loginBox,#userBox").find(":tabbable").eq(0).focus()}});$("#header").off("keydown","#loginBox :tabbable:first,#userBox :tabbable:first").on("keydown","#loginBox :tabbable:first,#userBox :tabbable:first",function(e){if(e.shiftKey&&e.which==9){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(-1).focus()}})},setTabs:function(){var selectorFirst="",selectorLast="";if($("#loginBox")[0]){selectorFirst="#loginBox > div :first";selectorLast="#loginBox > div :last"}else if($("#userBox")[0]){selectorFirst=
"#userBox :first";selectorLast="#userBox :last"}if(selectorFirst!=""&&selectorLast!=""){$("#header").off("keydown",selectorLast).on("keydown",selectorLast,function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(0).focus()}});$("#header").off("keydown",selectorFirst).on("keydown",selectorFirst,function(e){if(e.shiftKey&&e.which==9){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(-1).focus()}})}}};function autoCompleteInit(baseURL){if(typeof baseURL=="string"&&baseURL.length>1)jQuery(document).ready(function(){sdAutoComplete(baseURL)});else if(typeof console!="undefined")console.log("warning: autocomplete not initialized")}
function sdAutoComplete(serviceURL){var inputField="qs_title";jQuery(".qsRadio").click(QuickSearch.changeFields);jQuery(".qsImgBlurFocus").blur(QuickSearch.setValues);jQuery(".qsImgBlurFocus").focus(QuickSearch.clearValues);$("#"+inputField).autocomplete({minLength:2,source:function(req,resp){$.post(serviceURL,{qs_title:req.term},function(data){if(data.replace(/ /gm,"")!=""&&data.replace(/(\r\n|\n|\r)/gm,"")!=""){var list=[];$(data).find("li").each(function(i,e){list.push({label:$(e).text()})});resp(list)}})},
open:function(event,ui){$("ul.ui-autocomplete").css("z-index",101)}})};var MobileLink={init:function(){$("#goToggleSite").delegate(".mLink","click",function(event){event.preventDefault();var t=$(this);overrideSitePref(t.attr("site"),t.attr("ckNm"),t.attr("lnkOrg"),t.attr("lnkZn"),event)})}};$(document).ready(MobileLink.init);
function overrideSitePref(sitePref,cookieName,orig,zone,evt){if(!sitePref)sitePref="";if(!cookieName)cookieName="Site";createSimpleCookie(cookieName,sitePref);var cv="";if(zone&&""!==zone)cv=cv.addTag(zone,"z");if(orig&&""!==orig)cv=cv.addTag(orig,"org");if(""!==cv){cv=cv.addTag(getDateTime(),"rdt");var cookStNm="SD_ART_LINK_STATE";if("browse"===orig)cookStNm="SD_HOME_PAGE_COOKIE";else if("home"===orig)cookStNm="SD_HOME_PAGE_COOKIE";createCookie(cookStNm,cv)}var pgRLForm=document.getElementById("pgReload");
if(pgRLForm){var wl=window.location;var myURL=wl.protocol;if(0===myURL.length)myURL="http:";if(myURL.indexOf(":")<0)myURL+=":";myURL+="//"+wl.host+wl.pathname;pgRLForm.action=myURL;if(wl.search.length>1){var prms=wl.search;if("?"===prms[0])prms=prms.substring(1);var nvArr=prms.split("&");for(var i=0;i<nvArr.length;i++){var nv=nvArr[i].split("=");if(nv.length>0&&nv[0].length>0){var ele=document.createElement("input");ele.setAttribute("type","hidden");ele.setAttribute("name",nv[0]);if(nv.length>1)ele.setAttribute("value",
nv[1]);pgRLForm.appendChild(ele)}}}pgRLForm.submit()}else window.location.reload(true)};var myAlert={processUrl:"",msgBlock:"",container:"",currentRow:"",srcElement:"",alertClose:true,init:function(){if($(".addAlertContainer.addJournal")[0]){$(document).on("click",".alertType input",myAlert.changeType);myAlert.container=$(".addAlertContainer");myAlert.changeType();myAlert.container.closest("form").on("submit",function(e){if(!myAlert.validate()){e.preventDefault();e.stopPropagation()}});myAlert.container.find(":tabbable:first").focus()}else if($(".addAlertContainer.addSearch")[0])$(".addAlertContainer.addSearch").find("input[type='text']:first").focus();
else if($(".pageContent.topicAlert")[0])$("input[name='selTopic']").closest("form").on("submit",function(e){if($("form[name='TopicList'] input:checkbox:checked").size()<=0){var submitConfirm=confirm("You have no topics selected. Are you sure you want to\n leave this page with no alerts selected?");if(!submitConfirm){e.preventDefault();e.stopPropagation()}}});else{$(document).on("click",".editAlert",myAlert.edit).on("click",".editEmail",myAlert.editEmail).on("click",".deleteAlert",myAlert.remove).on("click",
".saveAlertBt",myAlert.save).on("click",".cancelAlertBt",myAlert.close).on("click",".alertType input",myAlert.changeType);$(document).off("click.closeAlert").on("click.closeAlert",function(e){setTimeout(function(){if(myAlert.container&&(!myAlert.container.is(e.target)&&(myAlert.container.has(e.target).length===0&&myAlert.alertClose)))myAlert.close(e);myAlert.alertClose=true},100)});myAlert.initializeSort()}myAlert.msgBlock=$("#alertBox")},edit:function(e){if(myAlert.container!=""){myAlert.srcElement=
"";myAlert.close(e)}e.stopPropagation();e.preventDefault();myAlert.srcElement=$(e.currentTarget);myAlert.processUrl=$(e.currentTarget).attr("data-url");var alertType=$(e.currentTarget).parents("table").attr("data-type");myAlert.currentRow=$(e.currentTarget).parents("tr");var boolTOC=false,boolAIP=false;if(alertType=="journal"){myAlert.container=$(".editBlock.journal");myAlert.container.find(".col1").text(myAlert.currentRow.find("th").eq(0).text());alertTypeArr=myAlert.currentRow.find("td").eq(0).text().split("&");
myAlert.container.find(".col2 label input").prop("checked",false);$(alertTypeArr).each(function(i){myAlert.container.find(".col2 label").each(function(j){if($.trim(alertTypeArr[i])==$.trim($(this).find("span").text())){if($(this).find("input").val()=="TOC")boolTOC=true;if($(this).find("input").val()=="AIP")boolAIP=true;$(this).find("input").prop("checked",true)}})});if(!boolTOC&&boolAIP){myAlert.container.find(".notEditable").addClass("hidden");myAlert.container.find(".frequency").removeClass("hidden");
myAlert.container.find(".frequency option").filter(function(){if($.trim($(this).text())==$.trim(myAlert.currentRow.find("td").eq(1).text())){selectValue=$(this).val();return true}}).prop("selected",true)}else{myAlert.container.find(".notEditable").text(myAlert.currentRow.find("td").eq(1).text()).removeClass("hidden");myAlert.container.find(".frequency").addClass("hidden")}}else if(alertType=="search"){var selectValue;myAlert.container=$(".editBlock.search");myAlert.container.find(".col1 input").val(myAlert.currentRow.find("th").eq(0).text());
var frequency=$.trim(myAlert.currentRow.find("td").eq(0).text().replace("*",""));myAlert.container.find(".frequency option").filter(function(){if($.trim($(this).text())==frequency){selectValue=$(this).val();return true}}).prop("selected",true)}myAlert.container.attr({"role":"form","aria-label":"Edit "+myAlert.currentRow.find("th").eq(0).text()});myAlert.container.css("top",myAlert.currentRow.position().top).removeClass("hidden");myAlert.container.find(".innerBlock :tabbable:first").focus();myAlert.setTabs()},
editEmail:function(e){if(myAlert.container!=""){myAlert.srcElement="";myAlert.close(e)}e.stopPropagation();e.preventDefault();myAlert.srcElement=$(e.currentTarget);myAlert.container=$(".editBlock.email");myAlert.processUrl=$(e.currentTarget).attr("data-url");myAlert.currentRow=$(e.currentTarget).parents("tr");var currCol=$(e.currentTarget).parents("td");myAlert.container.css({"top":myAlert.currentRow.position().top,"left":currCol.position().left+currCol.width()-myAlert.container.outerWidth()-10}).removeClass("hidden");
myAlert.container.find('input[name="emailAddress"]').val($(e.currentTarget).attr("data-email")).selectRange(0,0);myAlert.container.find(".innerBlock :tabbable:first").focus();myAlert.setTabs()},save:function(e){var alertCategory=myAlert.currentRow.parents("table").attr("data-type");var saveURL;var editBlk=$(".editBlock."+alertCategory);if(alertCategory=="journal"){var alertName=myAlert.currentRow.find("th").eq(0).text();var frequency,alertType,nonEditfrequency,alertTypeText;nonEditfrequency=myAlert.container.find(".notEditable").text();
frequency=myAlert.container.find(".frequency").val();if(myAlert.container.find("#lblTOC").prop("checked")&&myAlert.container.find("#lblAIP").prop("checked")){alertType="TOC,AIP";alertTypeText=myAlert.container.find("#lblTOC").parent().text();alertTypeText+=" &<br>"+myAlert.container.find("#lblAIP").parent().text()}else{alertType=myAlert.container.find("input[name=alertType]:checked").val();alertTypeText=myAlert.container.find("input[name=alertType]:checked").parent().text();if(alertType=="AIP")nonEditfrequency=
""}saveURL=myAlert.processUrl+"?alertName="+alertName+"&SerialAlertFrequency="+frequency+"&alertType="+alertType+"&notEditableFreq="+nonEditfrequency;if(myAlert.validate())$.get(saveURL,function(response){if(response=="1"){myAlert.currentRow.find("td").eq(0).html(alertTypeText);if(nonEditfrequency=="")myAlert.currentRow.find("td").eq(1).text(frequency);else myAlert.currentRow.find("td").eq(1).text(nonEditfrequency);myAlert.close(e);myAlert.throwError("notify","The changes to "+alertName+" have been saved.",
false);$(document).scrollTop(0);$(".alertListHeader").trigger("update",true)}})}else if(alertCategory=="search"){var alertName=myAlert.container.find("input[name=alertName]").val();var frequency=myAlert.container.find(".frequency").val();var emailAddress=myAlert.container.find("input[name=emailAddress]").val();if(!myAlert.container.hasClass("email"))saveURL=myAlert.processUrl+"&alertName="+alertName+"&Frequency="+frequency;else saveURL=myAlert.processUrl+"&emailAddress="+emailAddress;if(myAlert.validate())$.get(saveURL,
function(response){if(response=="1"){if(!myAlert.container.hasClass("email")){myAlert.currentRow.find("th").eq(0).text(alertName);myAlert.currentRow.find("td").eq(0).text(myAlert.container.find(".frequency option:selected").text());$(".alertListHeader").trigger("update",true)}else{myAlert.currentRow.find(".editEmail").attr("data-email",emailAddress);alertName=myAlert.currentRow.find("th").eq(0).text()}myAlert.close(e);myAlert.throwError("notify","The changes to "+alertName+" have been saved.",false);
$(document).scrollTop(0);$(".alertListHeader").trigger("update",true)}})}},close:function(e){if($(e.target).hasClass("cancelAlertBt"))e.preventDefault();myAlert.container.addClass("hidden");if(!myAlert.msgBlock.hasClass("notify"))myAlert.msgBlock.addClass("hidden").removeClass("floating");if(myAlert.srcElement[0])myAlert.srcElement.focus();myAlert.container.attr({"role":"","aria-label":""});myAlert.srcElement="";myAlert.container="";myAlert.processUrl="";myAlert.currentRow=""},remove:function(e){if(myAlert.container!=
"")myAlert.close(e);var deleteConfirm=confirm("Are you sure you want delete this alert?");if(deleteConfirm){myAlert.currentRow=$(e.currentTarget).parents("tr");var deleteURL=$(e.currentTarget).attr("href");var alertCategory=myAlert.currentRow.parents("table").attr("data-type");if(alertCategory=="journal")deleteURL+="/myalerts";$.get(deleteURL,function(response){if(response=="1")myAlert.currentRow.animate({backgroundColor:"#fbc7c7"},"fast").animate({opacity:"hide"},"slow",function(){if(myAlert.currentRow.parents("tbody").children("tr").length==
1){myAlert.currentRow.parents("table").addClass("hidden");myAlert.currentRow.parents(".alertBlock").find(".noAlertMsgBox").removeClass("hidden")}$(this).remove()})})}e.stopPropagation();e.preventDefault()},initializeSort:function(e){$.tablesorter.addParser({id:"frequency",is:function(s){return false},format:function(s){return s.toLowerCase().replace(/inactive/,4).replace(/daily/,3).replace(/weekly/,2).replace(/monthly/,1).replace(/as published/,0)},type:"numeric"});$(".alertListHeader").tablesorter({sortList:[[0,
0]],selectorHeaders:"thead th.sortable",sortAppend:[[0,0]],headers:{1:{sorter:"frequency"},2:{sorter:"frequency"}},initialized:function(t){$(t).removeAttr("role");$(t).find("tr").removeAttr("role");$(t).find("th.sortable").each(function(){myAlert.setAria($(this))})}}).bind("sortEnd",function(e,t){$(t).find("th.sortable").each(function(){myAlert.setAria($(this))});var currentSort=t.config.sortList,columnNum=currentSort[0][0],colObj=$(t).find("th").eq(columnNum);if(t.config.sortAppend[0][0]==columnNum)if(colObj.attr("aria-sort")==
"ascending")t.config.sortAppend=[[0,0]];else if(colObj.attr("aria-sort")=="descending")t.config.sortAppend=[[0,1]]})},setAria:function(colObj){if(colObj.attr("aria-sort")=="ascending")if(colObj.text()=="Frequency")colObj.attr("aria-label","Sort descending");else{if(colObj.text()=="Alert name")colObj.attr("aria-label","Sort by reverse alphabetical")}else if(colObj.attr("aria-sort")=="descending")if(colObj.text()=="Frequency")colObj.attr("aria-label","Sort ascending");else{if(colObj.text()=="Alert name")colObj.attr("aria-label",
"Sort alphabetically")}else if(colObj.text()=="Frequency")colObj.attr("aria-label","Sort ascending");else if(colObj.text()=="Alert name")colObj.attr("aria-label","Sort by reverse alphabetical");colObj.find("a").attr("title",colObj.attr("aria-label")).attr("alt",colObj.attr("aria-label"))},changeType:function(e){if(!$("#lblTOC").prop("checked")&&$("#lblAIP").prop("checked")){myAlert.container.find(".notEditable").addClass("hidden");myAlert.container.find(".frequency").removeClass("hidden");$("input[name='notEditableFreq']").val("")}else if($("#lblTOC").prop("checked")&&
!$("#lblAIP").prop("checked")){myAlert.container.find(".notEditable").text("As published").removeClass("hidden");myAlert.container.find(".frequency").addClass("hidden");$("input[name='notEditableFreq']").val("As published")}else{myAlert.container.find(".notEditable").text("Weekly").removeClass("hidden");myAlert.container.find(".frequency").addClass("hidden");$("input[name='notEditableFreq']").val("Weekly")}},setTabs:function(){myAlert.container.off("keydown").on("keydown",function(e){if(e.which==
27)myAlert.close(e)});myAlert.container.off("keydown",".innerBlock :tabbable:last").on("keydown",".innerBlock :tabbable:last",function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();myAlert.container.find(":tabbable").eq(0).focus()}});myAlert.container.off("keydown",".innerBlock :tabbable:first").on("keydown",".innerBlock :tabbable:first",function(e){if(e.shiftKey&&e.which==9){e.preventDefault();myAlert.container.find(":tabbable").eq(-1).focus()}})},validate:function(){if(myAlert.container.hasClass("journal"))if(myAlert.container.find(":checkbox:checked").size()>
0)return true;else{myAlert.throwError("error","You must select at least one Alert type",true);return false}else if(myAlert.container.hasClass("search"))if(myAlert.container.find("input[name=alertName]").val()!="")return true;else{myAlert.throwError("error","The name field is required to save an alert. Enter a Name.",true);return false}else if(myAlert.container.hasClass("email")){var email=myAlert.container.find("input[name=emailAddress]").val();if(email!=""){var emailPattern="([\\w-\\.]+)@((?:[\\w\\-]+\\.)+)([a-zA-Z]{2,4})";
var pattern=new RegExp("^"+emailPattern+"(,\\n*"+emailPattern+")*;?$");if(!pattern.test(email)){myAlert.throwError("error","Enter a valid email address to continue.",true);return false}else return true}else{myAlert.throwError("error","The email address field is required. Enter a valid email address.",true);return false}}else if(myAlert.container.hasClass("addJournal"))if(myAlert.container.find(":checkbox:checked").size()>0)return true;else{myAlert.throwError("error","You must select at least one Alert type",
false);return false}},throwError:function(type,msg,setPos){myAlert.msgBlock.removeClass("floating notify error").addClass(type);myAlert.msgBlock.find(".alertText").html(msg);if(setPos){myAlert.msgBlock.addClass("floating");var topPos=myAlert.container.offset().top;var blockHeight=myAlert.msgBlock.outerHeight();myAlert.msgBlock.css({left:myAlert.container.offset().left,top:topPos,width:myAlert.container.outerWidth()-2}).delay(100).animate({top:topPos-myAlert.msgBlock.outerHeight()+1},100,function(){$(this).removeClass("hidden")})}else myAlert.msgBlock.removeClass("hidden").removeAttr("style")}};var DDM={requestjson:null,selectedNamingScheme:"",jsonData:"",urlQualifier:"",maxCnt:20,partNameMap:{},namingSchemes:null,predefinedNames:[],init:function(){if(SDU.cookieAvail())$("li.pdfDownloader").css("display","inline-block");else if(!$("li.pdfDownloader").prev("li")[0])$("div.exportDivision").closest("li").addClass("noDDM");var msgBox=$("#appDialog");msgBox.css("position","fixed");$("body").on("click","#multiPdfIcon, .multiPdfIcon",DDM.openDialog);$("body").on("click","#closeWindow, a.closeModal, #closeBtn",
DDM.closeModalWindow);$("body").on("click","#ddm",DDM.downloadPdfs);$("body").on("click",".newNaming",DDM.goToNaming);$("body").on("click",".deleteNaming",DDM.deleteNamingScheme);$("body").on("click",".goToFiles, .saveName",DDM.goToFileList);$("body").on("change","#list2",DDM.handleSelectedBits);$("body").on("change","#list1",DDM.handleAvailableBits);$("#removeBtn,#upBtn,#downBtn,.saveName").prop("disabled",true).addClass("disable");DDM.buildPartNameMap();DDM.initPredefinedNames();$("body").on("click",
".pdfListItem",DDM.singlePDFDownload)},openDialog:function(e){if(SDM.pageType=="article_full")triggerUsabillaLive();e.preventDefault();e.stopPropagation();if(typeof pdfCite=="undefined"){$("#appDialog,#appBackground").show();$("#contentBlk #filesTemplate").html('<img id="loader" src="/sd/img/sprite_parts/loader.gif"><div id="loaderTxt">Loading Documents</div>');$("#appDialog .footer").html("")}var form=$(e.currentTarget).closest("form")[0];if(typeof SD_URL_QUALIFIER!="undefined"){DDM.urlQualifier=
window.location.pathname;if($(e.currentTarget).hasClass("module")||form.isBook!=undefined&&form.isBook.value=="book")DDM.urlQualifier=$(form).attr("action")}else{DDM.urlQualifier=$(form).attr("action");if($("input.checkBox:checked:visible").length==0){$("#SuggestedArtList input.pdf_selectAll").prop("checked",true);$("#SuggestedArtList input.pdf_selectAll").css("opacity","0.5");$('#pdfkingContent input[type="checkbox"]').prop("checked",true)}}if(form.PDF_DDM_MAX)DDM.maxCnt=form.PDF_DDM_MAX.value;form.pdfDownload.value=
"download";var pdfDownloadUrl=DDM.urlQualifier+"?"+$(form).serialize();if(typeof pdfCite!="undefined"){var artCount=$("input[name=art].checkBox:checked:visible").length;if(artCount==0)artCount=3;var displayMsg="<span>Downloading zip file containing "+artCount+" article...</span>";if(artCount>1)displayMsg="<span>Downloading zip file containing "+artCount+"  articles...</span>";$("#pdfKingMessage .pdfKingHeading .downloadMsg").html(displayMsg);$("#displayPdfKing").css("display","none");$("#pdfKingMessage").css("display",
"block");setTimeout(function(){pdfCite.closePopup()},5E3)}$.getJSON(pdfDownloadUrl,function(data){DDM.requestJson=data;DDM.generateDownloadScreen(data);DDM.jsonData=data;if(typeof pdfCite!="undefined")DDM.downloadPdfs()})},generateDownloadScreen:function(jsonObj,newName){DDM.getNamingSchemes();if(jsonObj&&jsonObj.metaData){var htmlStr="";try{var docs=jsonObj.metaData;htmlStr+='<div class="namingSchems">';if(jsonObj.hitCount>DDM.maxCnt&&$("#book").val()!="book")htmlStr+='<div class="alertMesg notify"><span class="alertImg icon">&nbsp;</span><span class="alertText">First '+
DDM.maxCnt+" documents will be downloaded</span></div>";else if($("#book").val()=="book"&&$(".articleList .checkBox:checked").size()<=0){htmlStr+='<div class="alertMesg notify book">';htmlStr+='<span class="alertImg icon">&nbsp;</span>';htmlStr+='<span class="alertText">Downloading all chapters could take up to a minute or more.';htmlStr+="For a quicker download, you can select specific chapter titles on the book homepage.";htmlStr+="</span></div>"}htmlStr+='<h2 id="namingTxt">Select file naming format</h2>';
htmlStr+='<div class="namingContainer"><select id="naming">';$.each(DDM.namingSchemes,function(i,item){htmlStr+='<option value="'+item.schemeId+'">'+item.schemeId+"</option>"});htmlStr+="</select>";htmlStr+='<a class="linkButton newNaming" href="#">Create my own format</a> <span class="divider">|</span>';htmlStr+='<a class="linkButton deleteNaming" href="#">Delete</a>';htmlStr+="</div>";htmlStr+='<div id="loadAbstract">';htmlStr+='<label id="abs">Note: Abstract will be downloaded when full text is not available.</label>';
htmlStr+="</div></div>";if(docs.length>0){htmlStr+='<div id="files">';htmlStr+="<h2>Selected documents</h2>";htmlStr+='<div id="tableScroll" tabindex="-1">';htmlStr+="<table>";htmlStr+='<col><col class="spacing"><col class="formatColumn"><col class="spacing"><col class="availabilityColumn">';htmlStr+='<thead><tr><th><div>Document title</div></th><th></th><th><div class="formatColumn">Format</div></th><th></th><th><div class="availabilityColumn">Availability</div></th></tr></thead>';htmlStr+="<tbody>";
$.each(docs,function(i,item){var icon=item.entitled=="Y"?"PDF-icon.png":"HTML-icon-small.png";var entStatus=item.entitled=="Y"?"PDF Full text":"Abstract only";htmlStr+='<tr class="row">';htmlStr+='<td><span class="fileName">'+item.translatedDocTitle+"</span></td>";htmlStr+="<td></td>";htmlStr+='<td align="center"><span class="fmtIcon"><img src="/sd/img/sprite_parts/'+icon+'"/></span></td>';htmlStr+="<td></td>";htmlStr+="<td><span>"+entStatus+"</span></td>";htmlStr+="</tr>"});htmlStr+="</tbody>";htmlStr+=
"</table>";htmlStr+="</div></div>"}$("#appDialog #contentBlk #filesTemplate").html(htmlStr).show();$("#appDialog #ddmNewformatHelp").hide();$("#appDialog #ddmMainHelp").show();var footerHtml="";footerHtml+='<span id="footerBtns"><button type="button" class="big" id="ddm">Download</button><span class="divider">|</span><a href="#" class="closeModal">Cancel</a></span>';$("#appDialog .footer").html(footerHtml);if(typeof newName!="undefined"&&newName==true)$("#appDialog #ddm").focus();else $("#appDialog .close").focus();
DDM.popupTabwrap();$("#ddm").click(function(){var pageType=SDM.pageType;if(pageType=="pubhome_j"||pageType=="pubhome_b")triggerUsabillaLive();else if(pageType=="rslt_art")triggerUsabillaLive()})}catch(e){}}},goToNaming:function(e){$("#appDialog #namingTemplate #list2").html("");$("#appDialog #namingTemplate #customText").val("");$("#appDialog #namingTemplate #example").html("");var htmlStr="";htmlStr+="<h2>Create new format</h2>";htmlStr+='<div id="partsSelector">';htmlStr+='<div class="left"><label>Available<select id="list1" multiple></select></label></div>';
htmlStr+='<div id="moveParts" class="middle"><button type="button" id="addBtn" class="big" >Add</button><button type="button" id="removeBtn" class="big" >Remove</button><button type="button" id="upBtn" class="big" >Move up</button><button type="button" id="downBtn" class="big" >Move down</button></div>';htmlStr+='<div class="right"><label>Selected<select id="list2" multiple></select></label></div>';htmlStr+="</div>";htmlStr+='<div id="customPartSelector">';htmlStr+='<label class="customLabel" for="customText">Custom text<br/><input type="text" name="customText" id="customText" class="customText"></label>';
htmlStr+='<label for="prefix"><input type="radio" class="customPos" name="customPos" id="prefix" value="0" checked="checked"><span>Prefix</span></label>';htmlStr+='<label for="suffix"><input type="radio" class="customPos" name="customPos" id="suffix" value="1"><span>Suffix</span></label>';htmlStr+="</div>";htmlStr+='<div id="example"></div>';$("#appDialog #namingTemplate").html(htmlStr);var bits="";$.each(DDM.partNameMap,function(key,value){bits+='<option value="'+value+'">'+key+"</option>"});$("#appDialog #namingTemplate #list1").html(bits);
$("#appDialog #filesTemplate, #limitNote").hide();$("#appDialog #namingTemplate").show();$("#appDialog #ddmNewformatHelp").show();$("#appDialog #ddmMainHelp").hide();$("#appDialog .footer #footerBtns").html('<button class="saveName">Save</button><span class="divider">|</span><a href="#" class="goToFiles">Cancel</a>');$("#removeBtn,#upBtn,#downBtn,.saveName").prop("disabled",true).addClass("disable");$(document).off("click.addBtn").on("click.addBtn","#addBtn",function(){var selectedCnt=$("#list1 > option:selected").length;
$("#list1 > option:selected").each(function(idx){$("#list2").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");if(idx==selectedCnt-1)if($(this).next("option")[0])$(this).next("option").prop("selected",true);else if($(this).prev("option")[0])$(this).prev("option").prop("selected",true);$(this).remove()});$(".saveName:button").prop("disabled",false).removeClass("disable");DDM.updateFileNamePreview();$("#list1").trigger("change")});$(document).off("click.removeBtn").on("click.removeBtn",
"#removeBtn",function(){var selectedCnt=$("#list2 > option:selected").length;$("#list2 > option:selected").each(function(idx){$("#list1").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");if(idx==selectedCnt-1)if($(this).next("option")[0])$(this).next("option").prop("selected",true);else if($(this).prev("option")[0])$(this).prev("option").prop("selected",true);$(this).remove()});$("#addBtn:button").prop("disabled",false).removeClass("disable");DDM.updateFileNamePreview();$("#list2").trigger("change")});
$(document).off("click.upBtn").on("click.upBtn","#upBtn",function(){var selectedOption=$("#list2 > option:selected");var prevOption=$("#list2 > option:selected").prev("option");if($(prevOption).text()!=""){$("#list2 > option").prop("selected",false);$(prevOption).before($(selectedOption).clone());$(prevOption).prev("option").prop("selected",true);$(selectedOption).remove();DDM.updateFileNamePreview();$("#list2").trigger("change")}});$(document).off("click.downBtn").on("click.downBtn","#downBtn",function(){var selectedOption=
$("#list2 > option:selected");var nextOption=$("#list2 > option:selected").next("option");if($(nextOption).text()!=""){$("#list2 > option").prop("selected",false);$(nextOption).after($(selectedOption).clone());$(nextOption).next("option").prop("selected",true);$(selectedOption).remove();DDM.updateFileNamePreview();$("#list2").trigger("change")}});$(document).off("keyup.customText").on("keyup.customText","#customText",function(){DDM.updateFileNamePreview()});$(document).off("change.customPos").on("change.customPos",
".customPos",function(){DDM.updateFileNamePreview()});$("#appDialog #list1").focus();DDM.popupTabwrap();e.preventDefault()},deleteNamingScheme:function(e){if($("#naming option").length<=1){if(!$("#filesTemplate .alertMesg")[0])$("#filesTemplate .namingSchems").prepend('<div class="alertMesg notify">');$("#filesTemplate .alertMesg").html('<span class="alertImg icon">&nbsp;</span><span class="alertText">You must have at least 1 document file naming convention in the dropdown list</span>');return}var schemeId=
$("#naming option:selected").val();$("#naming option:selected").remove();$.each(DDM.namingSchemes,function(i,ns){if(ns["schemeId"]==schemeId){DDM.namingSchemes.splice(i,1);return false}});DDM.saveNamingScheme(DDM.namingSchemes);e.preventDefault()},updateFileNamePreview:function(){var nameParts=[];$("#list2 > option").each(function(){nameParts.push($(this).val())});if(nameParts.length<=0&&$("#customText").val()==""){$("#example").html("");return}var previewText="";var firstDoc="";if(DDM.jsonData&&
DDM.jsonData.metaData.length>=1){firstDoc=DDM.jsonData.metaData[0];$(nameParts).each(function(idx){if(firstDoc[this.toString()]!=undefined&&firstDoc[this.toString()]!=""){previewText+=$.trim(firstDoc[this.toString()]);if(idx<nameParts.length-1)previewText+="_"}})}if($("#customText").val()!=""){var customtext=$("#customText").val();if($("#prefix").is(":checked"))if(previewText!="")previewText=customtext+"_"+previewText;else previewText=customtext;else if($("#suffix").is(":checked"))if(previewText!=
"")previewText=previewText+"_"+$.trim($("#customText").val());else previewText=customtext}previewText=previewText.replace(/([^a-z0-9_]+)/gi,"-");previewText="<strong>File name preview : </strong> <br>"+previewText;previewText+=".pdf";$("#example").html(previewText)},goToFileList:function(e){$("#appDialog #namingTemplate").hide();var schemeId="";var newName=false;if($(e.currentTarget).hasClass("saveName")&&$("#list2 option").length>0){var partCodes=[];var prefix="";var suffix="";$("#list2 option").each(function(){partCodes.push($(this).val());
if(schemeId!="")schemeId+="_";schemeId+="("+$(this).text()+")"});if($("#customText").val()!=""){var customText=$("#customText").val();customText=customText.replace(/([^a-z0-9_]+)/gi,"-");if($("#prefix").is(":checked")){prefix=customText;if(schemeId!="")schemeId=prefix+"_"+schemeId;else schemeId=prefix}else{suffix=customText;if(schemeId!="")schemeId=schemeId+"_"+suffix;else schemeId=suffix}}DDM.namingSchemes.unshift({"partCodes":partCodes,"schemeId":schemeId,"customPrefix":prefix,"customSuffix":suffix});
DDM.namingSchemes=_.uniq(DDM.namingSchemes,false,function(n){return n.schemeId});DDM.saveNamingScheme(DDM.namingSchemes);newName=true}DDM.generateDownloadScreen(DDM.requestJson,newName);if(schemeId!="")$("#naming").val(schemeId)},closeModalWindow:function(e){e.preventDefault();$("#appDialog,#appBackground,#namingTemplate,#resultTemplate").hide();$("#appDialog #filesTemplate").show();$("#appDialog #ddmNewformatHelp").hide();$("#appDialog #ddmMainHelp").show()},downloadPdfs:function(){var ipJson=DDM.formRequestJson();
$('<form action="'+SDM.pf.ddm.endpoint+'"'+' method="post">'+'<input type="hidden" name="jsonInput" value="'+encodeURIComponent(ipJson)+'" ></form>').appendTo("body").submit().remove()},formRequestJson:function(){var requestObj=new Object;if(DDM.requestJson){var docs=DDM.requestJson.metaData;var docArray=new Array;$.each(docs,function(i,item){var doc=new Object;doc.pdfEid=item.pdfEid;doc.entitled=item.entitled=="Y";doc.pdfUrl=item.pdfUrl;doc.htmlUrl=item.htmlUrl;doc.httpReferer=item.httpReferer;var pdfName=
DDM.getPdfName(item);doc.pdfName=pdfName;docArray.push(doc)})}requestObj.pdfArray=docArray;requestObj.sid=DDM.requestJson.sid;requestObj.sid_v=DDM.requestJson.sid_v;requestObj.euid=DDM.requestJson.euid;requestObj.sessId=DDM.requestJson.sessId;requestObj.utt=DDM.requestJson.utt;requestObj.userIp=DDM.requestJson.userIp;return JSON.stringify(requestObj)},getPdfName:function(doc){var pdfName="";if(DDM.requestJson){var userSelection=$("#naming").find(":selected").val();$(DDM.namingSchemes).each(function(){if(this.schemeId==
userSelection){selectednamingScheme=this;return false}});var nameParts=selectednamingScheme.partCodes;$(nameParts).each(function(idx){if(doc[this.toString()]!=undefined&&doc[this.toString()]!=""){pdfName+=$.trim(doc[this.toString()]);if(idx<nameParts.length-1)pdfName+="_"}});if(selectednamingScheme.customPrefix!=undefined&&selectednamingScheme.customPrefix!="")if(pdfName!="")pdfName=selectednamingScheme.customPrefix+"_"+pdfName;else pdfName=selectednamingScheme.customPrefix;if(selectednamingScheme.customSuffix!=
undefined&&selectednamingScheme.customSuffix!="")if(pdfName!="")pdfName=pdfName+"_"+selectednamingScheme.customSuffix;else pdfName=selectednamingScheme.customSuffix;pdfName=pdfName.replace(/([^a-z0-9_]+)/gi,"-");if(pdfName.length>150)pdfName=pdfName.substr(0,150);return pdfName}},handleSelectedBits:function(){$("#list1 > option:selected").each(function(idx){$(this).prop("selected",false)});$("#removeBtn:button,#upBtn:button,#downBtn:button,.saveName:button").prop("disabled",false).removeClass("disable");
var selectedOption=$(this).find("option:selected").size();if(selectedOption>1){$("#upBtn:button,#downBtn:button").prop("disabled",true).addClass("disable");return}var noOfOptions="";noOfOptions=$(this).find("option").size();if(noOfOptions==0)$("#removeBtn:button,#upBtn:button,#downBtn:button,.saveName:button").prop("disabled",true).addClass("disable");else if(noOfOptions==1)$("#upBtn,#downBtn").prop("disabled",true).addClass("disable");else if(noOfOptions>1)if(this.selectedIndex==0)$("#upBtn").prop("disabled",
true).addClass("disable");else if(this.selectedIndex==noOfOptions-1)$("#downBtn").prop("disabled",true).addClass("disable")},handleAvailableBits:function(){if($("#list1 > option").length>0)$("#addBtn:button").prop("disabled",false).removeClass("disable");else $("#addBtn:button").prop("disabled",true).addClass("disable");$("#removeBtn:button,#upBtn:button,#downBtn:button").prop("disabled",true).addClass("disable");$("#list2 > option:selected").each(function(idx){$(this).prop("selected",false)})},buildPartNameMap:function(){DDM.partNameMap=
new Object;DDM.partNameMap["Document Title"]="translatedDocTitle";DDM.partNameMap["Publication Year"]="pubYear";DDM.partNameMap["Publication Name"]="pubTitle";DDM.partNameMap["First Author"]="author";DDM.partNameMap["First Page"]="startPage";DDM.partNameMap["Last Page"]="endPage";DDM.partNameMap["Volume Number"]="volume";DDM.partNameMap["Issue"]="issue";DDM.partNameMap["ISSN/ISBN"]="issnisbn"},initPredefinedNames:function(){DDM.predefinedNames.push("(Document Title)_(Publication Year)_(Publication Name)");
DDM.predefinedNames.push("(First Author)_(Publication Year)_(Publication Name)")},getNamingSchemes:function(){if(SDU.cookieAvail()&&SDU.localStorageAvail()){var ns=localStorage.getItem("ddm.ns");if(ns)DDM.namingSchemes=$.parseJSON(ns);else DDM.loadNamingSchmes()}else if(!DDM.namingSchemes)DDM.loadNamingSchmes()},loadNamingSchmes:function(){var nsArray=[];$.each(DDM.predefinedNames,function(i,name){var ns=new Object;ns.schemeId=name;var pcArray=[];var pcs=name.split("_");$.each(pcs,function(i,item){item=
item.replace(/[\(\)]/g,"");var pc=DDM.partNameMap[item];if(pc!=undefined||pc!="")pcArray.push(pc)});ns.partCodes=pcArray;ns.customPrefix="";ns.customSuffix="";nsArray.push(ns)});DDM.namingSchemes=nsArray;DDM.saveNamingScheme(DDM.namingSchemes)},saveNamingScheme:function(ns){if(SDU.cookieAvail()&&(SDU.localStorageAvail()&&typeof JSON!="undefined"))localStorage.setItem("ddm.ns",JSON.stringify(ns))},popupTabwrap:function(){var obj=$("#appDialog");obj.find("a:last").keydown(function(e){if(e.keyCode==
9&&!e.shiftKey){e.preventDefault();$(obj).find("a:first").focus()}});obj.find("a:first").keydown(function(e){if(e.keyCode==9&&e.shiftKey){e.preventDefault();$(obj).find("a:last").focus()}})},singlePDFDownload:function(){triggerUsabillaLive()}};var browseTitles={titleBtn:".loadAllTitles a",resultContainer:"",titleUrl:"",init:function(){$(browseTitles.titleBtn).on("click",function(e){e.stopPropagation();e.preventDefault();browseTitles.titleUrl=$(e.currentTarget).attr("href");browseTitles.loadTitles(browseTitles.titleUrl);browseTitles.resultContainer=$(e.currentTarget).closest("li");$(e.currentTarget).closest("li").html('<div class="loader">Loading remaining titles...</div>')})},loadTitles:function(titleURL){$.ajax({url:titleURL,success:browseTitles.setResponse})},
setResponse:function(data,isPaginated){if(data)if(BROWSE_PAGE_HTML_TO_JSON!=undefined&&BROWSE_PAGE_HTML_TO_JSON=="TRUE"){var htmlstr="";var href="";var count=0;try{var jsonRes=$.parseJSON(data);if(jsonRes!=undefined&&(jsonRes!=null&&jsonRes.length>0))for(var i=0;i<jsonRes.length;i++)if(jsonRes[i].A!=undefined){htmlstr+="<li><div>";htmlstr+='<span style="margin: 5px;"><b>';htmlstr+='<h2 style="color:#252525;">';htmlstr+=jsonRes[i].A;htmlstr+="</h2></b></span></div></li>"}else if(jsonRes[i].H!=undefined)href=
jsonRes[i].H;else{if(jsonRes[i].T!=undefined){htmlstr+='<li class="browseimpBrowseRow" data-title="';htmlstr+=jsonRes[i].T;htmlstr+='">'}htmlstr+="<ul>";htmlstr+='<li class="browseList browseColFirst">';htmlstr+="<span>";htmlstr+='<a href="';htmlstr+=SDM.ep.urlPrefix;htmlstr+="/";if(jsonRes[i].PT!=undefined)if(jsonRes[i].PT=="J")htmlstr+="journal";else if(jsonRes[i].PT=="BS")if(jsonRes[i].PY!=undefined)htmlstr+="book";else htmlstr+="bookseries";else if(jsonRes[i].PT=="HS")if(jsonRes[i].PY!=undefined)htmlstr+=
"book";else htmlstr+="handbooks";else if(jsonRes[i].PT=="R")htmlstr+="referenceworks";else if(jsonRes[i].PT=="B")htmlstr+="book";htmlstr+="/";if(jsonRes[i].I!=undefined)htmlstr+=jsonRes[i].I;htmlstr+='"';if(jsonRes[i].T!=undefined&&jsonRes[i].V==undefined||jsonRes[i].SN!=undefined){if(jsonRes[i].C!=undefined){htmlstr+='id="title-';htmlstr+=jsonRes[i].C;htmlstr+='"'}htmlstr+=">";htmlstr+=jsonRes[i].T;htmlstr+="</a>";htmlstr+="</span>"}if(jsonRes[i].V!=undefined&&jsonRes[i].PT!="B"){if(jsonRes[i].R!=
undefined)htmlstr+='rel="nofollow"';if(jsonRes[i].C!=undefined){htmlstr+='id="title-';htmlstr+=jsonRes[i].C;htmlstr+='">'}if(jsonRes[i].V!=undefined)htmlstr+=jsonRes[i].V;htmlstr+="</a>";htmlstr+="</span>";htmlstr+='<span style="font-size: 0.87em; color: #808080">';if(jsonRes[i].VN!=undefined){htmlstr+=" - ";htmlstr+="Volume ";htmlstr+=jsonRes[i].VN}if(jsonRes[i].P!=undefined){htmlstr+=", Part ";htmlstr+=jsonRes[i].P}htmlstr+=" of ";htmlstr+=jsonRes[i].T;htmlstr+="</span>"}else if(jsonRes[i].SN!=
undefined){htmlstr+='<span style="font-size: 0.87em; color: #808080">';htmlstr+=" &ndash; ";if(jsonRes[i].V!=undefined){htmlstr+="Volume ";htmlstr+=jsonRes[i].V;if(jsonRes[i].P!=undefined){htmlstr+=", Part ";htmlstr+=jsonRes[i].P}}else htmlstr+=" A volume ";htmlstr+=" in ";htmlstr+=jsonRes[i].SN;htmlstr+="</span>"}if(jsonRes[i].IMG!=undefined&&jsonRes[i].IMG=="Y")htmlstr+='<span class="newTitleImage" title="New Title" alt="New Title"></span>';htmlstr+="</li>";htmlstr+='<li class="browseList browseColSecond">';
if(jsonRes[i].PY!=undefined)htmlstr+=jsonRes[i].PY;htmlstr+="</li>\n";htmlstr+='<li class="browseList browseColThird vertAlignTop">';if(jsonRes[i].PT!=undefined)if(jsonRes[i].PT=="J")htmlstr+="Journal";else if(jsonRes[i].PT=="BS")htmlstr+="Book Series";else if(jsonRes[i].PT=="HS")htmlstr+="Handbook";else if(jsonRes[i].PT=="R")htmlstr+="Reference Work";else if(jsonRes[i].PT=="B")htmlstr+="Book";htmlstr+="</li>\n";htmlstr+='<li class="browseList browseColFourth"';htmlstr+="<a href='javascript:void(0)'"+
" summaryurl='/science/subscriptionSummary/"+jsonRes[i].C+"/"+jsonRes[i].PT+"' summaryimgname='img"+jsonRes[i].C+"' id='key_"+jsonRes[i].C+"' onclick='openSummary(this)' class='popupLink popupSummaryAcc'>";if(jsonRes[i].E!=undefined)if(jsonRes[i].E=="SUB")htmlstr+=entitlementIcons.generateEntitlementHTML("sub","icon");else if(jsonRes[i].E=="OA"){htmlstr+=entitlementIcons.generateEntitlementHTML("OA","icon");htmlstr+=entitlementIcons.generateEntitlementHTML("OA","text")}else if(jsonRes[i].E=="SOA"){htmlstr+=
entitlementIcons.generateEntitlementHTML("subCOA","icon");htmlstr+=entitlementIcons.generateEntitlementHTML("subCOA","text")}else{if(jsonRes[i].E=="NOA"){htmlstr+=entitlementIcons.generateEntitlementHTML("nonsubCOA","icon");htmlstr+=entitlementIcons.generateEntitlementHTML("nonsubCOA","text")}}else htmlstr+=entitlementIcons.generateEntitlementHTML("nonsub","icon");htmlstr+="</li>";htmlstr+="</ul>";count++}}catch(e){console.log(e);return}if(BROWSE_PAGE_PAGINATION!=undefined&&BROWSE_PAGE_PAGINATION==
"TRUE"){if(href!=undefined&&href!=""){htmlstr+='<div class="navigation_browseimp">';href=href.replace(/&quot;/gi,'"');htmlstr+=href;htmlstr+="</div>";htmlstr+='<script>prs.rt("count_titles",';htmlstr+=count;htmlstr+=");\x3c/script>";htmlstr='<div class="post_browseimp">'+htmlstr;htmlstr+="</div>";htmlstr='<div id="content_browseimp">'+htmlstr;htmlstr+="</div>"}}else{htmlstr+='<script>prs.rt("loadRemainingEnd"';htmlstr+='prs.rt("loadRemainingCnt",';htmlstr+=count;htmlstr+=");\x3c/script>"}if(isPaginated==
true)return htmlstr;$(browseTitles.resultContainer).replaceWith(htmlstr)}else $(browseTitles.resultContainer).replaceWith(data)}};!function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("Fingerprint2",this,function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError("'this' is null or undefined");var a=Object(this),r=a.length>>>0;if(0===r)return-1;var n=+t||0;if(Math.abs(n)===1/0&&(n=0),n>=r)return-1;for(i=Math.max(n>=0?n:r-Math.abs(n),0);r>i;){if(i in a&&a[i]===e)return i;i++}return-1});var e=
function(e){var t={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i]};this.options=this.extend(e,t),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return e.prototype={extend:function(e,t){if(null==e)return t;for(var i in e)null!=e[i]&&(t[i]!==e[i]&&(t[i]=e[i]));return t},log:function(e){window.console&&console.log(e)},get:function(e){var t=[];t=this.userAgentKey(t),t=this.languageKey(t),t=this.colorDepthKey(t),
t=this.screenResolutionKey(t),t=this.availableScreenResolutionKey(t),t=this.timezoneOffsetKey(t),t=this.sessionStorageKey(t),t=this.localStorageKey(t),t=this.indexedDbKey(t),t=this.addBehaviorKey(t),t=this.openDatabaseKey(t),t=this.cpuClassKey(t),t=this.platformKey(t),t=this.doNotTrackKey(t),t=this.pluginsKey(t),t=this.canvasKey(t),t=this.webglKey(t),t=this.adBlockKey(t),t=this.hasLiedLanguagesKey(t),t=this.hasLiedResolutionKey(t),t=this.hasLiedOsKey(t),t=this.hasLiedBrowserKey(t),t=this.touchSupportKey(t);
var i=this;this.fontsKey(t,function(t){var a=[];i.each(t,function(e){var t=e.value;"undefined"!=typeof e.value.join&&(t=e.value.join(";")),a.push(t)});var r=i.x64hash128(a.join("~~~"),31);return e(r,t)})},userAgentKey:function(e){return this.options.excludeUserAgent||e.push({key:"user_agent",value:this.getUserAgent()}),e},getUserAgent:function(){return navigator.userAgent},languageKey:function(e){return this.options.excludeLanguage||e.push({key:"language",value:navigator.language||(navigator.userLanguage||
(navigator.browserLanguage||(navigator.systemLanguage||"")))}),e},colorDepthKey:function(e){return this.options.excludeColorDepth||e.push({key:"color_depth",value:screen.colorDepth}),e},screenResolutionKey:function(e){return this.options.excludeScreenResolution?e:this.getScreenResolution(e)},getScreenResolution:function(e){var t;return t=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof t&&e.push({key:"resolution",
value:t}),e},availableScreenResolutionKey:function(e){return this.options.excludeAvailableScreenResolution?e:this.getAvailableScreenResolution(e)},getAvailableScreenResolution:function(e){var t;return screen.availWidth&&(screen.availHeight&&(t=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth])),"undefined"!=typeof t&&e.push({key:"available_resolution",value:t}),
e},timezoneOffsetKey:function(e){return this.options.excludeTimezoneOffset||e.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),e},sessionStorageKey:function(e){return!this.options.excludeSessionStorage&&(this.hasSessionStorage()&&e.push({key:"session_storage",value:1})),e},localStorageKey:function(e){return!this.options.excludeSessionStorage&&(this.hasLocalStorage()&&e.push({key:"local_storage",value:1})),e},indexedDbKey:function(e){return!this.options.excludeIndexedDB&&(this.hasIndexedDB()&&
e.push({key:"indexed_db",value:1})),e},addBehaviorKey:function(e){return document.body&&(!this.options.excludeAddBehavior&&(document.body.addBehavior&&e.push({key:"add_behavior",value:1}))),e},openDatabaseKey:function(e){return!this.options.excludeOpenDatabase&&(window.openDatabase&&e.push({key:"open_database",value:1})),e},cpuClassKey:function(e){return this.options.excludeCpuClass||e.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),e},platformKey:function(e){return this.options.excludePlatform||
e.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),e},doNotTrackKey:function(e){return this.options.excludeDoNotTrack||e.push({key:"do_not_track",value:this.getDoNotTrack()}),e},canvasKey:function(e){return!this.options.excludeCanvas&&(this.isCanvasSupported()&&e.push({key:"canvas",value:this.getCanvasFp()})),e},webglKey:function(e){return this.options.excludeWebGL?e:this.isWebGlSupported()?(e.push({key:"webgl",value:this.getWebglFp()}),e):e},adBlockKey:function(e){return this.options.excludeAdBlock||
e.push({key:"adblock",value:this.getAdBlock()}),e},hasLiedLanguagesKey:function(e){return this.options.excludeHasLiedLanguages||e.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),e},hasLiedResolutionKey:function(e){return this.options.excludeHasLiedResolution||e.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),e},hasLiedOsKey:function(e){return this.options.excludeHasLiedOs||e.push({key:"has_lied_os",value:this.getHasLiedOs()}),e},hasLiedBrowserKey:function(e){return this.options.excludeHasLiedBrowser||
e.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),e},fontsKey:function(e,t){return this.options.excludeJsFonts?this.flashFontsKey(e,t):this.jsFontsKey(e,t)},flashFontsKey:function(e,t){return this.options.excludeFlashFonts?t(e):this.hasSwfObjectLoaded()&&this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?t(e):void this.loadSwfAndDetectFonts(function(i){e.push({key:"swf_fonts",value:i.join(";")}),t(e)}):t(e)},jsFontsKey:function(e,t){var i=this;return setTimeout(function(){var a=
["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax",
"LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],
n=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR",
"Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7",
"Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate",
"Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia",
"Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans",
"Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN",
"Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script",
"Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS",
"MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT",
"OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre",
"Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System",
"Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT",
"Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];i.options.extendedJsFonts&&(r=r.concat(n));var o="mmmmmmmmmmlli",s="72px",l=document.getElementsByTagName("body")[0],h=document.createElement("div"),u=document.createElement("div"),d={},c={},g=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=s,e.innerHTML=o,e},p=function(e,t){var i=g();return i.style.fontFamily=e+","+t,i},f=function(){for(var e=[],t=0,i=a.length;i>t;t++){var r=
g();r.style.fontFamily=a[t],h.appendChild(r),e.push(r)}return e},m=function(){for(var e={},t=0,i=r.length;i>t;t++){for(var n=[],o=0,s=a.length;s>o;o++){var l=p(r[t],a[o]);u.appendChild(l),n.push(l)}e[r[t]]=n}return e},S=function(e){for(var t=!1,i=0;i<a.length;i++)if(t=e[i].offsetWidth!==d[a[i]]||e[i].offsetHeight!==c[a[i]])return t;return t},T=f();l.appendChild(h);for(var x=0,M=a.length;M>x;x++)d[a[x]]=T[x].offsetWidth,c[a[x]]=T[x].offsetHeight;var v=m();l.appendChild(u);for(var A=[],E=0,C=r.length;C>
E;E++)S(v[r[E]])&&A.push(r[E]);l.removeChild(u),l.removeChild(h),e.push({key:"js_fonts",value:A}),t(e)},1)},pluginsKey:function(e){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||e.push({key:"ie_plugins",value:this.getIEPlugins()}):e.push({key:"regular_plugins",value:this.getRegularPlugins()})),e},getRegularPlugins:function(){for(var e=[],t=0,i=navigator.plugins.length;i>t;t++)e.push(navigator.plugins[t]);return this.pluginsShouldBeSorted()&&(e=e.sort(function(e,t){return e.name>
t.name?1:e.name<t.name?-1:0})),this.map(e,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this)},getIEPlugins:function(){var e=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var t=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP",
"PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];e=this.map(t,function(e){try{return new ActiveXObject(e),e}catch(t){return null}})}return navigator.plugins&&(e=
e.concat(this.getRegularPlugins())),e},pluginsShouldBeSorted:function(){for(var e=!1,t=0,i=this.options.sortPluginsFor.length;i>t;t++){var a=this.options.sortPluginsFor[t];if(navigator.userAgent.match(a)){e=!0;break}}return e},touchSupportKey:function(e){return this.options.excludeTouchSupport||e.push({key:"touch_support",value:this.getTouchSupport()}),e},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},
hasIndexedDB:function(){return!!window.indexedDB},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:"unknown"},getTouchSupport:function(){var e=0,t=!1;"undefined"!=typeof navigator.maxTouchPoints?e=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);
try{document.createEvent("TouchEvent"),t=!0}catch(i){}var a="ontouchstart"in window;return[e,t,a]},getCanvasFp:function(){var e=[],t=document.createElement("canvas");t.width=2E3,t.height=200,t.style.display="inline";var i=t.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),e.push("canvas winding:"+(i.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",this.options.dontUseFakeFontInCanvas?i.font="11pt Arial":
i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),i.fillStyle="rgba(102, 204, 0, 0.7)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,
100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),e.push("canvas fp:"+t.toDataURL()),e.join("~")},getWebglFp:function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"},i=function(e){var t,i=e.getExtension("EXT_texture_filter_anisotropic")||(e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||
e.getExtension("MOZ_EXT_texture_filter_anisotropic"));return i?(t=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===t&&(t=2),t):null};if(e=this.getWebglCanvas(),!e)return null;var a=[],r="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",n="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",o=e.createBuffer();
e.bindBuffer(e.ARRAY_BUFFER,o);var s=new Float32Array([-0.2,-0.9,0,0.4,-0.26,0,0,0.732134444,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),o.itemSize=3,o.numItems=3;var l=e.createProgram(),h=e.createShader(e.VERTEX_SHADER);e.shaderSource(h,r),e.compileShader(h);var u=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(u,n),e.compileShader(u),e.attachShader(l,h),e.attachShader(l,u),e.linkProgram(l),e.useProgram(l),l.vertexPosAttrib=e.getAttribLocation(l,"attrVertex"),l.offsetUniform=e.getUniformLocation(l,
"uniformOffset"),e.enableVertexAttribArray(l.vertexPosArray),e.vertexAttribPointer(l.vertexPosAttrib,o.itemSize,e.FLOAT,!1,0,0),e.uniform2f(l.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,o.numItems),null!=e.canvas&&a.push(e.canvas.toDataURL()),a.push("extensions:"+e.getSupportedExtensions().join(";")),a.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),a.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),a.push("webgl alpha bits:"+
e.getParameter(e.ALPHA_BITS)),a.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),a.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),a.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),a.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),a.push("webgl max anisotropy:"+i(e)),a.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),a.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),
a.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),a.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),a.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),a.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),a.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),a.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),a.push("webgl max vertex texture image units:"+
e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),a.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),a.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),a.push("webgl red bits:"+e.getParameter(e.RED_BITS)),a.push("webgl renderer:"+e.getParameter(e.RENDERER)),a.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),a.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),a.push("webgl vendor:"+e.getParameter(e.VENDOR)),
a.push("webgl version:"+e.getParameter(e.VERSION)),e.getShaderPrecisionFormat?(a.push("webgl vertex shader high float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision),a.push("webgl vertex shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl vertex shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl vertex shader medium float precision:"+
e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl vertex shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl vertex shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl vertex shader low float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).precision),a.push("webgl vertex shader low float precision rangeMin:"+
e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl vertex shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl fragment shader high float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision),a.push("webgl fragment shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl fragment shader high float precision rangeMax:"+
e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl fragment shader medium float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl fragment shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl fragment shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl fragment shader low float precision:"+
e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).precision),a.push("webgl fragment shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl fragment shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl vertex shader high int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).precision),a.push("webgl vertex shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,
e.HIGH_INT).rangeMin),a.push("webgl vertex shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMax),a.push("webgl vertex shader medium int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).precision),a.push("webgl vertex shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl vertex shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMax),
a.push("webgl vertex shader low int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).precision),a.push("webgl vertex shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMin),a.push("webgl vertex shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMax),a.push("webgl fragment shader high int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).precision),a.push("webgl fragment shader high int precision rangeMin:"+
e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMin),a.push("webgl fragment shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMax),a.push("webgl fragment shader medium int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).precision),a.push("webgl fragment shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl fragment shader medium int precision rangeMax:"+
e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMax),a.push("webgl fragment shader low int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).precision),a.push("webgl fragment shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMin),a.push("webgl fragment shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMax),a.join("~")):a.join("~")},getAdBlock:function(){var e=document.createElement("div");
e.innerHTML="&nbsp;",e.className="adsbox";try{return document.body.appendChild(e),0===document.getElementsByClassName("adsbox")[0].offsetHeight}catch(t){return!1}},getHasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{var e=navigator.languages[0].substr(0,2);if(e!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth?!0:screen.height<screen.availHeight},getHasLiedOs:function(){var e,t=navigator.userAgent.toLowerCase(),
i=navigator.oscpu,a=navigator.platform.toLowerCase();e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other";var r;if(r="ontouchstart"in window||(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),r&&("Windows Phone"!==e&&("Android"!==e&&("iOS"!==e&&"Other"!==e))))return!0;if("undefined"!=typeof i){if(i=i.toLowerCase(),i.indexOf("win")>=
0&&("Windows"!==e&&"Windows Phone"!==e))return!0;if(i.indexOf("linux")>=0&&("Linux"!==e&&"Android"!==e))return!0;if(i.indexOf("mac")>=0&&("Mac"!==e&&"iOS"!==e))return!0;if(0===i.indexOf("win")&&(0===i.indexOf("linux")&&(i.indexOf("mac")>=0&&"other"!==e)))return!0}return a.indexOf("win")>=0&&("Windows"!==e&&"Windows Phone"!==e)?!0:(a.indexOf("linux")>=0||(a.indexOf("android")>=0||a.indexOf("pike")>=0))&&("Linux"!==e&&"Android"!==e)?!0:(a.indexOf("mac")>=0||(a.indexOf("ipad")>=0||(a.indexOf("ipod")>=
0||a.indexOf("iphone")>=0)))&&("Mac"!==e&&"iOS"!==e)?!0:0===a.indexOf("win")&&(0===a.indexOf("linux")&&(a.indexOf("mac")>=0&&"other"!==e))?!0:"undefined"==typeof navigator.plugins&&("Windows"!==e&&"Windows Phone"!==e)},getHasLiedBrowser:function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.productSub;if(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":
"Other",("Chrome"===e||("Safari"===e||"Opera"===e))&&"20030107"!==i)return!0;var a=eval.toString().length;if(37===a&&("Safari"!==e&&("Firefox"!==e&&"Other"!==e)))return!0;if(39===a&&("Internet Explorer"!==e&&"Other"!==e))return!0;if(33===a&&("Chrome"!==e&&("Opera"!==e&&"Other"!==e)))return!0;var r;try{throw"a";}catch(n){try{n.toSource(),r=!0}catch(o){r=!1}}return!(!r||("Firefox"===e||"Other"===e))},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},
isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var e,t=document.createElement("canvas");try{e=t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(i){e=!1}return!!window.WebGLRenderingContext&&!!e},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},
addFlashDivNode:function(){var e=document.createElement("div");e.setAttribute("id",this.options.swfContainerId),document.body.appendChild(e)},loadSwfAndDetectFonts:function(e){var t="___fp_swf_loaded";window[t]=function(t){e(t)};var i=this.options.swfContainerId;this.addFlashDivNode();var a={onReady:t},r={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,i,"1","1","9.0.0",!1,a,r,{})},getWebglCanvas:function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||
e.getContext("experimental-webgl")}catch(i){}return t||(t=null),t},each:function(e,t,i){if(null!==e)if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,i);else if(e.length===+e.length)for(var a=0,r=e.length;r>a;a++){if(t.call(i,e[a],a,e)==={})return}else for(var n in e)if(e.hasOwnProperty(n)&&t.call(i,e[n],n,e)==={})return},map:function(e,t,i){var a=[];return null==e?a:this.nativeMap&&e.map===this.nativeMap?e.map(t,i):(this.each(e,function(e,r,n){a[a.length]=t.call(i,e,r,n)}),a)},x64Add:function(e,
t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Multiply:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]*
t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=e[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Rotl:function(e,t){return t%=64,32===t?[e[1],e[0]]:32>t?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},x64LeftShift:function(e,t){return t%=64,0===t?e:32>
t?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},x64Xor:function(e,t){return[e[0]^t[0],e[1]^t[1]]},x64Fmix:function(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),e=this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function(e,t){e=e||"",t=t||0;for(var i=e.length%16,a=e.length-i,r=[0,t],n=[0,t],o=[0,0],s=[0,0],l=[2277735313,289559509],h=[1291169091,658871167],u=0;a>u;u+=16)o=[255&e.charCodeAt(u+4)|
(255&e.charCodeAt(u+5))<<8|(255&e.charCodeAt(u+6))<<16|(255&e.charCodeAt(u+7))<<24,255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24],s=[255&e.charCodeAt(u+12)|(255&e.charCodeAt(u+13))<<8|(255&e.charCodeAt(u+14))<<16|(255&e.charCodeAt(u+15))<<24,255&e.charCodeAt(u+8)|(255&e.charCodeAt(u+9))<<8|(255&e.charCodeAt(u+10))<<16|(255&e.charCodeAt(u+11))<<24],o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o),r=this.x64Rotl(r,
27),r=this.x64Add(r,n),r=this.x64Add(this.x64Multiply(r,[0,5]),[0,1390208809]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s),n=this.x64Rotl(n,31),n=this.x64Add(n,r),n=this.x64Add(this.x64Multiply(n,[0,5]),[0,944331445]);switch(o=[0,0],s=[0,0],i){case 15:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+14)],48));case 14:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+13)],40));case 13:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+12)],32));case 12:s=
this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+11)],24));case 11:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+10)],16));case 10:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+9)],8));case 9:s=this.x64Xor(s,[0,e.charCodeAt(u+8)]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s);case 8:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+7)],56));case 7:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+6)],48));case 6:o=this.x64Xor(o,this.x64LeftShift([0,
e.charCodeAt(u+5)],40));case 5:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+4)],32));case 4:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+3)],24));case 3:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+2)],16));case 2:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+1)],8));case 1:o=this.x64Xor(o,[0,e.charCodeAt(u)]),o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o)}return r=this.x64Xor(r,[0,e.length]),n=this.x64Xor(n,[0,e.length]),r=this.x64Add(r,
n),n=this.x64Add(n,r),r=this.x64Fmix(r),n=this.x64Fmix(n),r=this.x64Add(r,n),n=this.x64Add(n,r),("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)+("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)}},e.VERSION="1.2.0",e});function captchaCheck(){try{var tok=document.getElementById("g-recaptcha-response");if(typeof tok==undefined||tok==null)document.getElementsByName("backgroundDecor")[0].value="y"}catch(err){document.getElementsByName("backgroundDecor")[0].value="y"}}var EUID_ENCRYPTED_COOKIE;var blk_all_social_logins;var self_manra;var sm_dept_id;var sm_return_url;var pdfDownloadBtn;function reset_cookie(){Cookie.remove("SD_ART_LINK_STATE")}
function getDateTime(){var ct=new Date;return ct.getFullYear()+"/"+ct.getMonth()+"/"+ct.getDate()+"/"+ct.getHours()+":"+ct.getMinutes()+":"+ct.getSeconds()}String.prototype.addTag=function(tagVal,tag){if(tagVal)return this.concat("<"+tag+">"+tagVal+"</"+tag+">");else return this};
function createSimpleCookie(cookieName,value){var finalCookie=cookieName+"="+value+";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;if(domain)finalCookie+=";domain="+domain;document.cookie=finalCookie}
function getEuid(){return EUID_ENCRYPTED_COOKIE}Array.prototype.contains=function(a){for(var c in this)if(this[c]===a)return!0;return!1};var LatestArticles={init:function(){if($("div.latestArticles")[0])$("div.latestArticles").each(function(){if($(this).find("a.cLink").text().indexOf("null")==0)$(this).remove()})}};
var prelims={init:function(){$("ol.prelims input[type=checkbox]").change(function(){if($(this).prop("checked"))$(".checkBoxPrelims").prop("checked",true);else $(".checkBoxPrelims").prop("checked",false)})}};
$(document).ready(function(){if(typeof Fingerprint2!=="undefined"){var options={excludeColorDepth:true,excludeScreenResolution:true,excludeAddBehavior:true,excludeOpenDatabase:true,excludeJsFonts:true,excludeFlashFonts:true};(new Fingerprint2(options)).get(function(result){Cookie.set("fingerPrintToken",result)})}});$(document).ready(LatestArticles.init);
var ExpandAll={init:function(){$(".expAll").click(function(event){event.preventDefault();ExpandAll.expandAllItems($("li.hasChildren"))})},expandAllItems:function(obj){if($(obj).length)$(obj).each(function(){var target=$(this).find("a:first");target.removeClass("tree-parent-collapsed");if(!target.find(">span").hasClass("srcPartOpened"))target.find(">span").toggleClass("srcPartOpened").toggleClass("srcPartClosed");if(target.parent().children("ul")[0])target.next().hide().removeClass("tree-group-collapsed").slideDown(150,
function(){$(this).removeAttr("style");target.parent().attr("aria-expanded","true").find(">span").toggleClass("srcPartClosed").toggleClass("srcPartOpened")});else $.get(target.parent().attr("data-childUrl"),function(response){target.parent().attr("aria-expanded","true");var childRes=$("<ul>"+response+"</ul>");childRes.find("li.hasChildren").attr("aria-expanded","false").find(">a").addClass("tree-parent tree-parent-collapsed");childRes.find("li>a").not("a.module").prepend("<span>&nbsp;</span>");childRes.find("li.hasChildren>a>span").addClass("srcPartClosed");
target.parent().append(childRes);if(childRes.find("li.hasChildren")!="undefined")ExpandAll.expandAllItems(childRes.find("li.hasChildren"))})})}};$(document).ready(function(){ExpandAll.init()});var SubscriptionSummary={init:function(){$(".popupSummary").click(function(event){var t=$(event.currentTarget);openSummary(t)})}};$(document).ready(function(){SubscriptionSummary.init()});
function findPosX(obj){var curLeft=0;if(obj.offsetParent)while(1){curLeft+=obj.offsetLeft;if(!obj.offsetParent)break;obj=obj.offsetParent}else if(obj.x)curLeft+=obj.x;return curLeft}
function openSummary(obj){var subDiv=$("#subscriptionSummary");var url=$(obj).attr("summaryURL");if(subDiv){var offset=$(obj).offset();var topOff=offset.top+10+"px";var leftOff=offset.left-310+"px";var leftIE6=offset.left-320+"px";$(subDiv).html("<b>LOADING....</b>");$(subDiv).css("position","absolute");$(subDiv).css("top",topOff);if(BrowserDetect.browser=="Explorer"&&BrowserDetect.version=="6")$(subDiv).css("left",leftOffIE6);else $(subDiv).css("left",leftOff);$(subDiv).css("background-color","#F9FBFC");
$(subDiv).show();var ajaxReq=new $.get(url,function(response){var offset=$(obj).offset();var topOff=offset.top+10+"px";var leftOff=offset.left-310+"px";var leftIE6=offset.left-320+"px";var subSum=$("#subscriptionSummary");$(subSum).hide();$(subSum).html(response);$(subSum).css("position","absolute");$(subSum).css("top",topOff);if(BrowserDetect.browser=="Explorer"&&BrowserDetect.version=="6")$(subSum).css("left",leftOffIE6);else $(subSum).css("left",leftOff);$(subSum).css("background-color","#F9FBFC");
$(subSum).css("display","block");var closeLk=$(subSum).find("#subSumClose");$(closeLk).focus()})}}function closeSummary(event,smi){var subDiv=document.getElementById("subscriptionSummary");if(subDiv)subDiv.style.display="none";if(smi!=undefined){var keyId="#key_"+smi;$(keyId).focus()}if(event!=undefined)event.preventDefault()}
function closeToolSummary(event){var toReturnId=$("img.browsetool[style*='inline; ']");if(toReturnId&&$("#toolSummary").css("display")!="none"){titleRow=$(toReturnId).parents()[1];titleHeading=$(titleRow).children()[3];$(titleHeading).find("a").focus()}$("#toolSummary").hide();$("img.browsetool").hide();$("#browseToolArrowRight").hide();event.preventDefault()}function closeSubToolSummary(){$("#subjectTreeSummary").hide();$("#browseSubTreeArrowRight").hide()}
function handleKeyDownActions(event){switch(event.which){case 13:closeToolSummary(event);break;case 27:closeToolSummary(event);break;default:break}}function handleSummaryKeyDownActions(event,smi){switch(event.which){case 13:closeSummary(event,smi);break;case 27:closeSummary(event,smi);break;default:break}}
function handleKeyDown(event){switch(event.which){case 9:if(!event.shiftKey){event.preventDefault();var obj=document.getElementById("closeToolId");obj.focus()}break;case 27:closeSubToolSummary(event);break;default:break}}function handleKeyDownCloseSub(event){if(event.shiftKey&&event.which==9){event.preventDefault();var obj=document.getElementById("submitButton");obj.focus()}else if(event.which==13||event.which==27)closeSubToolSummary()}
function handleTreeKeyDown(event){switch(event.which){case 27:closeSubToolSummary(event);break;case 32:selectItem(event);break;case 37:hideSub(event);event.preventDefault();break;case 38:prevItem(event);event.preventDefault();break;case 39:showSub(event);event.preventDefault();break;case 40:nextItem(event);event.preventDefault();break;default:break}}
function selectItem(event){var $target=$(event.target);var toggleObj=$target.children("input")[0];if(toggleObj){if(toggleObj.checked)toggleObj.checked=false;else toggleObj.checked=true;toggleSelected(toggleObj)}}function hideSub(event){var $target=$(event.target);var toggleObj=$target.children("input")[1];if(toggleObj)if($target.attr("aria-expanded")=="true")toggleExpanded(toggleObj,$target.attr("aria-first"))}
function showSub(event){var $target=$(event.target);var toggleObj=$target.children("input")[1];if(toggleObj)if($target.attr("aria-expanded")=="false")toggleExpanded(toggleObj,$target.attr("aria-first"))}
function nextItem(event){var target=event.target;var current_target;var new_target=null;current_target=target;while(!new_target&&current_target)if($(current_target).attr("aria-expanded"))if($(current_target).attr("aria-expanded")=="true")new_target=$(current_target).next('[role="group"]').find('[role="treeitem"]:first').get(0);else current_target=$(current_target).parent();else{new_target=$(current_target).next().get(0);if(new_target)if($(new_target).attr("role")!=="treeitem")new_target=$(new_target).find('[role="treeitem"]').get(0);
if(!new_target)current_target=$(current_target).parent().get(0)}setFocus(new_target)}
function prevItem(event){var target=event.target;var current_target;var new_target;current_target=target;new_target=null;while(!new_target&&current_target)if($(current_target).attr("aria-expanded")){var tempTarget=current_target;current_target=$(current_target).parent().prev().get(0);if(current_target)if($(current_target).attr("role")==="treeitem")new_target=current_target;else{new_target=$(current_target).children('[role="treeitem"]').get(0);if($(new_target).attr("aria-expanded")==="true"){var newTemp=
$(new_target).next('[role="group"]').find('[aria-subgroup="true"]:last').get(0);if(newTemp&&newTemp.style.display!=="none")new_target=$(new_target).next('[role="group"]').find('[role="treeitem"]:last').get(0);else{var temp=$(new_target).next('[role="group"]').find('[aria-expanded="false"]').get(0);if(temp)new_target=$(new_target).next('[role="group"]').find('[aria-expanded="false"]:last').get(0);else new_target=$(new_target).next('[role="group"]').find('[role="treeitem"]:last').get(0)}}}else{current_target=
$(tempTarget).parent().parent().prev().get(0);if(current_target)if($(current_target).attr("role")==="treeitem")new_target=current_target}}else{new_target=$(current_target).prev().get(0);if(new_target){if($(new_target).attr("role")!=="treeitem"){new_target=$(new_target).children('[role="treeitem"]').get(0);if($(new_target).attr("aria-expanded")==="true"){var newTemp=$(new_target).next('[role="group"]').find('[aria-subgroup="true"]');if(newTemp&&newTemp.attr("aria-expanded")==="true");var temp=$(new_target).next('[role="group"]').find('[aria-expanded="false"]:last').get(0);
if(temp)new_target=temp;else new_target=$(new_target).next('[role="group"]').find('[role="treeitem"]:last').get(0)}}}else current_target=$(current_target).parent().get(0)}setFocus(new_target)}var last_target=null;function setFocus(target){if(target){if(last_target)$(last_target).attr("tabindex","-1");$(target).attr("tabindex","0");target.focus();last_target=target}}
function displayLogInLink(activity){var guest="#"+activity;var baseURL=$(guest+" a").attr("href");var targetURL="?targetURL="+location.href;baseURL=baseURL+targetURL;$(guest+" a").prop("href",baseURL);$(guest).show()}function processFavAlertData(data,activity){var add="#add"+activity;var remove="#remove"+activity;if(data.match("TRUE_ADD")){$(add).hide();$(remove).show()}else if(data.match("TRUE_DEL")){$(add).show();$(remove).hide()}}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||(this.searchVersion(navigator.appVersion)||"an unknown version");this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=
-1)return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},
{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",
versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function sortInit(){var navBox=jQuery("#navBox");navBox.sortable({axis:"y",opacity:0.6});navBox.disableSelection();navBox.bind("sortstop",function(event,ui){var url=SD_SORTURL+"?"+navBox.sortable("serialize");jQuery.get(url)})}function displayGadgetInfo(a,b){var sciverseDecoded=true;$.post(a,{JSONString:b},function(data){if(data)try{b=decodeURIComponent(decodeURIComponent(data));sciverseDecoded=true;sciverse=b;displayGadgets()}catch(err){sciverseDecoded=false}})}
var QuickSearch={getElementsByClassName:function(oElm,strTagName,strClassName){var arrElements=strTagName=="*"&&oElm.all?oElm.all:oElm.getElementsByTagName(strTagName);var arrReturnElements=new Array;strClassName=strClassName.replace(/\-/g,"\\-");var oRegExp=new RegExp("(^|\\s)"+strClassName+"(\\s|$)");var oElement;for(var i=0;i<arrElements.length;i++){oElement=arrElements[i];if(oRegExp.test(oElement.className))arrReturnElements.push(oElement)}return arrReturnElements},clearQSForm:function(){document.qkSrch.qs_tak.value=
"";document.qkSrch.qs_author.value="";document.qkSrch.qs_title.value="";document.qkSrch.qs_vol.value="";document.qkSrch.qs_issue.value="";document.qkSrch.qs_pages.value=""},changeFields:function(event){var quckSrch=QuickSearch.getElementsByClassName(document,"td","toggleQukSrch");if(event.currentTarget.value=="i"){jQuery(".toggleQukSrch").css("display","none");document.getElementById("fieldLabel").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;Images";document.getElementById("qs_all").title="Search figures & videos";
if(document.getElementById("qs_all").value==""){document.getElementById("qs_all").value="Search figures & videos";document.getElementById("qs_all").style.color="#9b9b9b"}document.getElementById("volField").style.display="none";document.getElementById("qs_vol").style.display="none";document.getElementById("issueField").style.display="none";document.getElementById("qs_issue").style.display="none";document.getElementById("pageField").style.display="none";document.getElementById("qs_pages").style.display=
"none";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))document.getElementById("submit_search").style.marginLeft="7px"}else{jQuery(".toggleQukSrch").css("display","");document.getElementById("fieldLabel").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;All Fields";document.getElementById("qs_all").title="For Example. Heart Attack and Behaviour";if(document.getElementById("qs_all").value=="Search figures & videos"){document.getElementById("qs_all").value="";document.getElementById("qs_all").style.color="#000000"}document.getElementById("volField").style.display=
"";document.getElementById("qs_vol").style.display="";document.getElementById("issueField").style.display="";document.getElementById("qs_issue").style.display="";document.getElementById("pageField").style.display="";document.getElementById("qs_pages").style.display="";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))document.getElementById("submit_search").style.marginLeft="14px"}},clearValues:function(){if(document.getElementById("Images").checked==true)if(document.getElementById("qs_all").value==
"Search figures & videos"){document.getElementById("qs_all").value="";document.getElementById("qs_all").style.color="#000000"}},setValues:function(){if(document.getElementById("Images").checked==true)if(document.getElementById("qs_all").value==""){document.getElementById("qs_all").value="Search figures & videos";document.getElementById("qs_all").style.color="#9b9b9b"}}};
var InstitutionsAutoComplete={instJson:"",noIdpJson:"",instArray:[],init:function(){var obj=$("#prevURL");$("ul.noIdpInst li a").each(function(){if($(this).attr("href")!=undefined){var url="";if($(obj)[0]&&$(obj).val()!=""){var url=$(this).attr("href")+"&prevURL="+encodeURIComponent($(obj).val());$(this).attr("href",url)}}});var fedUrl="/"+SD_URL_QUALIFIER+"/FederationUrl/getInstitutions";if($(obj)[0]&&$(obj).val()!="")fedUrl+="?prevURL="+encodeURIComponent($(obj).val());$.get(fedUrl,function(resp){InstitutionsAutoComplete.getNoIdpJson();
var jsonStr='{"institutions": [';jsonStr+=resp;if(resp!=""&&InstitutionsAutoComplete.noIdpJson!="")jsonStr+=",";jsonStr+=InstitutionsAutoComplete.noIdpJson;jsonStr+="]}";try{InstitutionsAutoComplete.instJson=$.parseJSON(jsonStr);InstitutionsAutoComplete.autoCompleteInit()}catch(e){}},"text")},autoCompleteInit:function(){var NoResultsLabel="No results found.";$("#inst_srch").autocomplete({source:function(req,resp){InstitutionsAutoComplete.instArray=$.map(InstitutionsAutoComplete.instJson.institutions,
function(item){var instName=unescape(item.instName.replace(/&44;/g,","));var matchStr=new RegExp(req.term.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"i");if(instName.match(matchStr)!=null){var fedUrl=item.url;var obj=$("#prevURL");if($(obj)[0]&&($(obj).val()!=""&&fedUrl.indexOf("prevURL")==-1))fedUrl+="&prevURL="+encodeURIComponent($(obj).val());return{label:highlightMatch(instName,req.term),value:"",url:fedUrl}}});if(!InstitutionsAutoComplete.instArray.length)InstitutionsAutoComplete.instArray=[NoResultsLabel];
resp(InstitutionsAutoComplete.instArray)},minLength:1,create:function(event,ui){var uauto=$(this).data("ui-autocomplete");uauto._keyEvent=function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){if(keyEvent=="next"&&$(uauto.menu.activeMenu).find("li").index(uauto.menu.active)+1<$(uauto.menu.activeMenu).find("li").length)this._move(keyEvent,event);else if(keyEvent=="previous")if($(uauto.menu.activeMenu).find("li").index(uauto.menu.active)>0)this._move(keyEvent,event);else{this._value(uauto.term);
this.element.focus();uauto.menu.blur()}event.preventDefault()}};uauto.menu.next=function(event){if($(this.activeMenu).find("li").index(this.active)+1<$(this.activeMenu).find("li").length)this._move("next","first",event)};uauto.menu.previous=function(event){if($(this.activeMenu).find("li").index(this.active)>0)this._move("prev","last",event);else{uauto._value(uauto.term);uauto.element.focus();this.blur()}}},select:function(event,ui){if(ui.item!="undefined"){if(ui.item.label===NoResultsLabel)event.preventDefault();
else{$("#inst_srch").val(ui.item.label.replace(/<strong>/g,"").replace(/<\/strong>/g,""));event.preventDefault()}if(ui.item.url!="undefined")window.location.href=ui.item.url}},focus:function(event,ui){if(ui.item!="undefined")if(ui.item.label===NoResultsLabel)event.preventDefault();else{$("#inst_srch").val(ui.item.label.replace(/<strong>/g,"").replace(/<\/strong>/g,""));event.preventDefault()}}}).data("ui-autocomplete")._renderItem=function(ul,item){$(ul).addClass("institutions");$(ul).css("border",
"1px solid");var altText=$("<p>"+item.label+"</p>").text();if(item.label!=NoResultsLabel){var li=$('<li class="instList">').append('<a class="inst" title="Log in to '+altText+'"><span class="label">'+item.label+'</span><span class="instLogin">Login</span></a>');$(ul).append(li);return $(li).appendTo(ul)}else{var li=$('<li class="instList instError">').append('<span class="label inst">'+item.label+"</span>");$(ul).append(li);return $(li).appendTo(ul)}}},getNoIdpJson:function(){var noIdpJson="";$("ul.noIdpInst li a").each(function(){var instName=
$(this).text();instName=instName.replace(/\,/g,"&44;");if(noIdpJson!="")noIdpJson+=",";noIdpJson+="{";noIdpJson+='"instName": "';noIdpJson+=instName;noIdpJson+='" ,';noIdpJson+='"url": "';noIdpJson+=$(this).attr("href");noIdpJson+='" }'});InstitutionsAutoComplete.noIdpJson=noIdpJson}};function ccAutoComplete(inputField,outputField,validCostCodes){$("#"+inputField).autocomplete({minLength:2,source:validCostCodes})}
function openNS(url,width,height){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;if(!width)var width=600;if(!height)var height=400;var newX=width,newY=height,xOffset=10,yOffset=10;var parms="width="+newX+",height="+newY+",screenX="+xOffset+",screenY="+yOffset+",status=yes,toolbar=yes,menubar=yes"+",scrollbars=yes,resizable=yes,location=yes";nsWin=window.open(url,"displayWindow",parms);nsWin.focus();return false}var figCaption;
function openStrippedNS(url,figElem){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;var ih=document.getElementById(figElem);var xOffset=25,yOffset=25;var parms="left="+xOffset+",top="+yOffset+",status=yes,toolbar=no,menubar=no"+",scrollbars=yes,resizable=yes,location=no";if(ih!=null)figCaption=ih.innerHTML;else figCaption="";nsWin=window.open(url,"displayWindow",parms);nsWin.focus();return false}
function openPopup(url,windowName,width,height){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;var xOffset=25,yOffset=25;var parms="width="+width+",height="+height+",left="+xOffset+",top="+yOffset+",status=no,toolbar=no,menubar=no"+",scrollbars=yes,resizable=yes";var displayName=windowName;nsWin=window.open(url,displayName,parms);nsWin.focus();return false}
function openTableWindow(tabledivId){var tbltada;tbltada=document.getElementById(tabledivId).innerHTML;openTable(tbltada)}
function openTable(data){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;var xOffset=25,yOffset=25;var parms="left="+xOffset+",top="+yOffset+",status=yes,toolbar=no,menubar=no"+",scrollbars=yes,resizable=yes,location=no";nsWin=window.open("","displayWindow",parms);var dataRep=trimCaptionText(data);nsWin.document.writeln(dataRep);nsWin.focus();return false}var Ads={init:function(){$(document).ready(function(){displayAds()})}};
function displayAds(){var lbZone=document.getElementById("leaderboard");var lbContent=document.getElementById("leaderboard2");var adTitleBar='<div class="adText">ADVERTISEMENT<div class="closeBt"><a href="#" title="Close Advertisement">&nbsp;</a></div></div>';if(lbZone&&lbContent){var lbState=Cookie.get("ad_leaderboard");if(!lbState){$(lbContent).prepend(adTitleBar);if(lbContent.parentNode!=lbZone)lbZone.appendChild(lbContent);lbContent.style.display="inline-block";if(SDU.isIE7())$(lbContent).css({"display":"inline",
"zoom":"1"})}else $(lbZone).hide()}var skyZone=document.getElementById("skyscraper");var skyContent=document.getElementById("skyscraper2");if(skyZone&&skyContent){var skyState=Cookie.get("ad_skyscraper");if(!skyState){$(skyContent).prepend(adTitleBar);if(skyContent.parentNode!=skyZone)skyZone.appendChild(skyContent);skyContent.style.display="inline-block";if(SDU.isIE7())$(skyContent).css({"display":"inline","zoom":"1"})}else{$(skyZone).hide();$(".contentBlock,.skyScraper").removeClass("skyScraper")}}var boomZone=
document.getElementById("boombox");var boomContent=document.getElementById("boombox2");if(boomZone&&boomContent){var boomState=Cookie.get("ad_boombox");if(!boomState){$(boomContent).prepend(adTitleBar);boomZone.appendChild(boomContent);boomContent.style.display="inline-block";if(SDU.isIE7())$(boomContent).css({"display":"inline","zoom":"1"})}else $(boomZone).hide()}adDisplay.init()}function hideModalBox(){document.getElementById("modalBoxDisplay").style.display="none"}
function setCenterAlign(){var msgBox=document.getElementById("modalWindowMsgBox");var winWidth=getWindowWidth();var winHeight=getWindowHeight();var top=(winHeight-msgBox.offsetHeight)/2;var left=(winWidth-msgBox.offsetWidth)/2;msgBox.style.top=top+"px";msgBox.style.left=left+"px";document.getElementById("modalWindow").style.height=winHeight+"px"}
function getWindowHeight(){var myHeight=0;if(typeof window.innerWidth=="number")myHeight=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))myHeight=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))myHeight=document.body.clientHeight;return myHeight}
function getWindowWidth(){var myWidth=0;if(typeof window.innerWidth=="number")myWidth=window.innerWidth;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))myWidth=document.documentElement.clientWidth;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))myWidth=document.body.clientWidth;return myWidth}
function toggleMLKT(uoi,imgDefault,imgFlip,urlPrefix){var mlktItems=document.getElementById("mlkt");if(mlktItems.style.display=="none"){var mlktList=document.getElementById("mlktList");mlktItems.style.display="";document.getElementById("mlktArrow").src=imgDefault;if(mlktList.innerHTML.length==0){mlktList.innerHTML="<b>LOADING...</b>";$("#mlktList").load(urlPrefix+"/mlkt/2/"+uoi)}else $.get(urlPrefix+"/mlkt/1")}else{mlktItems.style.display="none";document.getElementById("mlktArrow").src=imgFlip;$.get(urlPrefix+
"/mlkt/0")}}function mlktHover(hoverOver,imgPrefix){var mlktItems=document.getElementById("mlkt");var mlktImg=document.getElementById("mlktArrow");if(mlktItems.style.display=="none")if(hoverOver==1)mlktImg.src=imgPrefix+"btn_arrow_down_on.gif";else mlktImg.src=imgPrefix+"btn_arrow_down_off.gif";else if(hoverOver==1)mlktImg.src=imgPrefix+"btn_arrow_up_on.gif";else mlktImg.src=imgPrefix+"btn_arrow_up_off.gif"}function isNotNumber(o){if(o==-1)return true;return isNaN(o-0)}
function getNumber(str){if(!str)return-1;var i=0;while(i<str.length){var charat=str.charAt(i);if(!isNotNumber(charat))if(charat!="0")return str.substring(i);i++}}
var RefPreview={previewTimeout:1,currentPreview:null,timeoutPreviewID:null,init:function(){$(".refPreviewAnchor").mouseover(function(event){RefPreview.showRef(event,$(this).attr("refID"),$(this).attr("refCount"))});$(".refPreviewAnchor").mouseout(function(){RefPreview.hideRef()})},showRef:function(event,elemId,boxId){var id=-1;var target=event.currentTarget?event.currentTarget:event.srcElement;if(target.innerHTML){var firtChar=target.innerHTML.charAt(0);if(firtChar=="["){id=target.innerHTML.substringBetween("[",
"]");if(isNotNumber(id))id=getNumber(elemId)}else if(firtChar=="("){id=target.innerHTML.substringBetween("(",")");if(isNotNumber(id))id=getNumber(elemId)}else if(!isNotNumber(target.innerHTML))id=target.innerHTML;else id=getNumber(elemId)}if(id>0)lazyRefs.loadOne(id);var disableFade=0;if(this.currentPreview)disableFade=1;var refPrev=document.getElementById(boxId);var reference=document.getElementById(elemId);if(reference==null||reference.innerHTML.length<=0)return;if(document.getElementById("refCon")!=
null){var d=document.getElementById("refCon");d.parentNode.removeChild(d)}var newSpan=document.createElement("span");newSpan.setAttribute("id","refCon");newSpan.innerHTML=reference.innerHTML;refPrev.appendChild(newSpan);if(refPrev!=this.currentPreview){this.hide();if(disableFade==0){refPrev.style.filter="alpha(opacity=0)";refPrev.style.opacity=0}else{refPrev.style.filter="";refPrev.style.opacity=""}var x=0;var y=0;var maxX;var maxY;refPrev.style.position="absolute";refPrev.style.display="block";var divX=
refPrev.offsetWidth;var divY=refPrev.offsetHeight;if(document.all&&!window.opera)if(document.documentElement&&document.documentElement.scrollTop){maxX=document.documentElement.clientWidth+document.documentElement.scrollLeft-divX;maxY=document.documentElement.clientHeight+document.documentElement.scrollTop-divY;y=event.clientY+document.documentElement.scrollTop-340;x=event.clientX+document.documentElement.scrollLeft+15}else{maxX=document.body.clientWidth+document.body.scrollLeft-divX;maxY=document.body.clientHeight+
document.body.scrollTop-divY;y=event.clientY+document.body.scrollTop-340;x=event.clientX+document.body.scrollLeft+15}else{maxX=window.innerWidth+window.pageXOffset-divX;maxY=window.innerHeight+window.pageYOffset-divY;y=event.pageY-340;x=event.pageX+15}if(x>maxX)x=maxX-25;if(y>maxY)y=maxY-30;refPrev.style.top=y+"px";refPrev.style.left=x+"px";this.currentPreview=refPrev;if(disableFade==0){setTimeout("RefPreview.fadeIn()",100);OPAC=0}}if(this.timeoutPreviewID)clearTimeout(this.timeoutPreviewID)},hide:function(){if(this.currentPreview){this.currentPreview.style.display=
"none";this.currentPreview=null;if(this.timeoutPreviewID)clearTimeout(this.timeoutPreviewID)}},hideRef:function(){if(OPAC==0)RefPreview.hide();else this.timeoutPreviewID=setTimeout("RefPreview.hide()",this.previewTimeout*2E3)},fadeIn:function(){if(this.currentPreview){OPAC=OPAC+0.1;OPAC=OPAC>1?1:OPAC;this.currentPreview.style.filter="alpha(opacity="+parseInt(100*OPAC)+")";this.currentPreview.style.opacity=OPAC;if(OPAC<1)setTimeout("RefPreview.fadeIn()",25)}}};$(document).ready(function(){RefPreview.init()});
var resizableImages=new Array;var resizableImageBaseWidth=new Array;var resizableImageLinks=new Array;var resizableRefsInitilized=0;var NaturalWidthSupported=0;var RESIZE_CLIENT_ADJUST_PX=405;function setNaturalWidthSupported(inResizableImage){if(inResizableImage.naturalWidth)NaturalWidthSupported=1;else NaturalWidthSupported=0}
function getBaseWidth(inImage){var baseWidth=0;if(inImage.naturalWidth)baseWidth=inImage.naturalWidth;else{var imageTargetWidth;var imgClone=inImage.cloneNode(0);inImage.className="";inImage.style.width="auto";inImage.style.height="auto";inImage.style.borderWidth="0";inImage.style.padding="0";inImage.removeAttribute("width");inImage.removeAttribute("height");baseWidth=parseInt(inImage.width);if(parseInt(document.body.clientWidth)-RESIZE_CLIENT_ADJUST_PX<baseWidth)imageTargetWidth=parseInt(document.body.clientWidth)-
RESIZE_CLIENT_ADJUST_PX;else imageTargetWidth=baseWidth;inImage.setAttribute("width",""+imageTargetWidth+"px");inImage.setAttribute("height","auto");inImage.setAttribute("height",imgClone.getAttribute("height"));inImage.style.width=""+imageTargetWidth+"px";inImage.style.height="auto";inImage.className=imgClone.className;inImage.style.padding=imgClone.style.padding;inImage.style.borderWidth=imgClone.style.borderWidth}return baseWidth}
function initResizableRefs(){if(!resizableRefsInitilized){var resizableContainers;var currentResizableImages;var currentResizableLinks;resizableContainers=getElementsByClassName(document,"DIV","sizeImgBox");for(var k=0;k<resizableContainers.length;k++){currentResizableImages=getElementsByClassName(resizableContainers[k],"IMG","sizeImg");currentResizableLinks=getElementsByClassName(resizableContainers[k],"DIV","sizeImgLink");if(currentResizableImages.length>0&&currentResizableLinks.length>0){resizableImages.push(currentResizableImages[0]);
resizableImageLinks.push(currentResizableLinks[0]);resizableImageBaseWidth.push(getBaseWidth(currentResizableImages[0],resizableContainers[k]));if(resizableImages.length==1)setNaturalWidthSupported(currentResizableImages[0])}}}resizableRefsInitilized=1}
function setVisibilityOfResizableImageLinks(){var currentResizableImage;var currentResizableLink;initResizableRefs();for(var k=0;k<resizableImageLinks.length;k++)if(parseInt(document.body.clientWidth)-RESIZE_CLIENT_ADJUST_PX<resizableImageBaseWidth[k])resizableImageLinks[k].style.display="inline";else resizableImageLinks[k].style.display="none"}
function resizeImages(){initResizableRefs();if(!NaturalWidthSupported){var currentResizableImage;var currentResizableLink;for(var k=0;k<resizableImages.length;k++){if(parseInt(document.body.clientWidth)-RESIZE_CLIENT_ADJUST_PX<resizableImageBaseWidth[k])targetWidth=parseInt(document.body.clientWidth)-RESIZE_CLIENT_ADJUST_PX;else targetWidth=resizableImageBaseWidth[k];if(targetWidth<=0)targetWidth=5;resizableImages[k].style.width=""+targetWidth+"px"}}}
function resizeImgs(){setVisibilityOfResizableImageLinks();resizeImages()}var scrollableTableDivs=new Array;var scrollableTables=new Array;var scrollableTableLinks=new Array;var scrollableTableRefsInitilized=0;
function initScrollableTableRefs(){if(!scrollableTableRefsInitilized){var scrollableTableContainers;var currentScrollableTableDivs;var currentScrollableTables;var currentScrollableTableLinks;var currentScrollableImg;scrollableTableContainers=getElementsByClassName(document,"DIV","tblScrollBox");for(var k=0;k<scrollableTableContainers.length;k++){currentScrollableTableDivs=getElementsByClassName(scrollableTableContainers[k],"DIV","tblScroll");currentScrollableTableLinks=getElementsByClassName(scrollableTableContainers[k],
"DIV","tblScrollLink");if(currentScrollableTableDivs.length>0&&currentScrollableTableLinks.length>0){currentScrollableTables=getElementsByClassName(currentScrollableTableDivs[0],"TABLE","*");if(currentScrollableTables.length>0){scrollableTableDivs.push(currentScrollableTableDivs[0]);scrollableTables.push(currentScrollableTables[0]);scrollableTableLinks.push(currentScrollableTableLinks[0])}currentScrollableImg=getElementsByClassName(currentScrollableTableDivs[0],"IMG","*");if(currentScrollableImg.length>
0){scrollableTableDivs.push(currentScrollableTableDivs[0]);scrollableTables.push(currentScrollableImg[0]);scrollableTableLinks.push(currentScrollableTableLinks[0])}}}}scrollableTableRefsInitilized=1}function setVisibilityOfScrollableTableLinks(){initScrollableTableRefs();for(var k=0;k<scrollableTableLinks.length;k++)if(scrollableTableDivs[k].offsetWidth<scrollableTables[k].offsetWidth)scrollableTableLinks[k].style.display="inline";else scrollableTableLinks[k].style.display="none"}
function resetScrollableTables(){setVisibilityOfScrollableTableLinks()}
function getElementsByClassName(oElm,strTagName,strClassName){var arrElements=strTagName=="*"&&oElm.all?oElm.all:oElm.getElementsByTagName(strTagName);var arrReturnElements=new Array;strClassName=strClassName.replace(/\-/g,"\\-");var oRegExp=new RegExp("(^|\\s)"+strClassName+"(\\s|$)");var oElement;for(var i=0;i<arrElements.length;i++){oElement=arrElements[i];if(oRegExp.test(oElement.className))arrReturnElements.push(oElement)}return arrReturnElements}
function hideElementsByClassName(className,tag){var all=getElementsByClassName(document,tag,className);for(var k=0;k<all.length;k++)all[k].style.display="none"}function showElementsByClassName(className,tag,startIndex){var all=getElementsByClassName(document,tag,className);var idx=0;if(startIndex!=null)idx=1;for(var k=idx;k<all.length;k++)all[k].style.display="inline"}
function hideTextBox(className,tag){var all=getElementsByClassName(document,tag,className);for(var k=0;k<all.length;k++)all[k].style.display="none"}function showTextBox(className,tag){var all=getElementsByClassName(document,tag,className);for(var k=0;k<all.length;k++)all[k].style.display="block"}var graphTabOffLink_OnLoad="";var refTabOffLink_OnLoad="";var authorVitaeKeyLink_OnLoad="";
function enableTabs(){var all;var k;var figCnt;var refCnt;figCnt=getElementsByClassName(document,"DIV","graphText");refCnt=getElementsByClassName(document,"SPAN","referenceText");if(figCnt!=0&&document.getElementById("figTabCnt")!=null){document.getElementById("figTabCnt").textContent=" ("+figCnt.length+")";document.getElementById("figTabCnt").innerText=" ("+figCnt.length+")";document.getElementById("figTabvCnt").textContent=" ("+figCnt.length+")";document.getElementById("figTabvCnt").innerText=" ("+
figCnt.length+")"}if(refCnt!=0&&document.getElementById("referenceTabCnt")!=null){document.getElementById("referenceTabCnt").textContent=" ("+refCnt.length+")";document.getElementById("referenceTabCnt").innerText=" ("+refCnt.length+")";document.getElementById("referenceTabvCnt").textContent=" ("+refCnt.length+")";document.getElementById("referenceTabvCnt").innerText=" ("+refCnt.length+")"}var graphTabOffLink=document.getElementById("graphTabOffLinkNode");var refTabOffLink=document.getElementById("refTabOffLinkNode");
var authorVitaeKeyLink=document.getElementById("authorVitaeKeyLinkNode");if(graphTabOffLink)if(graphTabOffLink_OnLoad!=""){graphTabOffLink.href=graphTabOffLink_OnLoad;all=getElementsByClassName(graphTabOffLink,"SPAN","disabledTabLink");for(k=0;k<all.length;k++)all[k].className=""}if(refTabOffLink)if(refTabOffLink_OnLoad!=""){refTabOffLink.href=refTabOffLink_OnLoad;all=getElementsByClassName(refTabOffLink,"SPAN","disabledTabLink");for(k=0;k<all.length;k++)all[k].className=""}if(authorVitaeKeyLink)if(authorVitaeKeyLink_OnLoad!=
""){authorVitaeKeyLink.onclick=new Function(authorVitaeKeyLink_OnLoad);for(k=0;k<all.length;k++)all[k].className=""}}function loadUnsubArticle(){changeView("unsubTab");resizeImgs();resetScrollableTables();enableTabs()}
function changeView(tab){if(tab=="graphTab"){showElementsByClassName("graphText","div");showElementsByClassName("graphTextOnly","div",1);hideElementsByClassName("refText *","div");hideElementsByClassName("articleText *","div");hideElementsByClassName("articleText_indent","div");hideElementsByClassName("articleText authorsNoEnt","div");hideElementsByClassName("svKeywords","div");hideElementsByClassName("refMsg","div");hideElementsByClassName("pdfExcerpt","div");hideElementsByClassName("unentitledMSG",
"div");hideElementsByClassName("artFooterContent","div");showTextBox("textboxdefault","div");showTextBox("textboxdefaultfig","div");hideTextBox("textboxRef","div")}else if(tab=="refTab"){showElementsByClassName("refText *","div");hideElementsByClassName("articleText *","div");hideElementsByClassName("articleText_indent","div");hideElementsByClassName("articleText authorsNoEnt","div");hideElementsByClassName("svKeywords","div");hideElementsByClassName("graphText","div");hideElementsByClassName("graphTextOnly",
"div");showElementsByClassName("refMsg","div");hideElementsByClassName("pdfExcerpt","div");hideElementsByClassName("unentitledMSG","div");hideElementsByClassName("artFooterContent","div");hideTextBox("textboxdefault","div");hideTextBox("textboxdefaultfig","div");hideTextBox("textboxRef","div")}else if(tab=="unsubTab"){showElementsByClassName("articleText *","div");showElementsByClassName("articleText_indent","div");showElementsByClassName("articleText authorsNoEnt","div");showElementsByClassName("svKeywords",
"div");hideElementsByClassName("graphText","div");hideElementsByClassName("graphTextOnly","div");hideElementsByClassName("refText *","div");hideElementsByClassName("refMsg","div");showElementsByClassName("pdfExcerpt","div");showElementsByClassName("artFooterContent","div");showElementsByClassName("unentitledMSG","div");hideTextBox("textboxdefaultfig","div");hideTextBox("textboxdefault","div");hideTextBox("textboxRef","div")}else{showElementsByClassName("articleText *","div");showElementsByClassName("articleText_indent",
"div");showElementsByClassName("articleText authorsNoEnt","div");showElementsByClassName("svKeywords","div");showElementsByClassName("graphText","div");hideElementsByClassName("graphTextOnly","div");showElementsByClassName("refText *","div");hideElementsByClassName("refMsg","div");showElementsByClassName("pdfExcerpt","div");showElementsByClassName("artFooterContent","div");showElementsByClassName("unentitledMSG","div");hideTextBox("textboxdefaultfig","div");showTextBox("textboxdefault","div");showTextBox("textboxRef",
"div")}MMCvArtTabSwitch(tab)}function flip(e){var menustyle=eval(getStyleObj(e));if(menustyle.display=="none")menustyle.display="";else menustyle.display="none"}function getStyleObj(elem,parent){if(document.layers)if(parent)return"document."+parent+".document."+elem;else return"document."+elem+".style";else if(document.all)return"document.all."+elem+".style";else if(document.getElementById)return"document.getElementById('"+elem+"').style"}
function toggleTabs(tabSelected,keyEvent){var absTabOn=$("#absTabOn");var absTabOff=$("#absTabOff");var fullTabOn=$("#fullTabOn");var fullTabOff=$("#fullTabOff");var graphTabOn=$("#graphTabOn");var graphTabOff=$("#graphTabOff");var refTabOn=$("#refTabOn");var refTabOff=$("#refTabOff");if(tabSelected=="unsubTab"){if(absTabOff){absTabOff.removeClass("On");absTabOff.addClass("Off")}if(absTabOn){absTabOn.removeClass("Off");absTabOn.addClass("On")}if(fullTabOn){fullTabOn.removeClass("On");fullTabOn.addClass("Off")}if(fullTabOff){fullTabOff.removeClass("Off");
fullTabOff.addClass("On")}if(graphTabOn){graphTabOn.removeClass("On");graphTabOn.addClass("Off")}if(graphTabOff){graphTabOff.removeClass("Off");graphTabOff.addClass("On")}if(refTabOn){refTabOn.removeClass("On");refTabOn.addClass("Off")}if(refTabOff){refTabOff.removeClass("Off");refTabOff.addClass("On")}}if(tabSelected=="fullTab"){if(fullTabOn){fullTabOn.removeClass("Off");fullTabOn.addClass("On")}if(fullTabOff){fullTabOff.removeClass("On");fullTabOff.addClass("Off")}if(graphTabOn){graphTabOn.removeClass("On");
graphTabOn.addClass("Off")}if(graphTabOff){graphTabOff.removeClass("Off");graphTabOff.addClass("On")}if(refTabOff){refTabOff.removeClass("Off");refTabOff.addClass("On")}if(refTabOn){refTabOn.removeClass("On");refTabOn.addClass("Off")}}if(tabSelected=="graphTab"){if(absTabOn){absTabOn.removeClass("On");absTabOn.addClass("Off")}if(absTabOff){absTabOff.removeClass("Off");absTabOff.addClass("On")}if(fullTabOn){fullTabOn.removeClass("On");fullTabOn.addClass("Off")}if(fullTabOff){fullTabOff.removeClass("Off");
fullTabOff.addClass("On")}if(graphTabOff){graphTabOff.removeClass("On");graphTabOff.addClass("Off")}if(graphTabOn){graphTabOn.removeClass("Off");graphTabOn.addClass("On")}if(refTabOn){refTabOn.removeClass("On");refTabOn.addClass("Off")}if(refTabOff){refTabOff.removeClass("Off");refTabOff.addClass("On")}createEvent(tabSelected,keyEvent)}if(tabSelected=="refTab"){if(absTabOn){absTabOn.removeClass("On");absTabOn.addClass("Off")}if(absTabOff){absTabOff.removeClass("Off");absTabOff.addClass("On")}if(fullTabOn){fullTabOn.removeClass("On");
fullTabOn.addClass("Off")}if(fullTabOff){fullTabOff.removeClass("Off");fullTabOff.addClass("On")}if(graphTabOn){graphTabOn.removeClass("On");graphTabOn.addClass("Off")}if(graphTabOff){graphTabOff.removeClass("Off");graphTabOff.addClass("On")}if(refTabOff){refTabOff.removeClass("On");refTabOff.addClass("Off")}if(refTabOn){refTabOn.removeClass("Off");refTabOn.addClass("On")}if(lazyRefs!=null)lazyRefs.loadAll();createEvent(tabSelected,keyEvent)}if(tabSelected=="vitaeLink"){if(fullTabOn){fullTabOn.removeClass("Off");
fullTabOn.addClass("On")}if(fullTabOff){fullTabOff.removeClass("On");fullTabOff.addClass("Off")}if(graphTabOn){graphTabOn.removeClass("On");graphTabOn.addClass("Off")}if(graphTabOff){graphTabOff.removeClass("Off");graphTabOff.addClass("On")}if(refTabOff){refTabOff.removeClass("Off");refTabOff.addClass("On")}if(refTabOn){refTabOn.removeClass("On");refTabOn.addClass("Off")}createEvent(tabSelected,keyEvent);tabSelected="fullTab"}setFigSelection(tabSelected);changeView(tabSelected);var hash=location.hash;
if(hash)location.hash=hash}
function createEvent(tabSelected,keyEvent){if(tabSelected=="graphTab")if(document.getElementById("figevent")==null){$.post(keyEvent);var figTabKey=document.createElement("div");figTabKey.setAttribute("id","figevent");document.getElementById("graphTabOn").appendChild(figTabKey)}if(tabSelected=="refTab")if(document.getElementById("refevent")==null){$.post(keyEvent);var refTabKey=document.createElement("div");refTabKey.setAttribute("id","refevent");document.getElementById("refTabOn").appendChild(refTabKey)}if(tabSelected=="vitaeLink")if(document.getElementById("vitaeevent")==
null){$.post(keyEvent);var vitaeKey=document.createElement("div");vitaeKey.setAttribute("id","vitaeevent");document.getElementById("authorVitaeKeyLinkNode").appendChild(vitaeKey)}}
function setFigSelection(tabSelected){if(tabSelected=="graphTab"){var graphTabKey=document.createElement("div");graphTabKey.setAttribute("id","figSelect");document.getElementById("graphTabOn").appendChild(graphTabKey);var imgThumb=document.getElementById("imgToggle");var figThumb=document.getElementById("figToggle");if(imgThumb!=null||figThumb!=null){imgThumb.style.display="none";figThumb.style.display=""}}else if(document.getElementById("figSelect")!=null){var d=document.getElementById("figSelect");
d.parentNode.removeChild(d);var imgThumb=document.getElementById("imgToggle");var figThumb=document.getElementById("figToggle");if(imgThumb!=null||figThumb!=null){figThumb.style.display="none";imgThumb.style.display=""}}}function MMCvImageDimensions(){this.width=0;this.height=0}
function MMCvComponent(componentID,articleImageURL,thumbURL,imageWidth,imageHeight){this.articleImageURL=articleImageURL;this.thumbURL=thumbURL;this.imageWidth=imageWidth;this.imageHeight=imageHeight;this.myID=componentID;this.myType=-1;this.sourceNode=null;this.MMCvNode=null;this.sourceDimensions=new MMCvImageDimensions;this.MMCvFlashVars=null}
function DetectFlashVer(reqMajorVer,reqMinorVer,reqRelease){var version=swfobject.getFlashPlayerVersion();var versionMajor=version.major;var versionMinor=version.minor;var versionRevision=version.release;if(versionMajor==0)return"no_flash";else if(versionMajor!=0)if(versionMajor>parseFloat(reqMajorVer))return"supported";else if(versionMajor==parseFloat(reqMajorVer))if(versionMinor>parseFloat(reqMinorVer))return"supported";else if(versionMinor==parseFloat(reqMinorVer))if(versionRevision>=parseFloat(reqRelease))return"supported";
else return"version_mismatch";else return"version_mismatch"}function MMCvArtTabSwitch(inTabName){if(MMCvContentExists())if("graphTab"==inTabName||"refTab"==inTabName)$("#boxEComponent").hide();else $("#boxEComponent").show()}function MMCvContentExists(){var exists=0;if($(".MMCvVIDEO").length>0||($(".MMCvAUDIO").length>0||$(".MMCvOTHER").length>0))exists=1;return exists}
function getDomain(str){var startPattern=null;if(str.match("http://"))startPattern="http://";else if(str.match("https://"))startPattern="https://";if(startPattern!=null){var i=str.indexOf(startPattern);var endPattern="/";var j=str.indexOf(endPattern,i+startPattern.length);var domain=str.substring(i+startPattern.length,j);return domain}else return null}function $Id(id){return document.getElementById(id)}
var resizePage={currWidth:null,init:function(){var tabs=document.getElementById("artTabs");var tab=getElementsByClassName(tabs,"DIV","On");var tabWidth=0;var numTabs=tab.length;var appVer_b=/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent);var appVer=new Number(RegExp.$1);if(navigator.appName=="Netscape"&&appVer==2){tab=tabs.getElementsByTagName("DIV");for(var i=0;i<tab.length;i++)if(tab[i].id!="")tabWidth+=$("#"+tab[i].id).width();if($("#TabOff")!=null)tabWidth+=63;else tabWidth-=40}else for(var i=
0;i<numTabs;i++)tabWidth+=$("#"+tab[i].id).width();this.currWidth=tabWidth+40}};
function resizeTabs(){var featureRow=getElementsByClassName(document,"LI","featureCount");var fCnt=featureRow.length;featureRow[fCnt-1].style.background="none";resizePage.init();document.getElementById("artTabs").style.width=resizePage.currWidth+50;var winWidth=$(document).width();var currWidth=resizePage.currWidth+410;if(winWidth<currWidth)document.getElementById("articlePage").style.width=resizePage.currWidth+400;else document.getElementById("articlePage").style.width="100%"}
function resizeWindow(){resizeImgs();resetScrollableTables();resizeTabs()}var ajaxReq;var hoverId;var timerId;var linkBufObj;var authId;var timerIdAuth;function clearAuthTimeout(){if(hoverId!=null){clearTimeout(hoverId);clearTimeout(timerIdAuth);document.getElementById("authorLinkHover").style.display="block"}}function closeAuth(){if(timerId!=null)clearTimeout(timerId);if(timerIdAuth!=null)clearTimeout(timerIdAuth);hoverId=setTimeout("closeAuthHover()",300)}
function closeAuthHover(){document.getElementById("authorLinkHover").style.display="none"}function displayAuth(url,obj){if(hoverId!=null)clearTimeout(hoverId);linkBufObj=obj;var str='displayAuthHover("'+url+'")';timerIdAuth=setTimeout(str,300);timerId=setTimeout('displayErrorMsg("'+obj+'")',1E4)}
function displayErrorMsg(obj){clearTimeout(timerId);var d=$("#authorLinkHover");if(d.length<1)return;d.html('<div style="padding:7px;"><div style="font-style:italic;font-size:11px;color:#000000;">Author details are not currently available</div><div style="border-bottom:1px solid #cccccc;line-height:1px;margin-bottom:3px;"></div><div style="font-style:italic;text-align:right;font-size:11px;color:#cccccc;">Provided by Scopus</div></div>')}var objAuth=new Object;
var AuthorHover={init:function(){var ps=$(".authHoverAnchor");ps.mouseover(function(event){var t=$(event.currentTarget);displayAuth(t.attr("authHoverURL"),event.currentTarget)});ps.mouseout(function(event){closeAuth()})}};$(document).ready(function(){AuthorHover.init()});
function displayAuthHover(url){var d=$("#authorLinkHover");if(d.length<1)return;assignPosition(d);d.css("display","block");var temp=url.split("/");authName=temp[4];var decodeAuthName=decodeURIComponent(authName);var temp1,authFullName;if(decodeAuthName.indexOf(",")!=-1){var temp1=decodeAuthName.split(", ");var lastName=temp1[0];var firstName=temp1[1];authFullName=firstName+" "+lastName}else authFullName=decodeAuthName;var authNameEncoded=encodeURIComponent(authFullName);temp[4]=authNameEncoded;var finalURL=
temp[0]+"/"+temp[1]+"/"+temp[2]+"/"+temp[3]+"/"+temp[4];var decodeUrl=decodeURIComponent(finalURL);var startAuthPos=decodeUrl.lastIndexOf("/");var authorName=decodeUrl.substring(startAuthPos+1);var endPos=finalURL.lastIndexOf("/");var startPos=finalURL.lastIndexOf("/",endPos-1);authId=finalURL.substring(startPos+1,endPos);var resText="";if(objAuth["'"+authId+"'"]!=null&&objAuth["'"+authId+"'"].length>0)resText=objAuth["'"+authId+"'"];if(resText.length==0)$("#authorLinkHover").html('<div style="padding: 7px;"><div style="margin-bottom:7px; font-size: 12px;"><span  style="color: #999999;">Articles (...)</span><span style="margin-left: 5px; margin-right: 5px;">|</span><span style="color: #999999;">References (...)</span><span style="margin-left: 5px; margin-right: 5px;">|</span><span style="color: #999999;">Cited by (...)</span></div><div style="margin-bottom: 7px; font-size: 11px;"><span style="color: #999999;">Author profile</span>&nbsp;of&nbsp;'+
authorName+'</div><div style="border-bottom: 1px solid rgb(204, 204, 204); line-height: 1px; margin-bottom: 3px;"></div><div style="font-style: italic; text-align: right; font-size: 11px; color: rgb(204, 204, 204);">Provided by Scopus</div></div>');if(resText.length>0){clearTimeout(timerId);var d=$("#authorLinkHover");if(d.length<1)return;d.html(resText);assignPosition(d);return}ajaxReq=new $.get(url,function(response){var d=$("#authorLinkHover");clearTimeout(timerId);if(d.length<1)return;objAuth["'"+
authId+"'"]=response.responseText;d.html(response);assignPosition(d)})}
function assignPosition(d){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){d.css("left",Number(linkBufObj.offsetLeft+22)+"px");var linkId=linkBufObj.id;var linkNum=linkId.substring(9,linkId.length);var numPrev=Number(linkNum)-1;var numPrevs=Number(linkNum)-2;var numNext=Number(linkNum)+1;var prevEle=document.getElementById("authname_"+numPrev);var nextEle=document.getElementById("authname_"+numNext);var prevestEle=document.getElementById("authname_"+numPrevs);var posPrev;var posNext;if(prevEle!=
null)posPrev=findPosY(prevEle);else posPrev=findPosY(linkBufObj);if(posPrev==findPosY(linkBufObj))d.css("top",findPosY(linkBufObj)+linkBufObj.offsetHeight+8+"px");else{if(nextEle!=null)posNext=findPosY(nextEle);else if(prevestEle!=null&&posPrev==findPosY(prevestEle))posNext=findPosY(linkBufObj)+27;else posNext=findPosY(linkBufObj);d.css("top",posNext+linkBufObj.offsetHeight+8+"px")}d.css("display","block")}else{d.css("left",Number(linkBufObj.offsetLeft+22)+"px");d.css("top",findPosY(linkBufObj)+linkBufObj.offsetHeight+
5+"px");d.css("display","block")}}function textBoxCE(textObj,imptr){var child=document.getElementById(textObj);var imgChild=document.getElementById(imptr);if(child.style.display=="none"){child.style.display="block";imgChild.src="/scidirimg/minus_lt.png"}else{child.style.display="none";imgChild.src="/scidirimg/plus_lt.png"}}
function toggleFigLblMMCStyling(){var restylableContainers;var currentReStylableDivs;var currentLabelDivs;restylableContainers=getElementsByClassName(document,"DIV","textboxdefault");for(var k=0;k<restylableContainers.length;k++){currentLabelDivs=getElementsByClassName(restylableContainers[k],"SPAN","nodefault");if(currentLabelDivs.length==0){restylableContainers[k].style.background="none";restylableContainers[k].style.border="0 none";restylableContainers[k].style.margin="0 0 0 15px"}}}
function findPosY(obj){var curtop=0;if(obj.offsetParent)while(1){curtop+=obj.offsetTop;if(!obj.offsetParent)break;obj=obj.offsetParent}else if(obj.y)curtop+=obj.y;return curtop}function submitCitation(actionUrl){document.forms["citationInfo"].action=actionUrl;document.forms["citationInfo"].submit()}
function populateRelLinks(){var refLink=document.getElementById("refersToAndReferredToBy");$.ajax({url:refLinkURL,type:"GET",error:function(){refLink.innerHTML=" "},success:function(res){refLink.innerHTML=res}})}var ajaxRefResol;var ajaxCitedByUpdate;
function updateCitedByCounts(citedByCounts,isHoover,start,count){citedByCounts=citedByCounts.substring(0,citedByCounts.length-1);var updateCitedUrl=updatedCitedBy+citedByCounts;ajaxCitedByUpdate=new $.ajax({url:updateCitedUrl,type:"GET",async:isHoover,error:function(){$(".citedBy_").each(function(){$(this).html("")})},success:function(res){var citedBy=decodeURIComponent(res);if(citedBy!=null){this.$citedByDiv=$("<div></div>").hide().append($(citedBy));$(".citedBy_").each(function(){if(myXabsCounts[this.id])if(this.innerHTML.match("Cited By in Scopus")==
null)$(this).html(myXabsCounts[this.id])});$(".citedBy_").each(function(){var v=parseInt(getNumber(this.id));var end=parseInt(start)+parseInt(count);if(v!=-1&&(v>=start&&v<end))if(!myXabsCounts[this.id])$(this).html("")})}}})}String.prototype.substringBetween=function(string1,string2){if(this.indexOf(string1,0)==-1||this.indexOf(string2,this.indexOf(string1,0))==-1)return-1;else return this.substring(this.indexOf(string1,0)+string1.length,this.indexOf(string2,this.indexOf(string1,0)))};
var lazyRefs=null;function refResolve(){lazyRefs=$(".refPlaceHolder").lazyLoad({batchSize:50,intoView:function(objs,idx){if(objs)if(objs[0]){var start=$(objs[0].el).attr("id").substring(8);if(!start)start=1;var count=objs.length;if(idx)resolveRefs(idx,1);else resolveRefs(start,count)}}})}
function resolveRefs(start,count){var url=refResolvePath+"&_refRangeStart="+start+"&_refRangeCount="+count;var isHoover=true;if(count==1)isHoover=false;ajaxRefResol=new $.ajax({url:url,type:"GET",async:isHoover,dataType:"text",error:function(){$(".refPlaceHolder").each(function(){$(this).html(' <span style="color:red;"> [SD-008]</span>')});return},success:function(res){var refMap=decodeURIComponent(res);var citedBySCEids=refMap.substringBetween("#","^");var tmp="#"+citedBySCEids+"^";refMap=refMap.replace(tmp,
"");if(refMap!=null){this.$OuterDiv=$("<div></div>").hide().append($(refMap));$(".refPlaceHolder").each(function(){if(myMap[this.id]["refHtml"])if(this.innerHTML.match("/science?")==null)$(this).html(myMap[this.id]["refHtml"])});updateCitedByCounts(citedBySCEids,isHoover,start,count)}$(".refPlaceHolder").each(function(){var v=parseInt(getNumber(this.id));var end=parseInt(start)+parseInt(count);if(v!=-1&&(v>=start&&v<end))if(!myMap[this.id]["refHtml"])$(this).html("")})}})}
function ensureChkBoxSelected(){var rc=false;var selectedDocList=$(".checkBox");var msg="Please select one or more articles to purchase.";var msg2="You have added too many articles to your shopping cart.  The maximum number of articles you may add to your shopping cart is 20.  Please review your selection and select the appropriate articles to be added.";var checkBoxCounter=0;if(typeof selectedDocList!="undefined"||selectedDocList!=null)for(var i=0;i<selectedDocList.length;i++){if(selectedDocList[i].checked){rc=
true;checkBoxCounter=checkBoxCounter+1}}else msg="There are no articles to purchase.";if(!rc)alert(msg);else if(checkBoxCounter>20){alert(msg2);return rc}return rc}
function closePreview(artID,imgID,defImg,labelID,useSprite,oldImg){if(useSprite===undefined)useSprite="false";var imgEle=document.getElementById(imgID);var labelEle=document.getElementById(labelID);if(imgEle){if(useSprite=="true"){if(oldImg!==undefined)$(imgEle).removeClass(oldImg);$(imgEle).addClass(defImg)}else imgEle.src=defImg;imgEle.alt="Open";imgEle.title="Open"}if(labelEle)labelEle.innerHTML="Show preview";var artDiv=document.getElementById(artID);if(artDiv)artDiv.style.display="none"}
function openPreview(artID,targetURL,absID,imgID,defImg,flipToImg,labelID,remLnks,useSprite){if(useSprite===undefined)useSprite="false";var artDiv=document.getElementById(artID);if(artDiv)if(artDiv.style.display=="block")return closePreview(artID,imgID,defImg,labelID,useSprite,flipToImg);else{var imgEle=document.getElementById(imgID);var labelEle=document.getElementById(labelID);if(imgEle){if(useSprite=="true")$(imgEle).removeClass(defImg).addClass(flipToImg);else imgEle.src=flipToImg;imgEle.alt=
"Close";imgEle.title="Close"}if(labelEle)labelEle.innerHTML="Close preview";getContent(targetURL,artID)}var absDiv=document.getElementById(absID);if(absDiv){absDiv.style.display="block";var absURLOn=document.getElementById(absID+"-on");var absURLOff=document.getElementById(absID+"-off");if(absURLOn)absURLOn.style.display="none";if(absURLOff)absURLOff.style.display=""}}
function getContent(targetURL,updateID,id2,id3){var updateDiv=document.getElementById(updateID);if(updateDiv){if(updateDiv.innerHTML.length==0){updateDiv.innerHTML="<b>LOADING....</b>";targetURL=targetURL.replace(/\#/g,"%23");if(targetURL.indexOf(" "))targetURL=encodeURI(targetURL);jQuery("#"+updateID).load(targetURL)}updateDiv.style.display="block"}var updateURLOn=document.getElementById(updateID+"-on");var updateURLOff=document.getElementById(updateID+"-off");if(updateURLOn)updateURLOn.style.display=
"none";if(updateURLOff)updateURLOff.style.display="";var div2=document.getElementById(id2);var div3=document.getElementById(id3);if(div2)div2.style.display="none";if(div3)div3.style.display="none";var id2On=document.getElementById(id2+"-on");var id2Off=document.getElementById(id2+"-off");if(id2On)id2On.style.display="";if(id2Off)id2Off.style.display="none";var id3On=document.getElementById(id3+"-on");var id3Off=document.getElementById(id3+"-off");if(id3On)id3On.style.display="";if(id3Off)id3Off.style.display=
"none"}$(function(){$("#bodyMainResults,#moduleInfo,#purchaseArtList").on("click.result",".absLink",handleResultClicks)});
function handleResultClicks(event){var $a=$(event.currentTarget);var $div=$();var newState="true"!=$a.attr("aria-expanded");var $previewTxt=$a.find("span.preTxt");var $absLinks=$a.closest(".external").find("a.absLink");$absLinks.each(function(){$(this).attr("aria-expanded","false");$($(this).find("span")[0]).toggleClass("arrowDown",false).toggleClass("arrowSide",true);$(this).closest(".external").find("div.previewBox").toggleClass("hidden",true);if($(this).attr("data-type")=="abstract"){$(this).find("span.preTxt").text("Abstract");
if($a.attr("data-type")=="abstract"){$div=$a.closest(".external").find("div.previewBox.abstract");if(newState)$previewTxt.text("Close abstract");else $previewTxt.text("Abstract")}}else if($(this).attr("data-type")=="researchAbstract"){$(this).find("span.preTxt").text("Research highlights");if($a.attr("data-type")=="researchAbstract"){$div=$a.closest(".external").find("div.previewBox.rabstract");if(newState)$previewTxt.text("Close research highlights");else $previewTxt.text("Research highlights")}}else if($(this).attr("data-type")==
"graphicalAbstract"){$(this).find("span.preTxt").text("Graphical abstract");if($a.attr("data-type")=="graphicalAbstract"){$div=$a.closest(".external").find("div.previewBox.gabstract");if(newState)$previewTxt.text("Close graphical abstract");else $previewTxt.text("Graphical abstract")}}});$a.attr("aria-expanded",newState?"true":"false");$($a.find("span")[0]).toggleClass("arrowSide",!newState).toggleClass("arrowDown",newState);$div.toggleClass("hidden",!newState);if($div.html()==""){$div.html("<b>LOADING....</b>");
targetURL=$a.attr("data-url").replace(/\#/g,"%23");if(targetURL.indexOf(" "))targetURL=encodeURI(targetURL);$.get(targetURL,function(data){$div.html(data)})}return false}function getFontStyle(elemId){var x=document.getElementById(elemId);if(!x)return"fontDefault";var z=x.className;return z}
function setActiveStyle(fontClass,elemId,fontURL){var x=document.getElementById(elemId);if(!x)return;var z=x.className;if(z!=fontClass){var fontId;switch(fontClass){case "font5":fontId=5;break;case "font4":fontId=4;break;case "font3":fontId=3;break;case "font2":fontId=2;break;case "font1":fontId=1;break;default:fontId=3;break}var url="/"+fontURL+"/fontsize/"+fontId;$.get(url);x.className=fontClass}}
document.getElementsByClassName=function(cl){var retnode=[];var myclass=new RegExp("\\b"+cl+"\\b");var elem=this.getElementsByTagName("*");for(var i=0;i<elem.length;i++){var classes=elem[i].className;if(myclass.test(classes))retnode.push(elem[i])}return retnode};
function publicationLink(url,showId,hideId,rsltIndId){$.get(url,function(data){if(data.match(/TRUE/g)){document.getElementById(hideId).style.display="none";document.getElementById(showId).style.display="inline";document.getElementById(rsltIndId).style.display="none"}else document.getElementById(rsltIndId).style.display="inline"})}
function volumeLink(url,showId,hideId,rsltIndId){$.get(url,function(data){if(data.match(/TRUE/g)){document.getElementById(hideId).style.display="none";document.getElementById(showId).style.display="inline";document.getElementById(rsltIndId).style.display="none"}else document.getElementById(rsltIndId).style.display="inline"})}
function quickLink(url,rsltIndId,rsltMsgId){$.get(url,function(data){document.getElementById(rsltMsgId).innerHTML=data;document.getElementById(rsltIndId).style.display="inline"})}function getElm(eID){return document.getElementById(eID)}function show(eID){getElm(eID).style.display="block"}function hide(eID){getElm(eID).style.display="none";if(eID=="articleFade"){var focusEnable=$Id("focusOn");var focusDisable=$Id("focusOff");focusDisable.style.display="inline";focusEnable.style.display="none"}}
function setOpacity(eID,opacityLevel){DBG.out(0,"setOpacity("+eID+", "+opacityLevel+")");var eStyle=getElm(eID).style;eStyle.opacity=opacityLevel/100;eStyle.filter="alpha(opacity="+opacityLevel+")"}function fadeIn(eID){show(eID);opacityAdjust(eID,{start:0,end:100,step:4,speed:10})}function fadeOut(eID){opacityAdjust(eID,{start:100,end:0,step:-4,speed:2,onComplete:function(){$("#"+eID).hide()}})}
function opacityAdjust(id,opt){setOpacity(id,opt.start);if(opt.start==opt.end){if(typeof opt.onComplete=="function")opt.onComplete()}else setTimeout(function(){if(opt.start>opt.end){opt.start+=opt.step;if(opt.start>=opt.end)opacityAdjust(id,opt);else if(typeof opt.onComplete=="function")opt.onComplete()}else{opt.start+=opt.step;if(opt.start<=opt.end)opacityAdjust(id,opt);else if(typeof opt.onComplete=="function")opt.onComplete()}},opt.speed)}
function toggle_display_Author(id1,id2,path){var div1=document.getElementById(id1);var img1=document.getElementById(id2);if(div1.style.display=="block"){div1.style.display="none";img1.src=path+"/plus_lt.png";img1.title="Open";img1.alt="Open"}else{div1.style.display="block";img1.src=path+"/minus_lt.png";img1.title="Close";img1.alt="Close"}}
function toggle_content(obj,event){var $a=$(obj);var newState="true"!=$a.attr("aria-expanded");var title=$a.attr("title");var $elem=$("#"+$a.attr("aria-controls"));$a.find("span.icon").toggleClass("srcPartClosed").toggleClass("srcPartOpened").toggleClass("selected");$elem.toggleClass("hidden");$a.attr("aria-expanded",newState?"true":"false");if(newState)$a.attr("title",$a.attr("title").replace("Expand - ","Collapse - "));else $a.attr("title",$a.attr("title").replace("Collapse - ","Expand - "));if($a.attr("data-url")!=
"")if($("#load"+$a.attr("aria-controls"))[0])$.ajax({url:$a.attr("data-url"),type:"GET",error:function(){$elem.html("Unable to fetch the data")},success:function(res){$elem.html(res)}});if($a.attr("href")=="#"){event.stopPropagation();event.preventDefault()}}
function toggle_display(id1,id2,path){var div1=document.getElementById(id1);var img1=document.getElementById(id2);var span1=document.getElementById("sp"+id1);if(div1.style.display=="block"){span1.style.fontWeight="normal";div1.style.display="none";img1.src=path+"/plus_lt.png";img1.title="Open";img1.alt="Open"}else{span1.style.fontWeight="bold";div1.style.display="block";img1.src=path+"/minus_lt.png";img1.title="Close";img1.alt="Close"}}
function toggle_display_AjaxCall(id1,id2,path){var div1=document.getElementById(id1);var img1=document.getElementById(id2);var a1=document.getElementById(id1+"a");var url1=a1.href;var img2=document.getElementById("load"+id1);var span1=document.getElementById("sp"+id1);if(div1.style.display=="block"){span1.style.fontWeight="normal";div1.style.display="none";img1.src=path+"/plus_lt.png";img1.title="Open";img1.alt="Open"}else if(img2==null&&div1.innerHTML!="Unable to fetch the data"){span1.style.fontWeight=
"bold";div1.style.display="block";img1.src=path+"/minus_lt.png";img1.title="Close";img1.alt="Close"}else{span1.style.fontWeight="bold";div1.style.display="block";img1.src=path+"/minus_lt.png";img1.title="Close";img1.alt="Close";$.ajax({url:url1,type:"GET",error:function(){div1.innerHTML="Unable to fetch the data"},success:function(res){div1.innerHTML=res}})}}
function toggle_display_GG(id1,id2,c,path){var div1=document.getElementById(id1);var img1=document.getElementById(id2);var span1=document.getElementById("sp"+id1);if(div1.style.display=="block"){span1.style.fontWeight="normal";div1.style.display="none";img1.src=path+"/plus_lt.png";img1.title="Open";img1.alt="Open"}else{var childs=document.getElementsByName("child"+id1);for(var i=0;i<childs.length;i++){var divc1=document.getElementById(childs[i].value);var imgc1=document.getElementById("icon"+childs[i].value);
var spanc1=document.getElementById("sp"+childs[i].value);spanc1.style.fontWeight="normal";divc1.style.display="none";imgc1.src=path+"/plus_lt.png";imgc1.title="Open";imgc1.alt="Open"}span1.style.fontWeight="bold";div1.style.display="block";img1.src=path+"/minus_lt.png";img1.title="Close";img1.alt="Close"}}var lpMTagConfig={"lpServer":"server.lon.liveperson.net","lpNumber":"41683706","lpProtocol":document.location.toString().indexOf("https:")==0?"https":"http"};
function lpAddMonitorTag(src){if(typeof src=="undefined"||typeof src=="object")src=lpMTagConfig.lpMTagSrc?lpMTagConfig.lpMTagSrc:"/hcp/html/mTag.js";if(src.indexOf("http")!=0)src=lpMTagConfig.lpProtocol+"://"+lpMTagConfig.lpServer+src+"?site="+lpMTagConfig.lpNumber;else if(src.indexOf("site=")<0){if(src.indexOf("?")<0)src=src+"?";else src=src+"&";src=src+"site="+lpMTagConfig.lpNumber}var s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("charset","iso-8859-1");
s.setAttribute("src",src);document.getElementsByTagName("head").item(0).appendChild(s)}
function lpAddVars(scope,name,value){if(name.indexOf("OrderTotal")!=-1&&(value==""||value==0))return;value=lpTrimSpaces(value.toString());switch(scope){case "page":lpMTagConfig.pageVar[lpMTagConfig.pageVar.length]=escape(name)+"="+escape(value);break;case "session":lpMTagConfig.sessionVar[lpMTagConfig.sessionVar.length]=escape(name)+"="+escape(value);break;case "visitor":lpMTagConfig.visitorVar[lpMTagConfig.visitorVar.length]=escape(name)+"="+escape(value);break}}
function onloadEMT(){var LPcookieLengthTest=document.cookie;if(lpMTag.lpBrowser=="IE"&&LPcookieLengthTest.length>1900)lpMTagConfig.sendCookies=false}function lpTrimSpaces(stringToTrim){return stringToTrim.replace(/^\s+|\s+$/g,"")}function lpSendData(varscope,varname,varvalue){if(typeof lpMTag!="undefined"&&typeof lpMTag.lpSendData!="undefined")lpMTag.lpSendData(varscope.toUpperCase()+"VAR!"+varname+"="+varvalue,true)}
function ChatInit(){if(window.attachEvent)window.attachEvent("onload",lpAddMonitorTag);else window.addEventListener("load",lpAddMonitorTag,false);lpMTagConfig.db1=new Object;lpMTagConfig.db1.busyAction=function(objName){objRef=eval(objName);var chatWinURL=objRef.getActionURL("Busy");chatWinURL=chatWinURL.replace(/forceOffline/,"SESSIONVAR%21BusyClickOverride");window.open(chatWinURL,"Chat"+lpMTagConfig.lpNumber,"width=472,height=320,status=0,resizable=0,menubar=no,scrollbars=no,location=no")};lpMTagConfig.db1.offlineAction=
function(objName){objRef=eval(objName);var chatWinURL=objRef.getActionURL("Offline");window.open(chatWinURL,"chat"+lpMTagConfig.lpNumber,"width=472,height=320,status=0,resizable=0,menubar=no,scrollbars=no,location=no")};if(typeof lpMTagConfig.pageVar=="undefined")lpMTagConfig.pageVar=new Array;if(typeof lpMTagConfig.sessionVar=="undefined")lpMTagConfig.sessionVar=new Array;if(typeof lpMTagConfig.visitorVar=="undefined")lpMTagConfig.visitorVar=new Array;if(typeof lpMTagConfig.onLoadCode=="undefined")lpMTagConfig.onLoadCode=
new Array;if(typeof lpMTagConfig.dynButton=="undefined")lpMTagConfig.dynButton=new Array;try{if(typeof lpUnit=="undefined")var lpUnit="science-direct-english";if(typeof lpAddVars!="undefined")lpAddVars("page","unit",lpUnit);lpMTagConfig.defaultInvite="chat-"+lpUnit}catch(e){}lpMTagConfig.onLoadCode[lpMTagConfig.onLoadCode.length]=onloadEMT;if(typeof lpMTagConfig.dynButton!="undefined")lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={"name":"chat-"+lpUnit,"pid":"ChatHeader","ovr":"lpMTagConfig.db1"};
if(typeof lpMTagConfig.dynButton!="undefined")lpMTagConfig.dynButton[lpMTagConfig.dynButton.length]={"name":"chat-"+lpUnit+"-1","pid":"ChatFooter","ovr":"lpMTagConfig.db1"}}var ArticleView={init:function(){$("#pdfLink, .pdfLink").click(function(event){event.stopPropagation();if(!$.browser.msie)event.preventDefault();var t=$(event.currentTarget);if(t.attr("suggestedarturl"))suggestedArt(t.attr("suggestedarturl"),event);if(t.attr("pdfurl"))openPDF(t.attr("pdfurl"),event);return true})}};
$(document).ready(function(){ArticleView.init();if($("#pubPg")[0]&&(!JDM.pf.crawler&&JDM.pm.issn!=""))DynamicPubContent.buildDynamicData();$("body").on("click",".firstPagePDF",function(event){event.stopPropagation();event.preventDefault();var t=$(event.currentTarget);if(t.attr("pdfurl"))openPDF(t.attr("pdfurl"),event)});$("body").on("click","a.anchor",function(e){toggle_content(this,e)});$("body").on("click",".selection input",function(e){var count=$(".selection input:checked").size();$("#resultListHeader > ul,#issueListHeader > ul").attr("aria-label",
"Download or Export "+count+" selected results");$("#resultListHeader .arrowIcon,#issueListHeader .arrowIcon").attr("title","Download or Export "+count+" selected results").attr("alt","Download or Export "+count+" selected results").find("span.offscreen").html("Download or Export "+count+" selected results")});$("body").on("click","a.articleName",function(e){var url=$(this).attr("data-url");var hrefId=$(this).attr("href");var id=hrefId.substring(1);loadSection(url,id);if($(this).hasClass("articleName"))toggleTabs("fullTab")});
$("body").on("click",".tableAnchor",function(e){var url=$(this).attr("data-url");openStrippedNS(url,"");return false});$("body").on("click",".tableAnchor",function(e){var data=$(this).attr("data-img");var id=$(this).attr("id");textBoxCE(data,id)});$("body").on("click",".cExLink,.redirectUrl",function(){var url=$(this).attr("data-url");$.get(url)});$("body").on("click","#continueBtn",function(){$("#continueBtn").attr("disabled",true);$("#continueBtn").addClass("ui-state-disabled");window.location=
$(this).attr("data-url")});$('form[name="costCode"]').on("submit",function(){$("#continueButton").attr("disabled",true);$("#continueButton").addClass("ui-state-disabled");return true});$('form[name="remoteAccessChooseOrg"]').on("submit",function(e){if(!$("input[name='selfManraDeptId']").is(":checked")){$(".remoteAccess.alertMsg").removeClass("hidden");e.preventDefault()}});cartInit();var ie8msg=Cookie.get("ie8msg");if($("#shoppingCartFlow")[0]&&(SDU.isIEless(9)&&!ie8msg))ie8Message();if($("#eCredPopupBox")[0])eCredPopup.init();
if(typeof SDM.pf.sb!="undefined"&&SDM.pf.sb.url!="")SuggestedBooks.init();if(typeof SDM.ep.modSrp!="undefined"&&SDM.ep.modSrp.REF_MOD_SRP_URL!="")refModSrp.init();if($("#homeAccPopupBox")[0])homeaccPopup.init();if($("#smanraActivatedMsg")[0])Cookie.set("smanramsg",1);if(typeof SD_SHORTURL!="undefined")var jqxhr=$.get(SD_SHORTURL,function(res){if(res){var jsonRes;try{jsonRes=$.parseJSON(res)}catch(e){jsonRes=$.parseJSON(res.replace("\r","").replace("\n","").replace("\t"," "))}$("#docCount").html(jsonRes.ArticleCount).show();
if(jsonRes.LatestArticles){$("#latestArticleBox .latest").html(jsonRes.LatestArticles);$("#latestArticleBox").show();$("#artContainer .column").each(function(){if($(this).hasClass("col100"))$(this).removeClass("col100 last").addClass("col33 first");else if($(this).hasClass("col66")&&$(this).attr("id")!="latestArticleBox")$(this).removeClass("col66 last").addClass("col33");else if($(this).attr("id")=="latestArticleBox")$(this).prev(".vdivider").show()})}}});if(typeof ENTITLE_URL!="undefined")entitlementIcons.init()});
function cartInit(){if($(".scrollPaneDiv table.cartRsltRow").length>4){$(".scrollPaneDiv").css("height",$("#rslt1").height()+$("#rslt1").height()+$("#rslt2").height()+$("#rslt3").height()+$("#rslt4").height());$(".scrollPaneDiv").css("overflow-y","scroll")}else{$(".scrollPaneDiv").css("height","auto");$(".scrollPaneDiv").css("overflow-y","auto")}if($(".cartLogin #userid").length==0)window.setTimeout(function(){$(".cartLogin #password").focus()},50);else window.setTimeout(function(){$(".cartLogin #userid").focus()},
50);$("body").on("click","a.abstractLink",function(e){$(this).find("span.abstractArrow").toggleClass("arrowSide arrowDown");$(this).parent().find("div.absDivInfo").toggleClass("hidden shown");e.preventDefault()});$("body").on("click",".removeSelected",function(e){var queryString="Remove+selected";var count=$("input[type='checkbox'].checkBox:checked:visible").length;if(count!=0){$('input[name="remove"]').val(queryString);$(this).closest("form").submit()}else return false});$("body").on("keypress",
".mailInfo #emailAddr",function(e){if(e.keyCode==13){e.preventDefault();e.stopPropagation();$(".S_C_purchaseTheseArticles").trigger("click")}})}function ie8Message(){Cookie.set("ie8msg",1);$("#ie8ModalWindow,#ie8ModalWindowMsgBox").show();$("body").on("click","#ie8MsgCloseBtn",function(){$("#ie8ModalWindow,#ie8ModalWindowMsgBox").hide()})}
function openModifySerialAlert(){if($(".alert_AIP option:selected").val()=="AIP"){$("select[name='SerialAlertFrequency']").show();$(".notEditable").addClass("hidden");$("input[name='notEditableFreq']").val("")}else if($(".alert_AIP option:selected").val()=="BOTH"){$("select[name='SerialAlertFrequency']").hide();$(".notEditable").text("Weekly").removeClass("hidden");$("input[name='notEditableFreq']").val("Weekly")}else{$("select[name='SerialAlertFrequency']").hide();$(".notEditable").text("As Published").removeClass("hidden");
$("input[name='notEditableFreq']").val("As Published")}}function openPDF(url,event){var newWidth=document.body.clientWidth*90/100;var newHeight=document.body.clientHeight;var pdfWin;pdfWin=window.open(url,"_blank","width="+newWidth+",height="+newHeight+",resizable=yes,left=50,top=50");pdfWin.focus()}
function suggestedArt(url,event){var obj=document.getElementById("suggestedPdfList");if(obj.length<1)return;var ajaxReq=$.get(url,function(response){if(response&&response.length>5){obj.style.display="block";obj.innerHTML=response;var obj1=document.getElementById("pdfModalWindow");obj1.style.display="block";obj1.style.height=document.body.scrollHeight+"px";alignSuggestedArticleBox()}})}function setOptOutFlag(url){try{$.post(url)}catch(e){}closePopup()}
function closePopup(){document.getElementById("suggestedPdfList").style.display="none";document.getElementById("pdfModalWindow").style.display="none"}
function showDetails(pii,absUrl){var toHide="trunc_"+pii;var toShow="citation_"+pii;var absId="abs_"+pii;hideElementsByClassName("pdfAbs","li");hideElementsByClassName("citationDetails","li");showElementsByClassName("wrapperLi","li");document.getElementById(toHide).style.display="none";document.getElementById(toShow).style.display="block";var obj=document.getElementById(absId);if(obj.length<1)return;if(obj.innerHTML=="")var ajaxReq=$.get(absUrl,function(response){if(response){obj.style.display="block";
obj.innerHTML=response;alignSuggestedArticleBox()}});else{obj.style.display="block";alignSuggestedArticleBox()}}function alignSuggestedArticleBox(){var x=0,y=1;var msgBox=document.getElementById("pdfModalWindowMsgBox");var winWidth=getWindowWidth();var winHeight=getWindowHeight();var top=(winHeight-msgBox.offsetHeight)/2;var left=(winWidth-msgBox.offsetWidth)/2;var pos=getScrollXY();if(pos){top=top+pos[y];left=left+pos[x]}msgBox.style.top=top+"px";msgBox.style.left=left+"px"}
function getScrollXY(){var x=0,y=1;var pos=new Array(2);var scrOfX=0,scrOfY=0;if(typeof window.pageYOffset=="number"){scrOfY=window.pageYOffset;scrOfX=window.pageXOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){scrOfY=document.body.scrollTop;scrOfX=document.body.scrollLeft}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){scrOfY=document.documentElement.scrollTop;scrOfX=document.documentElement.scrollLeft}pos[x]=
scrOfX;pos[y]=scrOfY;return pos}
$(document).ready(function(){$("body").on("click",".showMoreMMCvCaption",function(ev){showMoreMMCvCaption();ev.preventDefault()});$("body").on("click",".showLessMMCvCaption",function(ev){showLessMMCvCaption();ev.preventDefault()});$(".MMCvLABEL_SRC").each(function(i){var thisObj=$(this);var reqParent=thisObj.parents(".MMCvBOX_SRC");var linkObj=reqParent.find(".MMCvLINK");if(linkObj.length>0){var linkAttr=linkObj.attr("href");var thisHtml=thisObj.html();thisObj.html('<a href="'+linkAttr+'">'+thisHtml+
"</a>")}});refPDF.init();if($("ul.taxonomy")[0]){$("ul.taxonomy").wrap('<div id="taxonomyCont">');$("ul.taxonomy").tree({"expanded":$("ul.taxonomy a.selected").parents("li")});setTaxonomyHeight();$(window).bind("scroll",setTaxonomyHeight);$("#taxonomyCont").scrollToTopic({selTopic:"ul.taxonomy a.selected"})}if($("#MK_CB").is(":checked"))displayMarketingInfo("marketingSettings",$("#registrationSocialOptional")[0]);if(SDU.isIE(SDM.ieVersion,"lte")&&BROWSER_SPECIFIC_USR_MSG)$("#ieWarningMsg").ieWarning();
if(SD_System_Msg)prodMsg.init();placeHolderInit();setQuickSearch();$(window).resize(setQuickSearch);$('.button[aria-haspopup="true"]').on("mouseenter keydown",handlePopup);if($(".loadAllTitles")[0])browseTitles.init();if(buildTitleFilter)filterTitles.init();if(exportAvail||exportBook){exportCite.init();exportCite.Mendeley()}$(document).on("click","#MigratedStatus .closeBt, .newUserMsg .closeBt, #MigratedStatus-society .closeBt, #smanraActivatedMsg .closeBt",function(e){e.preventDefault();var msgBlock=
$(this).parent();$(msgBlock).remove()});DDM.init()});function setTaxonomyHeight(){if($("#taxonomyCont").offset().top-$(window).scrollTop()+$(".taxonomy").outerHeight()>$(window).height())$("#taxonomyCont").css({"height":$(window).height()-($("#taxonomyCont").offset().top-$(window).scrollTop()),"overflow-y":"auto"});else $("#taxonomyCont").css({"height":"","overflow-y":"hidden"})}var loadsection;
function loadSection(baseUrl,section){var endPoint=baseUrl+section;var div1=document.getElementById("indexSection");loadsection=new $.ajax({url:endPoint,type:"GET",error:function(){div1.innerHTML=""},success:function(res){div1.innerHTML=res;if($("#"+section).position()!=null)$(window).scrollTop($("#"+section).position().top+330)}})}
var SD_UTIL={loadLib:function(urlStr){var headID=document.getElementsByTagName("head")[0];var newScript=document.createElement("script");newScript.type="text/javascript";newScript.src=urlStr;headID.appendChild(newScript)},sendPageLoadStats:function(){var params="";if(window.performance&&window.performance.timing){params=SD_UTIL.getArtSpdStats();if(window.performance.timing.loadEventEnd>0){for(var k in window.performance.timing)params+="&"+k+"="+window.performance.timing[k];var url=SDM.ep.prDevice+
"/pageReport?"+params;$("body").append('<img style="display:none" src="'+url+'">')}else setTimeout(SD_UTIL.sendPageLoadStats,100)}else{params=SD_UTIL.getArtSpdStats();params+="&loadEventEnd="+(new Date).getTime();var url=SDM.ep.prDevice+"/pageReport?"+params;$("body").append('<img style="display:none" src="'+url+'">')}},getArtSpdStats:function(){var params,lbl,timer;params="cpc=SD";for(var i=0;i<prs.length;i++){lbl=prs[i].toString().match(/([A-Za-z_]+:[A-Za-z0-9_]+)/g)[0].split(":")[1];timer=prs[i].toString().match(/([A-Za-z_]+:[A-Za-z0-9_]+)/g)[1].split(":")[1];
params+="&"+lbl+"="+timer}params+="&key="+encodeURIComponent(SDM.pageTransKey);params+="&pagetype="+SDM.pageType;params+="&sds="+SDM.si.sds;params+="&tid="+SDM.tid;if(document.location.href)params+="&href="+encodeURIComponent(document.location.href);if(document.documentElement.clientWidth&&document.documentElement.clientHeight){params+="&winHeight="+document.documentElement.clientHeight;params+="&winWidth="+document.documentElement.clientWidth}params+="&domCount="+document.getElementsByTagName("*").length;
return params},sendUserKeyEvent:function(a,o,z){$.get(USERACTIONSURL+"/"+o+"/"+z+"/"+a)}};
var CanonicalLink={init:function(){$("body").delegate(".cLink, .mmcLinkSprite","click",function(event){var t=$(this);createStateCookie(t.attr("queryStr"),event)});$("body").delegate(".fedLink","click",function(event){var preUrl=window.location.href;var cookieValue="";if(preUrl)cookieValue+="<prevURL>"+preUrl+"</prevURL>";var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cookieValue=cookieStart+cookieValue+cookieEnd;if(typeof console!="undefined")console.log("cookieValue is: "+cookieValue);
Cookie.set("SD_ART_LINK_STATE",cookieValue)})}};$(document).ready(function(){CanonicalLink.init();if(!blk_all_social_logins&&(SDU.cookieAvail()&&gigyaLib)){$("head").append('<script async src="'+gigyaLib+'">\x3c/script>');gg=function(c){if(typeof gigya=="object"){$(".socialContainer").each(function(){if($(this).attr("id")!="")loadSocialLoginOptions($(this).attr("id"))});initGigyaHelp()}else if(c>20)return;else{c++;setTimeout(function(){gg(c)},500)}};gg(1)}});
function initGigyaHelp(){$("#socialHelpPage").click(function(e){e.stopPropagation();e.preventDefault();openPopup($(this).attr("href"),"help",800,600)})}
function getNamedQueryParameter(inURL,inName){var outParm="";var queryIndex=inURL.indexOf("?");var parmIndex=inURL.indexOf(inName,queryIndex+1);if(parmIndex>0){parmIndex+=inName.length;while(parmIndex>=0&&"="!=inURL.charAt(parmIndex)){parmIndex=inURL.indexOf(inName,parmIndex+1);if(parmIndex>0)parmIndex+=inName.length}if("="==inURL.charAt(parmIndex)){parmIndex++;var endIndex=parmIndex;while(endIndex<inURL.length&&("&"!=inURL.charAt(endIndex)&&"#"!=inURL.charAt(endIndex)))endIndex++;if(endIndex>parmIndex)outParm=
inURL.substring(parmIndex,endIndex)}}return outParm}
function createStateCookie(queryString,event){var cookieValue="";if(queryString){var alid="";alid=getNamedQueryParameter(queryString,"_alid");if(alid)cookieValue+="<al>"+alid+"</al>";var rdoc="";rdoc=getNamedQueryParameter(queryString,"_rdoc");if(rdoc)cookieValue+="<rd>"+rdoc+"</rd>";var fmt="";fmt=getNamedQueryParameter(queryString,"_fmt");if(fmt)cookieValue+="<fmt>"+fmt+"</fmt>";var orig="";orig=getNamedQueryParameter(queryString,"_origin");if(orig)cookieValue+="<org>"+orig+"</org>";var srch="";
srch=getNamedQueryParameter(queryString,"_srch");if(srch)cookieValue+="<src>"+srch+"</src>";var hitCount="";hitCount=getNamedQueryParameter(queryString,"_ct");if(hitCount)cookieValue+="<cnt>"+hitCount+"</cnt>";var zone="";zone=getNamedQueryParameter(queryString,"_zone");if(!zone)zone=getNamedQueryParameter(queryString,"zone");if(zone)cookieValue+="<z>"+zone+"</z>";var sfrom="";sfrom=getNamedQueryParameter(queryString,"_srcFr");if(!sfrom)sfrom=getNamedQueryParameter(queryString,"zone");if(sfrom)cookieValue+=
"<srcFr>"+sfrom+"</srcFr>";var anchorValue="";anchorValue=getNamedQueryParameter(queryString,"_docanchor");if(anchorValue)cookieValue+="<av>"+anchorValue+"</av>";var alertKey="";alertKey=getNamedQueryParameter(queryString,"_alertKey");if(alertKey)cookieValue+="<ak>"+alertKey+"</ak>";var webUserId="";webUserId=getNamedQueryParameter(queryString,"_wid");if(webUserId)cookieValue+="<wid>"+webUserId+"</wid>";var errMsg="";errMsg=getNamedQueryParameter(queryString,"_errMsg");if(errMsg)cookieValue+="<err>"+
errMsg+"</err>";var reqId="";reqId=getNamedQueryParameter(queryString,"_reqId");if(reqId)cookieValue+="<req>"+reqId+"</req>";var crossRefDocId="";crossRefDocId=getNamedQueryParameter(queryString,"_xRefDocId");if(crossRefDocId)cookieValue+="<cid>"+crossRefDocId+"</cid>";var origPii="";origPii=getNamedQueryParameter(queryString,"_origPii");if(origPii)cookieValue+="<opi>"+origPii+"</opi>";var refTag="";refTag=getNamedQueryParameter(queryString,"artImgPref");if(refTag)cookieValue+="<rt>"+refTag+"</rt>";
var refWorkId="";refWorkId=getNamedQueryParameter(queryString,"_cid");if(refWorkId)cookieValue+="<rwi>"+refWorkId+"</rwi>";var refWorkHierarchyId="";refWorkHierarchyId=getNamedQueryParameter(queryString,"_hierId");if(refWorkHierarchyId)cookieValue+="<rhi>"+refWorkHierarchyId+"</rhi>";var explodeListStr="";explodeListStr=getNamedQueryParameter(queryString,"_explode");if(explodeListStr)cookieValue+="<exp>"+explodeListStr+"</exp>";var indexTypeCode="";indexTypeCode=getNamedQueryParameter(queryString,
"_idxType");if(indexTypeCode)cookieValue+="<ind>"+indexTypeCode+"</ind>";var refLink="";refLink=getNamedQueryParameter(queryString,"_refLink");if(refLink)cookieValue+="<rfl>"+refLink+"</rfl>";var alpha="";alpha=getNamedQueryParameter(queryString,"_alpha");if(alpha)cookieValue+="<alp>"+alpha+"</alp>";var dateTime=getCurrentDateTime();if(dateTime)cookieValue+="<rdt>"+dateTime+"</rdt>";var overrideIP="";overrideIP=getNamedQueryParameter(queryString,"overrideIP");if(overrideIP)cookieValue+="<oip>"+overrideIP+
"</oip>";var currHubEid="";currHubEid=getNamedQueryParameter(queryString,"_cHubEid");if(currHubEid)cookieValue+="<currHubEid>"+currHubEid+"</currHubEid>";var vsiId="";vsiId=getNamedQueryParameter(queryString,"_vsiId");if(vsiId)cookieValue+="<vsiId>"+vsiId+"</vsiId>"}var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cookieValue=cookieStart+cookieValue+cookieEnd;Cookie.set("SD_ART_LINK_STATE",cookieValue)}
var CanonicalHomeLink={init:function(){$("body").delegate(".canonHomeLink","click",function(event){var t=$(this);createCookieForHomePage(t,event)})}};$(document).ready(function(){CanonicalHomeLink.init()});
function createCookieForHomePage(homeCookie,event){var cookValue="";var method=homeCookie.attr("method");if(method)cookValue+="<md>"+method+"</md>";var zone=homeCookie.attr("zone");if(zone)cookValue+="<z>"+zone+"</z>";var btn=homeCookie.attr("btn");if(btn)cookValue+="<btn>"+btn+"</btn>";var origin=homeCookie.attr("origin");if(origin)cookValue+="<org>"+origin+"</org>";var more=homeCookie.attr("more");if(more)cookValue+="<me>"+more+"</me>";var action=homeCookie.attr("actionType");if(action)cookValue+=
"<at>"+action+"</at>";var boxAction=homeCookie.attr("boxAction");if(boxAction)cookValue+="<bt>"+boxAction+"</bt>";var box=homeCookie.attr("box");if(box)cookValue+="<bx>"+box+"</bx>";var record=homeCookie.attr("record");if(record)cookValue+="<rd>"+record+"</rd>";var fl=homeCookie.attr("fl");if(fl)cookValue+="<fl>"+fl+"</fl>";var prompt=homeCookie.attr("prompt");if(prompt)cookValue+="<pt>"+prompt+"</pt>";var lg=homeCookie.attr("lg");if(lg)cookValue+="<lg>"+lg+"</lg>";var cookieStart="<e><q>science</q>";
var cookieEnd="<enc>N</enc></e>";cookValue=cookieStart+cookValue+cookieEnd;Cookie.set("SD_HOME_PAGE_COOKIE",cookValue)}var CanonicalBrowseLink={init:function(){$("body").delegate(".canonBrowseLink","click",function(event){var t=$(this);createCookieForBrowsePage(t.attr("queryStr"),event)})}};$(document).ready(function(){CanonicalBrowseLink.init()});
function createCookieForBrowsePage(queryString,event){var cookValue="";if(queryString){var zone="";zone=getNamedQueryParameter(queryString,"zone");if(zone)cookValue+="<z>"+zone+"</z>";var origin="";origin=getNamedQueryParameter(queryString,"origin");if(origin)cookValue+="<org>"+origin+"</org>"}var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cookValue=cookieStart+cookValue+cookieEnd;Cookie.set("SD_HOME_PAGE_COOKIE",cookValue)}
function createCookie(cookieName,value){var finalCookie;var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";var cookieValue;if(value){cookieValue=cookieStart;cookieValue+=value;cookieValue+=cookieEnd}finalCookie=cookieName+"="+cookieValue+";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=
-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;if(domain)finalCookie+=";domain="+domain;document.cookie=finalCookie}
function getCurrentDateTime(){var currentTime=new Date;var month=currentTime.getMonth();var day=currentTime.getDate();var year=currentTime.getFullYear();var hours=currentTime.getHours();var mins=currentTime.getMinutes();var secs=currentTime.getSeconds();var dateTime=year+"/"+month+"/"+day+"/"+hours+":"+mins+":"+secs;return dateTime}
function flipAlertSettings(id,currObj,nextObj){var obj=document.getElementById(id);var currObj=document.getElementById(currObj);var nextObj=document.getElementById(nextObj);if(obj.style.display=="none"){obj.style.display="block";currObj.className="regMMinus";nextObj.innerHTML="Hide alert & other settings"}else{obj.style.display="none";currObj.className="regMPlus";nextObj.innerHTML="Show alert & other settings"}}function checkMarketingInfo(id,currObj){var obj=document.getElementById(id)}
function displayMarketingInfo(id,currObj){var obj=document.getElementById(id);var currObj=document.getElementById(currObj);if(obj.style.display=="none"){obj.style.display="block";currObj.className="regMMinus"}else{obj.style.display="none";currObj.className="regMPlus"}}
$(document).ready(function(){$(".navigation_browseimp a").each(function(){var returnedPath=$(this).attr("href");browseimp_nextBatchURL=returnedPath});var browseToolHtml='<img class="browsetool" role="button" aria-label="titleDetails" style="display:inline; float:right;" alt="Set RSS, Favorite and Alert" src="/sd/row_arrow_a.png" />';$("#toolSummary").keydown(function(event){if(event.which==27)closeToolSummary(event)});$("body").delegate("#addFav a,#removeFav a","click keydown",function(event){if(event.type==
"keydown"&&event.which==13||event.type=="click"){var currElem=$(this);var curActivityURL="data-"+currElem.parent().attr("id");var url=currElem.attr(curActivityURL);$.get(url,function(data){processFavAlertData(data,"Fav")})}});$("body").delegate("#addAlert a,#removeAlert a","click keydown",function(event){if(event.type=="keydown"&&event.which==13||event.type=="click"){var currElem=$(this);var curActivityURL="data-"+currElem.parent().attr("id");var url=currElem.attr(curActivityURL);$.get(url,function(data){processFavAlertData(data,
"Alert")})}if(event.type=="keydown"&&(!event.shiftKey&&event.which==9))closeToolSummary(event)});$("body").delegate(".guestFav,.guestAlert","click keydown",function(event){if(event.type=="keydown"&&event.which==13||event.type=="click"){$(this).hide();displayLogInLink(this.className)}});$("body").delegate(".guestAlert,#guestAlert","keydown",function(event){if(event.type=="keydown"&&(!event.shiftKey&&event.which==9))closeToolSummary(event)});var btHovId;$("body").delegate(".browsetool","mouseenter mouseleave",
function(event){if(event.type=="mouseenter"){var imgArrowObj=this;btHovId=setTimeout(function(){$(imgArrowObj).click()},300)}else if(event.type=="mouseleave")if(btHovId!=null)clearTimeout(btHovId)});$("[aria-expanded] h2,h3").dblclick(function(event){var $target=$(event.target).parent();var toggleObj=$target.children("input")[1];if(toggleObj)toggleExpanded(toggleObj,$target.attr("aria-first"))});$("body").delegate(".browseSubTree","click",function(){var secSegment=$(this).attr("href");if($("#subjectTreeSummary").css("display")==
"none")openSubTool(secSegment,this);return false});function openSubTool(secSegment,obj){var subDiv=document.getElementById("subjectTreeSummary");var arrowDiv=document.getElementById("browseSubTreeArrowRight");if(subDiv&&arrowDiv){var offset=$(obj).offset();var offsetwidth=$(obj)[0].offsetWidth;var offsetHeight=$(obj)[0].offsetHeight;arrowDiv.style.left=offset.left+offsetwidth+"px";arrowDiv.style.top=offset.top-8+offsetHeight/2+"px";arrowDiv.style.position="absolute";arrowDiv.style.display="block";
subDiv.style.left=$(arrowDiv).offset().left+($(arrowDiv).width()-1)+"px";subDiv.style.top=offset.top-10+"px";subDiv.innerHTML="<b>LOADING....</b>";subDiv.style.position="absolute";subDiv.style.display="block";url=secSegment;$("#subjectTreeSummary").load(url,function(){var offset=$(this).offset();var top=offset.top-$(window).scrollTop();var left=offset.left;var initialHeight=$(this)[0].offsetHeight;var offsetRelToWind=top+initialHeight;var winHeight=$(window).height();if(offsetRelToWind>winHeight)top=
top-(offsetRelToWind-winHeight)-10;top=top+$(window).scrollTop();if(top>=0)$(this)[0].style.top=top+"px";$(this)[0].style.left=left+"px";$(this).find("li span.subCat:first").focus()})}}$("body").delegate(".browsetool","click keydown",function(event){if(event.type=="keydown"&&event.which==13||event.type=="click"){var secSegment=$(this).parents("th").find("a").attr("data-toolpopup");if($("#toolSummary").css("display")=="none")openTool(secSegment,this)}});function openTool(secSegment,obj){var subDiv=
document.getElementById("toolSummary");var arrowDiv=document.getElementById("browseToolArrowRight");if(subDiv&&arrowDiv){var ofset=$(obj).offset();var osw=$(obj)[0].offsetWidth;var osh=$(obj)[0].offsetHeight;arrowDiv.style.left=ofset.left+osw+"px";arrowDiv.style.top=ofset.top-8+osh/2+"px";arrowDiv.style.position="absolute";arrowDiv.style.display="block";subDiv.style.left=$(arrowDiv).offset().left+($(arrowDiv).width()-1)+"px";subDiv.style.top=ofset.top-10+"px";subDiv.innerHTML="<b>LOADING....</b>";
subDiv.style.position="absolute";subDiv.style.display="block";url=secSegment;$("#toolSummary").load(url,function(){var ofset=$(this).offset();var top=ofset.top-$(window).scrollTop();var left=ofset.left;var initialHeight=$(this)[0].offsetHeight;var offsetRelToWind=top+initialHeight;var winHeight=$(window).height();if(offsetRelToWind>winHeight)top=top-(offsetRelToWind-winHeight)-10;top=top+$(window).scrollTop();$(this)[0].style.top=top+"px";$(this)[0].style.left=left+"px";$(this).find("h1 a").focus()})}}
findNewFavsAndVias();$("#MK_CB").click(function(){if($(this).is(":checked"))$(".astMktPad").text("*");else $(".astMktPad").text("")});if($("#MK_CB").is(":checked"))$(".astMktPad").text("*");else $(".astMktPad").text("")});
function findNewFavsAndVias(){var checkBoxId=$("#browseimp_checkbox_id").attr("title");var checkBoxType=$("#browseimp_checkbox_type").attr("title");var checkBoxCid=$("#browseimp_checkbox_cid").attr("title");var checkBoxSrcTitle=$("#browseimp_checkbox_srctitle").attr("title");if(checkBoxSrcTitle=="")checkBoxSrcTitle="title";if(checkBoxType&&(checkBoxType.length>0&&(checkBoxCid&&checkBoxCid.length>0))){var msg="";if(checkBoxType=="FAV"){msg=buildConfirmationMsgRow("This title has been added to your favorites.",
checkBoxSrcTitle);applyFavConfirmMsg(msg,checkBoxCid)}else if(checkBoxType=="VIA"){msg=buildConfirmationMsgRow("Alert has been set for this title. You will be notified when new volume/issue is published.",checkBoxSrcTitle);applyViaConfirmMsg(msg,checkBoxCid)}}}
function applyFavConfirmMsg(msg,cid){$(".favcheck").each(function(){var testCid=$(this).attr("value");if(testCid==cid){$(this).parents(".browseimpBrowseRow").after(msg);$(this).parents(".browseList").css("border-bottom","0px none #ffffff");$(this).parents(".browseList").siblings(".browseList").css("border-bottom","0px none #ffffff")}})}
function applyViaConfirmMsg(msg,cid){$(".viacheck").each(function(){var testCid=$(this).attr("value");if(testCid==cid){$(this).parents(".browseimpBrowseRow").after(msg);$(this).parents(".browseList").css("border-bottom","0px none #ffffff");$(this).parents(".browseList").siblings(".browseList").css("border-bottom","0px none #ffffff")}})}
$(document).ready(function(){if($("#errorMsg").text()==""){var dataTypestr;if(typeof BROWSE_PAGE_HTML_TO_JSON!="undefined"&&BROWSE_PAGE_HTML_TO_JSON=="TRUE")dataTypestr="json";else dataTypestr="html";$("#content_browseimp").infinitescroll({loading:{img:"/scidirimg/loading_icon32.gif"},navSelector:"div.navigation_browseimp:last",nextSelector:"div.navigation_browseimp:last a:last",itemSelector:"#content_browseimp div.post_browseimp",bufferPx:4E3,loadingText:"",loadingImg:"",debug:false,animate:false,
pathParse:true,dataType:dataTypestr,msgText:null,img:null},function(newElements){var titleCtr=0;$(newElements).find(".no_navigation_browseimp").each(function(){var i=1;var j=0;browseimp_nextBatchURL=""});$(newElements).find(".navigation_browseimp a").each(function(){var returnedPath=$(this).attr("href");browseimp_nextBatchURL=returnedPath});$(newElements).find(".no_navigation_browseimp div").each(function(){browseimp_nextBatchURL=""});$(".favcheck").removeAttr("disabled");$(".viacheck").removeAttr("disabled")})}});
function clickFav(elem){var cbid=$(elem).attr("id");var cid=$(elem).attr("value");var checkStr=$(elem).attr("checked");var checkFlag=false;if(checkStr==undefined||(checkStr==null||checkStr==""))checkFlag=false;else if(checkStr=="checked")checkFlag=true;else if(checkStr==true||checkStr==false)checkFlag=checkStr;var userAccessType=$("#browseimp_auth_usertype").attr("title");var titlesRendered=$(".favcheck").length;if(userAccessType.match("NOT_NAME")){var cookieStr=buildBrowseCookie("ADD","FAV",cid,
cbid,titlesRendered);updateFavoriteNonAjax(cookieStr)}else updateFavoriteAjax(cid,checkFlag,cbid)}
function clickVia(elem){var cbid=$(elem).attr("id");var cid=$(elem).attr("value");var checkStr=$(elem).attr("checked");var checkFlag=false;if(checkStr==undefined||(checkStr==null||checkStr==""))checkFlag=false;else if(checkStr=="checked")checkFlag=true;else if(checkStr==true||checkStr==false)checkFlag=checkStr;var userAccessType=$("#browseimp_auth_usertype").attr("title");var titlesRendered=$(".favcheck").length;if(userAccessType.match("NOT_NAME")){var cookieStr=buildBrowseCookie("ADD","VIA",cid,
cbid,titlesRendered);updateViaNonAjax(cookieStr)}else updateViaAjax(cid,checkFlag,cbid)}
function buildBrowseCookie(action,type,cid,id,titleCount){var d=new Date;var cookieStr="BRWSCHKBOX=action:"+action+"|type:"+type+"|cid:"+cid+"|cbid:"+id+"|titleCount:"+titleCount+"|"+"timestamp:"+d.toTimeString()+"|"+"hops:1|";cookieStr+=";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=-1)domain=".lexisnexis.com";if(domain)cookieStr+=";domain="+
domain;return cookieStr}
function updateFavoriteAjax(cid,checkStr,cbid){var url="/"+SD_URL_QUALIFIER+"/browsefav/";if(checkStr==true)url+="add/";else url+="del/";url+=cid;$.get(url,function(data){if(data.match("TRUE_ADD")){$(".browseimpConfirmRow").hide();showTableBorders();var pubTitle=$("#"+cbid).parents(".browseimpBrowseRow").attr("data-title");var msg=buildConfirmationMsgRow("This title has been added to your favorites.",pubTitle);$("#"+cbid).parents(".browseimpBrowseRow").after(msg);hideTableBorder(cbid)}else if(data.match("TRUE_DEL")){$(".browseimpConfirmRow").hide();showTableBorders();
var pubTitle=$("#"+cbid).parents(".browseimpBrowseRow").attr("data-title");var msg=buildConfirmationMsgRow("This title has been removed from your favorites.",pubTitle);$("#"+cbid).parents(".browseimpBrowseRow").after(msg);hideTableBorder(cbid)}})}function updateFavoriteNonAjax(cookieStr){var url=$("#browseimp_curr_page_path_url").attr("title");document.cookie=cookieStr;if(url!=="")window.location=url}
function updateViaAjax(cid,checkStr,cbid){var url="/"+SD_URL_QUALIFIER+"/browsevia/";if(checkStr==true)url+="add/";else url+="del/";url+=cid;$.get(url,function(data){if(data.match("TRUE_ADD")){$(".browseimpConfirmRow").hide();showTableBorders();var pubTitle=$("#"+cbid).parents(".browseimpBrowseRow").attr("data-title");var msg=buildConfirmationMsgRow("Alert has been set for this title. You will be notified when new volume/issue is published.",pubTitle);$("#"+cbid).parents(".browseimpBrowseRow").after(msg);
hideTableBorder(cbid)}else if(data.match("TRUE_DEL")){$(".browseimpConfirmRow").hide();showTableBorders();var pubTitle=$("#"+cbid).parents(".browseimpBrowseRow").attr("data-title");var msg=buildConfirmationMsgRow("Alert has been removed. You will no longer receive any alerts for this title.",pubTitle);$("#"+cbid).parents(".browseimpBrowseRow").after(msg);hideTableBorder(cbid)}})}
function updateViaNonAjax(cookieStr){var url=$("#browseimp_curr_page_path_url").attr("title");document.cookie=cookieStr;if(url!=="")window.location=url}function showTableBorders(){$("th.browseList").css("border-bottom","1px solid #f1f5f8");$("td.browseList").css("border-bottom","1px solid #f1f5f8")}
function hideTableBorder(cbid){$("#"+cbid).parents(".browseList").css("border-bottom","0px none #ffffff");$("#"+cbid).parents(".browseList").siblings(".browseList").css("border-bottom","0px none #ffffff")}
function buildConfirmationMsgRow(msg,pubTitle){var row='<tr class="browseimpConfirmRow" >';row+='<td class="browseListConfirm" align="right" colspan="9">';row+='<div class="browseimpConfirmEntry">';row+='<span class="browseimpConfirmLeft">&nbsp;</span>';row+='<span class="browseimpCheckboxMsg">';row+='<img class="browseimpCheckboxImg" src="/scidirimg/successIcon.gif" alt="'+pubTitle+' confirmed"/>&nbsp;';row+=msg;row+="</span>";row+='<span class="browseimpConfirmRight">&nbsp;</span>';row+="</div>";
row+="</td></tr>";return row}
function selectAllBookTypes(box){if(box.id=="chk_allbooks"&&box.checked==true){$("#browseChecks input[id=chk_allbooks]").attr("aria-checked",true).css("opacity","1.0");$("#browseChecks input[id=chk_books]").prop("checked",true).attr("aria-checked",true);$("#browseChecks input[id=chk_bs]").prop("checked",true).attr("aria-checked",true);$("#browseChecks input[id=chk_hs]").prop("checked",true).attr("aria-checked",true);$("#browseChecks input[id=chk_refworks]").prop("checked",true).attr("aria-checked",
true);$("#volumesChkWrapper input[id=chk_volumes]").removeAttr("disabled");$(".chk_volumes_lbl").css("opacity","1.0")}else if(box.id=="chk_allbooks"&&box.checked==false){$("#browseChecks input[id=chk_allbooks]").attr("aria-checked",false);$("#browseChecks input[id=chk_books]").prop("checked",false).attr("aria-checked",false);$("#browseChecks input[id=chk_bs]").prop("checked",false).attr("aria-checked",false);$("#browseChecks input[id=chk_hs]").prop("checked",false).attr("aria-checked",false);$("#browseChecks input[id=chk_refworks]").prop("checked",
false).attr("aria-checked",false);$("#volumesChkWrapper input[id=chk_volumes]").prop("checked",false).attr("aria-checked",false).attr("disabled",true);$(".chk_volumes_lbl").css("opacity","0.5")}}function updateAriaAttr(box){var boxIdInput="input[id="+box.id+"]";if(box.checked==false)$(boxIdInput).attr("aria-checked",false);else if(box.checked==true)$(boxIdInput).attr("aria-checked",true)}
function disableVolumeCheckBox(){$("input[id=chk_volumes]").attr("disabled","disabled");$("input[id=chk_volumes]").css("opacity","0.5");$(".chk_volumes_lbl").css("opacity","0.5")}
function updateAndSubmit(box){$("input[name=applyBrowseFilters]").attr("disabled","disabled");$("input[name=applyBrowseFilters]").css("opacity","0.5");updateAriaAttr(box);$("#browseForm").submit();$("input[id=chk_volumes]").attr("disabled","disabled");$("input[id=chk_volumes]").css("opacity","0.5");$(".chk_volumes_lbl").css("opacity","0.5")}
function testAllBooksCheckBox(box){updateAriaAttr(box);if(box.checked==false){$("#browseChecks input[id=chk_allbooks]").css("opacity","0.5").attr("aria-checked","mixed");if(box.id=="chk_bs"&&$("#browseChecks input[id=chk_hs]").prop("checked")==false||box.id=="chk_hs"&&$("#browseChecks input[id=chk_bs]").prop("checked")==false){$("#volumesChkWrapper input[id=chk_volumes]").prop("checked",false).attr("aria-checked",false).attr("disabled",true);$(".chk_volumes_lbl").css("opacity","0.5")}if($("#browseChecks input[id=chk_books]").prop("checked")==
false&&($("#browseChecks input[id=chk_bs]").prop("checked")==false&&($("#browseChecks input[id=chk_hs]").prop("checked")==false&&$("#browseChecks input[id=chk_refworks]").prop("checked")==false)))$("#browseChecks input[id=chk_allbooks]").prop("checked",false).css("opacity","1.0").attr("aria-checked",false);else if($("#browseChecks input[id=chk_books]").prop("checked")==false||($("#browseChecks input[id=chk_bs]").prop("checked")==false||($("#browseChecks input[id=chk_hs]").prop("checked")==false||
$("#browseChecks input[id=chk_refworks]").prop("checked")==false)))$("#browseChecks input[id=chk_allbooks]").prop("checked",true).css("opacity","0.5").attr("aria-checked","mixed")}else if(box.checked==true){if($("#browseChecks input[id=chk_books]").prop("checked")==true&&($("#browseChecks input[id=chk_bs]").prop("checked")==true&&($("#browseChecks input[id=chk_hs]").prop("checked")==true&&$("#browseChecks input[id=chk_refworks]").prop("checked")==true)))$("#browseChecks input[id=chk_allbooks]").prop("checked",
true).css("opacity","1.0").attr("aria-checked",true);else $("#browseChecks input[id=chk_allbooks]").prop("checked",true).css("opacity","0.5").attr("aria-checked","mixed");if($("#browseChecks input[id=chk_bs]").prop("checked")==true||$("#browseChecks input[id=chk_hs]").prop("checked")==true){$("#volumesChkWrapper input[id=chk_volumes]").removeAttr("disabled");$(".chk_volumes_lbl").css("opacity","1.0")}}}
function showMoreSubs(){$(".restSubs").show();$(".showCatsLink").hide();$(".hideCatsLink").show()}function showLessSubs(){$(".restSubs").hide();$(".hideCatsLink").hide();$(".showCatsLink").show()}
var refPDF={defaultText:"Enter the text to search",init:function(){$("#refPdfSearch input.searchText").bind("focusin",refPDF.textOnFocus).bind("focusout",refPDF.textOutFocus).bind("keyup",refPDF.textKeyUp);if($("#refPdfSearch input.searchText").val()==""){$("#refPdfSearch input.refButton").attr("disabled","disabled");$("#refPdfSearch input.searchText").val(refPDF.defaultText);$("#refPdfSearch input.searchText").css("color","#9b9b9b");return false}},textOnFocus:function(){if($("#refPdfSearch input.searchText").val()==
refPDF.defaultText){$("#refPdfSearch input.searchText").val("");$("#refPdfSearch input.searchText").css("color","#000000");return false}else{$("#refPdfSearch input.searchText").css("color","#000000");$("#refPdfSearch input.refButton").removeAttr("disabled")}},textOutFocus:function(){if($("#refPdfSearch input.searchText").val()==""){$("#refPdfSearch input.searchText").val(refPDF.defaultText);$("#refPdfSearch input.searchText").css("color","#9b9b9b");$("#refPdfSearch input.refButton").attr("disabled",
"disabled");return false}},textKeyUp:function(){if($("#refPdfSearch input.searchText").val()!="")$("#refPdfSearch input.refButton").removeAttr("disabled");else $("#refPdfSearch input.refButton").attr("disabled","disabled")}};
function validateCheckBoxes(event){var checkBoxes=$(".browseSubjectTreeList").find('input[type="checkbox"]');if(!checkBoxes.is(":checked")&&window.location.href.indexOf("/sub/")<0){var secSegment=$(".browseSubTree").attr("href");$(".subTreeErr").css("display","block");event.preventDefault?event.preventDefault():event.returnValue=false}else{$(".subTreeErr").css("display","none");return true}}
function toggleSubscribed(){var itemCnt=0;var entType="";$(".tSearchSub,.tSearchOA,.tSearchConOA").hide();if($("#chk_sub").is(":checked")){$(".tSearchSub").show();$(".tSearchConOASub").show();$(".tSearchOASub").show();itemCnt+=$(".tSearchSub").size();itemCnt+=$(".tSearchConOASub").size();itemCnt+=$(".tSearchOASub").size();entType+="subscribed"}if($("#chk_oaccess").is(":checked")){$(".tSearchOA").show();if(!$("#chk_sub").is(":checked"))itemCnt+=$(".tSearchOA").size();if(entType!="")entType+=",";entType+=
"OAJournals"}if($("#chk_oaccess").is(":checked")){$(".tSearchOA").show();itemCnt+=$(".tSearchOA").size()}if($("#chk_coaccess").is(":checked")){$(".tSearchConOA").show();itemCnt+=$(".tSearchConOA").size();if(entType!="")entType+=",";entType+="containsOA";if(entType=="sub,oaAccess,containsOA")entType="allFullText"}if($("#chk_sub").is(":checked")||($("#chk_oaccess").is(":checked")||$("#chk_coaccess").is(":checked")))$(".tSearchNsub").hide();else{$(".resultsMain tr").show();itemCnt+=$(".resultsMain tr").size()}$("#browseAmtResultsVal").html(itemCnt);
if(entType=="")entType="all";var titleSrcUrl="/science/jfind?origin=title_srch_list&zone=browseFilter&entType="+entType+"&src=ajax";$.ajax({url:titleSrcUrl})}
$(document).ready(function(){myAlert.init();prelims.init();$("body").on("click",".offerBtn",function(){displayOffer(this)});$("#webProdAdminAnc").bind("click",function(){var url=$("#webProdAdminAnc").attr("data-url");$.get(url,function(response){$("#webProdAdmin").html(response)})});$("#allsources").bind("click",function(){if($("input[id=allsources]").prop("checked")==true){$("input[id=subsjournal]").prop("checked",false);$("input[id=favjournal]").prop("checked",false);$("input[id=openjournal]").prop("checked",
false)}else if($("input[id=subsjournal]").prop("checked")==false&&($("input[id=favjournal]").prop("checked")==false&&$("input[id=openjournal]").prop("checked")==false))$("input[id=allsources]").prop("checked",true)});$("#subsjournal").bind("click",function(){if($("input[id=subsjournal]").prop("checked")==true)$("input[id=allsources]").prop("checked",false);else if($("input[id=subsjournal]").prop("checked")==false&&($("input[id=favjournal]").prop("checked")==false&&$("input[id=openjournal]").prop("checked")==
false))$("input[id=allsources]").prop("checked",true)});$("#favjournal").bind("click",function(){if($("input[id=favjournal]").prop("checked")==true)$("input[id=allsources]").prop("checked",false);else if($("input[id=subsjournal]").prop("checked")==false&&($("input[id=favjournal]").prop("checked")==false&&$("input[id=openjournal]").prop("checked")==false))$("input[id=allsources]").prop("checked",true)});$("#openjournal").bind("click",function(){if($("input[id=openjournal]").prop("checked")==true)$("input[id=allsources]").prop("checked",
false);else if($("input[id=subsjournal]").prop("checked")==false&&($("input[id=favjournal]").prop("checked")==false&&$("input[id=openjournal]").prop("checked")==false))$("input[id=allsources]").prop("checked",true)});$(".citationInfo").on("click",".toggle",function(e){e.preventDefault();e.stopPropagation();$(this).closest(".citationInfo").find("span:first").toggleClass("srcPartClosed").toggleClass("srcPartOpened");$(this).closest(".citationInfo").find(".citingText").toggleClass("hidden")});chkFullTextAccess.init();
if($(".resultsMain")[0])toggleSubscribed();if($("#ElseLink")[0])$("#ElseLink,#ElseProd").hover(function(){$("#ElseProd").show()},function(){$("#ElseProd").hide()});$(".extLinkBlock li a.cLink").click(function(){var pageType=SDM.pageType;if(pageType=="pubhome_j"||pageType=="pubhome_b")triggerUsabillaLive();else if(pageType=="rslt_art")triggerUsabillaLive()});$("#mlktResults ul .extLinkBlock li a.cLink").click(function(){triggerUsabillaLive()})});
function closeUpdateMsg(){$("#webProdAdmin").hide()}
function displayOffer(obj){if($(obj).next("div.specialOffer")[0]){SD_UTIL.sendUserKeyEvent("specialOfferPopup","rslt_list","rslt_list_item");$(obj).next(".specialOffer").css("top",$(obj).position().top);$(obj).next(".specialOffer").show()}else{var url=$(obj).attr("data-offerSummary");SD_UTIL.sendUserKeyEvent("specialOfferPopup","rslt_list","rslt_list_item");$.get(url,function(response){$(obj).parents(".divBlk").append('<div class="specialOffer shadow"><span class="txtContent"></span><span class="spclose">X</span></div>');$(obj).next(".specialOffer").find(".txtContent").html(response);
$(obj).next(".specialOffer").css("top",$(obj).position().top);$(obj).next(".specialOffer").css("right","60px");$(obj).next(".specialOffer").show("fast");$(obj).parents(".divBlk").find(".specialOffer").unbind("click").bind("click",function(){hideOffer(this)})})}}function hideOffer(obj){$(obj).hide()}function TagFormReplace(obName,methName,theMD5){document.cart._ob.value=obName;document.cart._method.value=methName;document.cart.md5.value=theMD5}
function loadSocialLoginOptions(socialContainer){var socialLoginURL="/"+SD_URL_QUALIFIER+"/getSocialIds";var providerName="";var sm_returnURL;if(self_manra&&(sm_dept_id&&sm_return_url)){sm_returnURL=sm_return_url;sm_returnURL+="/SM?_smDeptId="+sm_dept_id}try{$.get(socialLoginURL,function(res){if(res){var obj=$.parseJSON(res);var pro=obj.SocialLoginProviders;$.each(pro,function(){if(providerName!="")providerName+=",";providerName+=this.providerName});if(sm_returnURL)gigya.socialize.showLoginUI({showTermsLink:false,
authCodeOnly:true,width:"258px",height:"30px",UIConfig:'<config><body><controls><snbuttons buttonsize="20"></snbuttons></controls></body></config>',authFlow:"redirect",containerID:socialContainer,hideGigyaLink:true,redirectURL:sm_returnURL,enabledProviders:providerName,onLoad:function(obj){socialLogin.init(obj.containerID)}});else gigya.socialize.showLoginUI({showTermsLink:false,authCodeOnly:true,width:"258px",height:"30px",UIConfig:'<config><body><controls><snbuttons buttonsize="20"></snbuttons></controls></body></config>',
authFlow:"redirect",containerID:socialContainer,hideGigyaLink:true,enabledProviders:providerName,onLoad:function(obj){socialLogin.init(obj.containerID)}})}})}catch(err){return}}
var socialLogin={init:function(containerID){var targetElm=$("#"+containerID).find("[gigid]").parent();$(targetElm).each(function(){if($(this).attr("title")=="OpenID")$(this).attr("title","Use your "+$(this).attr("title")+" username to sign in to ScienceDirect");else $(this).attr("title","Use your "+$(this).attr("title")+" account to sign in to ScienceDirect");$(this).attr("tabindex","0")})}};function logoutFromGS(){gigya.services.socialize.logout()}Cookie.remove("FAT");Cookie.remove("SWS");
highlightMatch=function(s,t){var matcher=new RegExp("("+$.ui.autocomplete.escapeRegex(t)+")","ig");return s.replace(matcher,"<strong>$1</strong>")};function isCookiesEnabled(){var cookieEnabled=navigator.cookieEnabled?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled=document.cookie.indexOf("testcookie")!=-1?true:false}return cookieEnabled}
function handleImgLoadError(obj){var imgObj=$(obj);var errorSrc=$(imgObj).attr("data-errorSrc");if(typeof errorSrc!="undefined"&&errorSrc!=""){$(imgObj).attr("data-errorSrc","");$(imgObj).attr("src",errorSrc)}}
var mrwResults={config:{resultBlk:"#resultContainer",searchBlk:"#searchContainer",resultLinks:".allResults .filterLinks a,.allResults .paging a, .searchResults .sortLinks a,.searchResults .filterLinks a,.searchResults .paging a",isbn:"",topic:"",placeholderTxt:"",prevResultsPerPage:0,reloadPrevious:false,txtSearched:false,ajaxSubmit:true,firstHit:true,rsltCount:0},init:function(){$(this.config.searchBlk).show();this.config.isbn=$(this.config.resultBlk).find('input[name="isbn"]').val();this.config.topic=
$(this.config.resultBlk).find('input[name="topic"]').val();$(this.config.searchBlk).on("submit","form",mrwResults.handleSearch);$(this.config.searchBlk).on("click",".clearButton",mrwResults.clearSearch);$(this.config.resultBlk).on("click",'input[type="submit"]',function(){$('input[type="submit"]',mrwResults.config.resultBlk).removeAttr("data-clicked");$(this).attr("data-clicked","true")});$(this.config.resultBlk).on("submit",".allResults form, .searchResults form",mrwResults.handleResultSubmit);$(".allResults #resultsPerPage, .searchResults #resultsPerPage",
this.config.resultBlk).removeAttr("onchange");$(this.config.resultBlk).off("change").on("change",".allResults #resultsPerPage, .searchResults #resultsPerPage",function(){this.form.displayPerPageFlag.value="t";mrwResults.config.ajaxSubmit=true;$(this).parents().filter("form").trigger("submit")});$(this.config.resultBlk).on("click",".allResults ul.selection_menu input, .searchResults ul.selection_menu input",function(){mrwResults.config.ajaxSubmit=false});$(this.config.resultBlk).on("click change keypress",
".allResults .paging input, .searchResults .paging input",function(){mrwResults.config.ajaxSubmit=true});this.config.prevResultsPerPage=$("#resultsPerPage",".allResults").val();this.initSearch();$(window).bind("hashchange",function(){mrwResults.checkForHashChange()});mrwResults.checkForHashChange()},initSearch:function(){var placeHolderSupport=false,inputBox=$(this.config.searchBlk).find("input[type=text]");if(mrwResults.config.topic!=""&&mrwResults.config.topic!=undefined)mrwResults.config.placeholderTxt=
"Search within this topic";else mrwResults.config.placeholderTxt="Search within this module";inputBox.off("change");var test=document.createElement("input");if("placeholder"in test)placeHolderSupport=true;if(!placeHolderSupport){inputBox.attr("value",mrwResults.config.placeholderTxt);if(inputBox.val()==mrwResults.config.placeholderTxt)inputBox.css("color","#9B9B9B");else inputBox.css("color","");inputBox.unbind("focus").bind("focus",function(){if($(this).val()==mrwResults.config.placeholderTxt)$(this).attr("value",
"").css("color","");else if($(this).val()!=mrwResults.config.placeholderTxt)$(this).parent().find("span.clearField").css("visibility","visible")});inputBox.unbind("keypress").bind("keypress",function(){if($(this).val()!=""&&$(this).val()!=mrwResults.config.placeholderTxt)$(this).parent().find("span.clearField").css("visibility","visible");else $(this).parent().find("span.clearField").css("visibility","hidden")});inputBox.unbind("blur").bind("blur",function(){if($(this).val()=="")$(this).attr("value",
mrwResults.config.placeholderTxt).css("color","#9B9B9B");else if($(this).val()!=mrwResults.config.placeholderTxt)$(this).parent().find("span.clearField").css("visibility","visible")})}else inputBox.attr("placeholder",mrwResults.config.placeholderTxt);inputBox.unbind("keyup").bind("keyup",function(){if($(this).val()!=""&&$(this).val()!=mrwResults.config.placeholderTxt)$(this).parent().find("span.clearField").css("visibility","visible");else if(!mrwResults.config.txtSearched)$(this).parent().find("span.clearField").css("visibility",
"hidden")})},handleResultLinks:function(){mrwResults.config.ajaxSubmit=true;var targetUrl=$(location).attr("href"),resContainer=".allResults",rlInfo="",reqPage=0;if(targetUrl.indexOf("#")==-1)if($("#articles .filterLinks ul li:first-child a").attr("href"))targetUrl+=$("#articles .filterLinks ul li:first-child a").attr("href");else targetUrl+=$("#articles .filterLinks ul li:first-child").attr("data-url");targetUrl=targetUrl.replace("#","");urlArr=targetUrl.split("?");if(urlArr.length>2)targetUrl=urlArr[0]+
"?"+urlArr[2];if(targetUrl.indexOf("referenceworks/")>-1)targetUrl=targetUrl.replace("referenceworks/","modResults/");if(targetUrl.indexOf("module/topic/")>-1)targetUrl=targetUrl.replace("module/topic/","modResults/");if(targetUrl.indexOf("_si=")>0){var startIndex=0,endIndex=0;startIndex=targetUrl.indexOf("_si=")+4;endIndex=targetUrl.indexOf("&",startIndex);reqPage=targetUrl.substring(startIndex,endIndex)}if(mrwResults.config.txtSearched)resContainer=".searchResults";if(reqPage==1&&!mrwResults.config.txtSearched){$("#about_ref_mod .module_title").hide();
$("#about_ref_mod .caption_text,.module_info").show();mrwResults.setPosition("#resultContainer")}else{$("#about_ref_mod .module_title").show();$("#about_ref_mod .caption_text,.module_info").hide();mrwResults.setPosition("#moduleInfo")}if($("li.Introductory",resContainer)[0])rlInfo="intro";if($("li.Advanced",resContainer)[0])rlInfo+=rlInfo!=""?"|adv":"adv";if(rlInfo!="")targetUrl+="&_rlInfo="+rlInfo;if(targetUrl!="#"&&targetUrl!="")mrwResults.sendRequest(targetUrl)},handleSearch:function(e){var origin;
var targetUrl=$(e.currentTarget).attr("action"),searchTerm=$(e.currentTarget).find('input[name="searchTerm"]').val();mrwResults.config.txtSearched=true;if(searchTerm!=""&&searchTerm!=mrwResults.config.placeholderTxt){var encSearchTerm=encodeURIComponent(searchTerm);targetUrl+="?searchTerm="+encSearchTerm;if(mrwResults.config.topic!=undefined&&mrwResults.config.topic!=""){targetUrl+="&pgType=topic&sort=rel";origin="topic"}else{targetUrl+="&pgType=module&sort=rel";origin="ref_work"}var _ct=$('input[name="_ct"]',
".allResults").val();targetUrl+="&_si=1&_ct="+_ct;$("#about_ref_mod .module_title").show();$("#about_ref_mod .caption_text,.module_info").hide();var hashUrl=targetUrl.split("?");document.location.hash="#?"+hashUrl[1];var qSearchUrl="/science/quicksearch/"+searchTerm+"?_origin="+origin+"&_zone=qSearch&_src=module";$.ajax({url:qSearchUrl})}else{var data='<div class="errMesg"><div class="errIcon"><img src="/sd/errorIcon.gif" alt="Error" title="Error"></div><div class="errTxt red">';data+="No search term entered.</div></div>";
var inputBox=$(mrwResults.config.searchBlk).find("input[type=text]");inputBox.attr("placeholder","").val("").unbind("focus blur");$(this).parent().find("span.clearField").css("visibility","visible");$("#about_ref_mod .module_title").show();$("#about_ref_mod .caption_text,.module_info").hide();mrwResults.setResponse(data)}mrwResults.setPosition("#moduleInfo");return false},clearSearch:function(e){e.preventDefault();mrwResults.config.txtSearched=false;var currentPage=$('input[name="CURRENT_PAGE_NUMBER"]',
mrwResults.config.resultBlk).val(),topPage=$('input[name="topPage"]',mrwResults.config.resultBlk).val(),bottomPage=$('input[name="bottomPage"]',mrwResults.config.resultBlk).val();if(Number($("#resultsPerPage",".allResults").val())!=Number($("#resultsPerPage",".searchResults").val())&&$("#resultsPerPage",".searchResults").val()!=undefined){mrwResults.config.reloadPrevious=true;mrwResults.config.txtSearched=false;$("#resultsPerPage",".allResults").val($("#resultsPerPage",".searchResults").val());$('.allResults form input[name="displayPerPageFlag"]',
mrwResults.config.resultBlk).val("t");$(".allResults form",mrwResults.config.resultBlk).trigger("submit")}else{$(".allResults").show();$(".searchResults").hide()}if(topPage==undefined&&bottomPage==undefined)topPage=bottomPage=1;if(Number(currentPage!=topPage?topPage:bottomPage)==1&&!mrwResults.config.txtSearched||mrwResults.config.reloadPrevious){$("#about_ref_mod .module_title").hide();$("#about_ref_mod .caption_text,.module_info").show()}else{$("#about_ref_mod .module_title").show();$("#about_ref_mod .caption_text,.module_info").hide()}mrwResults.setPosition("#moduleInfo");
$(mrwResults.config.searchBlk).find("input[type=text]").val("");if(!mrwResults.config.txtSearched)$(this).parent().find("span.clearField").css("visibility","hidden");mrwResults.initSearch();document.location.hash="clear"},handleResultSubmit:function(e){var targetUrl=$(e.currentTarget).attr("action"),rlInfo="",resContainer=".allResults";if(!$(e.currentTarget).find('input[data-clicked="true"]').closest("ul.selection_menu")[0]){if(targetUrl==undefined)return false;if(targetUrl.indexOf("module/topic/")>
-1)targetUrl=targetUrl.replace("module/topic/","modResults/");if(mrwResults.config.txtSearched){var searchTerm=$(mrwResults.config.searchBlk).find("input[type=text]").val();var encSearchTerm=encodeURIComponent(searchTerm);targetUrl+="?searchTerm="+encSearchTerm;resContainer=".searchResults";targetUrl+="&"}else targetUrl+="?";targetUrl+=$("form",resContainer).serialize();var currentPage=$('input[name="CURRENT_PAGE_NUMBER"]',resContainer).val(),topPage=$('input[name="topPage"]',resContainer).val(),
bottomPage=$('input[name="bottomPage"]',resContainer).val(),totalPages=$('input[name="TOTAL_PAGES"]',resContainer).val(),mod_title=$('input[name="MOD_TOPIC_TITLE"]',resContainer).val(),sort=$('input[name="sort"]',resContainer).val(),rlVal=$('input[name="rlVal"]',resContainer).val(),resultsPerPage=$("#resultsPerPage",resContainer).val();if(topPage==undefined||bottomPage==undefined)topPage=bottomPage=1;if(currentPage!=topPage||currentPage!=bottomPage||(resultsPerPage!=mrwResults.config.prevResultsPerPage||
mrwResults.config.reloadPrevious)){var pageNo=Number(currentPage!=topPage?topPage:bottomPage);if(isNaN(pageNo)||(pageNo>Number(totalPages)||pageNo<=0))return false;if(mrwResults.config.prevResultsPerPage!=$("#resultsPerPage",resContainer).val())mrwResults.config.reloadPrevious=true;if(pageNo==1&&!mrwResults.config.txtSearched||mrwResults.config.reloadPrevious&&!mrwResults.config.txtSearched){$("#about_ref_mod .module_title").hide();$("#about_ref_mod .caption_text,.module_info").show();mrwResults.setPosition("#resultContainer")}else{$("#about_ref_mod .module_title").show();
$("#about_ref_mod .caption_text,.module_info").hide();mrwResults.setPosition("#moduleInfo")}mrwResults.config.prevResultsPerPage=$("#resultsPerPage",resContainer).val();if(mod_title!=""&&mod_title!=undefined)targetUrl+="&mod_topic_title="+mod_title;if(sort!=""&&targetUrl.indexOf("&sort=")==-1)targetUrl+="&sort="+sort;if(rlVal!=""&&targetUrl.indexOf("&rlVal=")==-1)targetUrl+="&rlVal="+rlVal;if($("li.Introductory",resContainer)[0])rlInfo="intro";if($("li.Advanced",resContainer)[0])rlInfo+=rlInfo!=""?
"|adv":"adv";if(rlInfo!="")targetUrl+="&_rlInfo="+rlInfo;var hashUrl=targetUrl.split("?");document.location.hash="#?"+hashUrl[1];if(targetUrl!="#"&&targetUrl!="")mrwResults.sendRequest(targetUrl);return false}else if(currentPage==topPage&&(currentPage==bottomPage&&mrwResults.config.ajaxSubmit))return false}},sendRequest:function(targetUrl){$.ajax({url:targetUrl,success:mrwResults.setResponse})},setResponse:function(data){if(mrwResults.config.reloadPrevious&&!mrwResults.config.txtSearched){$(".searchResults").hide();
$(".allResults").html(data).show();mrwResults.config.prevResultsPerPage=$("#resultsPerPage",".allResults").val();mrwResults.config.reloadPrevious=false}else if(mrwResults.config.txtSearched){if(!$(".searchResults")[0])$(mrwResults.config.resultBlk).append("<div class='searchResults'/>");$(".allResults").hide();$(".searchResults").html(data).show()}else{$(".searchResults").hide();$(".allResults").html(data).show()}$(".allResults #resultsPerPage, .searchResults #resultsPerPage",mrwResults.config.resultBlk).removeAttr("onchange");
exportCite.init();return false},setPosition:function(obj){$("html,body").stop().animate({scrollTop:$(obj).offset().top},500)},checkForHashChange:function(){var hash=window.location.toString().split("#")[1];if(hash){if(hash.indexOf("searchTerm=")>0){var startIndex=0,endIndex=0;startIndex=hash.indexOf("searchTerm=")+11;endIndex=hash.indexOf("&",startIndex);var sterm=hash.substring(startIndex,endIndex);$(mrwResults.config.searchBlk).find("input[type=text]").val(unescape(sterm));if(!mrwResults.config.placeHolderSupport)$(mrwResults.config.searchBlk).find("input[type=text]").css("color",
"#000000");$(mrwResults.config.searchBlk).find("span.clearField").css("visibility","visible");mrwResults.config.txtSearched=true}if(hash!="#clear")mrwResults.handleResultLinks();mrwResults.config.firstHit=false}else{if(!mrwResults.config.firstHit)mrwResults.handleResultLinks();mrwResults.config.txtSearched=false;$(mrwResults.config.searchBlk).find("input[type=text]").val("");if(!mrwResults.config.txtSearched)$(mrwResults.config.searchBlk).find("span.clearField").css("visibility","hidden")}}};
var chkFullTextAccess={init:function(){$("#accessChecks").on("click","input[type=checkbox]",chkFullTextAccess.handleCheck)},handleCheck:function(e){box=$(e.target)[0];updateAriaAttr(box);if($(box).attr("id")=="full-text-accessible-titles")chkFullTextAccess.checkAll(box);else if(box.checked==false)if($("#accessChecks input[name=entitle]:checked").not("#full-text-accessible-titles").size()==0)$("#full-text-accessible-titles").prop("checked",false).css("opacity","1").attr("aria-checked","false");else $("#full-text-accessible-titles").prop("checked",
true).css("opacity","0.5").attr("aria-checked","mixed");else if($("#accessChecks input[name=entitle]").size()==$("#accessChecks input[name=entitle]:checked").size())$("#full-text-accessible-titles").prop("checked",true).css("opacity","1").attr("aria-checked","true");else $("#full-text-accessible-titles").prop("checked",true).css("opacity","0.5").attr("aria-checked","mixed")},checkAll:function(box){$(box).css("opacity","1");if($(box).prop("checked")==true)$("#accessChecks input[type=checkbox]").prop("checked",
true);else $("#accessChecks input[type=checkbox]").prop("checked",false)}};function validateCO(form){var retVal=false;for(var i=0;i<form.dept.length;i++)if(form.dept[i].checked){retVal=true;break}if(!retVal)document.getElementById("noselect").style.display="";return retVal}
function placeHolderInit(){var placeHolderSupport=false;var test=document.createElement("input");if("placeholder"in test)placeHolderSupport=true;if(!placeHolderSupport)$("[placeholder]").focus(function(){var input=$(this);if(input.val()==input.attr("placeholder")){input.val("");input.removeClass("placeholder");if(input.hasClass("password")){input.removeClass("password");this.type="password"}}}).blur(function(){var input=$(this);if(input.val()==""||input.val()==input.attr("placeholder")){if(this.type==
"password"){input.addClass("password");this.type="text"}input.addClass("placeholder");input.val(input.attr("placeholder"))}}).blur().parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var input=$(this);if(input.val()==input.attr("placeholder"))input.val("")})})}
function setQuickSearch(){var winWidth=$(window).width();if($(window).height()<$(window).scrollHeight)winWidth-=16;if(winWidth<=1024)$(".quicksearch,.widget").addClass("low");else $(".quicksearch,.widget").removeClass("low");var isSDTechHeader=SDM.isSDTechHeader;var isHome=SDM.isHome;if(isSDTechHeader==false)if(winWidth>=1366)$("#header,#sdHeader").addClass("pgBorder");else $("#header,#sdHeader").removeClass("pgBorder")}
var adDisplay={init:function(){$(document).on("click",".closeBt",function(e){adDisplay.close(e)});if($("#skyscraper").height()==0)$(".skyScraper").removeClass("skyScraper")},close:function(e){var adBlock=$(e.target).closest(".adBlock");if(adBlock.attr("id")=="leaderboard")adBlock.animate({marginTop:-adBlock.outerHeight()},200,"linear",function(){adBlock.remove();Cookie.set("ad_leaderboard",1)});else if(adBlock.attr("id")=="skyscraper")adBlock.animate({width:0},200,"linear",function(){$(".contentBlock,.skyScraper").removeClass("skyScraper");
adBlock.remove();Cookie.set("ad_skyscraper",1)});else if(adBlock.attr("id")=="boombox")adBlock.animate({marginRight:-adBlock.outerWidth()},200,"linear",function(){adBlock.remove();Cookie.set("ad_boombox",1)})}};
var prodMsg={init:function(){var sdMsg=Cookie.get("sd_system_msg");if(!sdMsg){$("#sdSystemMsg").show();$(document).on("click","#sdSystemMsg .closeBt",function(e){prodMsg.close(e)})}else $("#sdSystemMsg").remove()},close:function(e){var msgBlock=$("#sdSystemMsg");msgBlock.animate({height:0},200,"linear",function(){msgBlock.remove();Cookie.set("sd_system_msg",1)})}};var popUpTimer,docTimer;
function handlePopup(event){if(event.type=="mouseenter"||event.type=="keydown"&&event.keyCode==13){var hide=function(event,$srcElm){if(typeof event.target!="undefined"){if(!$(event.target).closest(".pulldown")[0]||event.type=="click"){$(".pulldown a").not(".dropdownArrow").attr("aria-expanded","false");$(".pulldown a").not(".dropdownArrow").each(function(){$("#"+$(this).attr("aria-controls")).addClass("hidden")})}}else{$(".pulldown a").not(".dropdownArrow").attr("aria-expanded","false");$(".pulldown a").not(".dropdownArrow").each(function(){$("#"+
$(this).attr("aria-controls")).addClass("hidden")})}};hide(event);$('.button[aria-haspopup="true"]').on("click",function(e){e.preventDefault()});var $target=$(event.currentTarget);var controls=$target.attr("aria-controls");if(!controls||!controls.match(/^\w+/))return true;var $popup=$("#"+controls);var expanded=$target.attr("aria-expanded");var eventObj;if(expanded=="false"){$target.attr("aria-expanded","true");$popup.toggleClass("hidden","false")}$target.mouseleave(hide);clearTimeout(popUpTimer);
popUpTimer=setTimeout(function(){$(".pulldown a").not($target).attr("aria-expanded","false");$(".pulldown a").not($target).each(function(){$("#"+$(this).attr("aria-controls")).addClass("hidden")})},500);$(".pulldown .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);$(document).off("mousemove.doc").on("mousemove.doc",function(event){clearTimeout(docTimer);hide(event);eventObj=event;docTimer=setTimeout(function(){hide(eventObj)},
500)});if(expanded=="true")if(event.type=="keydown"&&event.keyCode==13){$target.attr("aria-expanded","false");$(".pulldown .dropdownArrow").removeClass("openDropdown");$popup.toggleClass("hidden","false")}else{$popup.on("mouseover.popup",function(event){if(0==$(event.target).closest('a, input[type="submit"]').length)event.stopPropagation()});$(".filterMenu").off("click.doc").on("click.doc",hide)}return false}}var exportClicked=false;var exportRefworks=false;var mendeleyZone="mendeleyWebImporter";
var exportCite={config:{exportType:"Export",exportCountValue:0,exportCitab:"cite-abs"},init:function(){formSubmit();$(document).keyup(function(e){if(e.keyCode==27)if($("#export_popup:visible")){$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");if($(".export_general").attr("aria-expanded")!=undefined)$(".export_general").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+
prodImagePath)}});$("body").on("click",function(e){if($(e.target).closest(".pulldown").length===0)if($("#export_popup:visible")){$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");if($(".export_general").attr("aria-expanded")!=undefined)$(".export_general").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath)}});$("body").off("click.exportBt").on("click.exportBt",
".export_button",function(e){internalExport(e);var zone=$("input[type='hidden'][name='zone']").val();internalExport(e);if(zone!="toolbar")$("input.zone").attr("value","exportDropDown")});$("body").off("click.directExport").on("click.directExport",".directExport",function(e){mendeleyZone="mendeleyWebImporter";directExport(e)});$("body").off("click.refworks").on("click.refworks","#REFWX",function(e){refworksClick(e)});$("body").off("click.exportArrow").on("click.exportArrow",".exportDivision",function(e){$("input.zone").attr("value",
"exportDropDown");$(".RIS").prop("checked",true);$(".pdf_export_popup .cite-abs").prop("checked",true);$(".export_popup .cite-abs").prop("checked",true);exportPopUp(e)});exportCite.config.exportCountValue=$("input[type='hidden'][name='art']").length+$("input.checkBox:checked:visible").length;exportCountMsg();$("body").off("click.checkBox").on("click.checkBox",".checkBox",function(e){if($(this).prop("checked"))exportCite.config.exportCountValue=parseInt(exportCite.config.exportCountValue)+1;else exportCite.config.exportCountValue=
parseInt(exportCite.config.exportCountValue)-1;exportCountMsg()})},Mendeley:function(){if(exportAvail||exportBook){MendeleyImporterApi.registerHostId("com.sciencedirect");MendeleyImporterApi.registerUserIdentityCallback(function(){return getUserIdentity()});MendeleyImporterApi.registerDataCallback(function(bookmarklet){return getExportInfo(bookmarklet)})}}};
function formSubmit(){$("#sdHeader").off("submit").on("submit","form",function(){if(exportRefworks){$(this).attr("target","_blank");exportRefworks=false}else if(exportClicked){$(this).attr("target","_blank");exportClicked=false}else $(this).removeAttr("target")})}
function internalExport(e){exportCite.config.exportType=$(e.currentTarget).closest(".menu").find(".export_radio input:radio:checked").val();exportCite.config.exportCitab=$(e.currentTarget).closest(".menu").find(".expCitab.export_radio input:radio:checked").val();$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);if(exportCite.config.exportType==
"ASCII")exportClicked=true;$(".export_general").removeAttr("aria-expanded");$(".export_general").removeAttr("aria-controls")}
function exportPopUp(event){var menu=$(".export_popup");var aria=$(".dropdownArrow");if(aria.attr("aria-expanded")=="true"){aria.attr("aria-expanded","false");if($(".export_general").attr("aria-expanded")!=undefined)$(".export_general").attr("aria-expanded","false");menu.addClass("hidden");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath)}else{aria.attr("aria-expanded","true");if($(".export_general").attr("aria-expanded")!=
undefined)$(".export_general").attr("aria-expanded","true");menu.removeClass("hidden");$(".exportDivision .dropdownArrow").addClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).addClass("up_"+prodImagePath)}if($(".REFWX").prop("checked"))$(".RIS").prop("checked",true)}
function directExport(event){$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);$(".export_general").removeAttr("aria-expanded");$(".export_general").removeAttr("aria-controls");MendeleyImporterApi.open();exportCite.Mendeley()}
function refworksClick(event){$(event.currentTarget).closest("form").attr("target","_blank");$(".export_radio.hidden").prop("checked",true);exportRefworks=true;$(".REFWX").prop("checked",true);$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);$(".export_general").removeAttr("aria-expanded");$(".export_general").removeAttr("aria-controls");
$(event.currentTarget).closest(".pulldown").find(".menu .export_button").trigger("click")}
function getUserIdentity(){var returnJSON={};var userIdentityUrl="/science/export/userIdentity";var isBook=$('input[name="isBook"]').val();var isbn=$('input[name="_isbn"]').val();var passBkMend=$('input[name="passBkMend"]').val();var bookTitle=$(".pubTitle").text();if(mendeleyZone)userIdentityUrl=userIdentityUrl+"?zone="+mendeleyZone;if(isBook=="book"&&passBkMend=="Y"){if(isbn)userIdentityUrl=userIdentityUrl+"&isbn="+isbn;if(bookTitle)userIdentityUrl=userIdentityUrl+"&bookTitle="+bookTitle}jQuery.ajax({url:userIdentityUrl,
type:"GET",dataType:"json",success:function(data){returnJSON["hash"]=data.hash;delete data.hash;returnJSON["json"]=JSON.stringify(data)},async:false,error:function(d){if(typeof console!="undefined")console.log("Error on getting Encrypted AuthToken")}});return returnJSON}
function getExportInfo(bookmarklet){var jsonToMendeley=[];var tempStr;var pos;var i=0;if(bookmarklet){var pagePIIs={};jQuery("input[type='checkbox'][name='art']:visible").each(function(key,value){tempStr=jQuery(this).val();pos=tempStr.lastIndexOf("-");tempStr=tempStr.substring(pos+1,tempStr.length);pagePIIs.pii=tempStr;jsonToMendeley[i]=pagePIIs;pagePIIs={};i++});return jsonToMendeley}else{var count=exportCite.config.exportCountValue;var origin=$('input[name="_origin"]').val();var rec_art_listId=
"";rec_art_listId=$('input[name="REC_ARTLIST_ID"]').val();if(count!=0){var pagePIIs={};jQuery("input[type='hidden'][name='art']").each(function(key,value){tempStr=jQuery(this).val();pos=tempStr.lastIndexOf("-");tempStr=tempStr.substring(pos+1,tempStr.length);pagePIIs.pii=tempStr;jsonToMendeley[i]=pagePIIs;pagePIIs={};i++});jQuery("input[type='checkbox'].checkBox:checked:visible").each(function(key,value){tempStr=jQuery(this).val();pos=tempStr.lastIndexOf("-");tempStr=tempStr.substring(pos+1,tempStr.length);
pagePIIs.pii=tempStr;jsonToMendeley[i]=pagePIIs;pagePIIs={};i++});$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);return jsonToMendeley}else if(origin=="purchase_hist"||rec_art_listId){var pagePIIs={};jQuery("input[type='checkbox'][name='art']").each(function(key,value){tempStr=jQuery(this).val();pos=tempStr.lastIndexOf("-");
tempStr=tempStr.substring(pos+1,tempStr.length);pagePIIs.pii=tempStr;jsonToMendeley[i]=pagePIIs;pagePIIs={};i++});$(".export_popup").addClass("hidden");$(".dropdownArrow").attr("aria-expanded","false");$(".exportDivision .dropdownArrow").removeClass("openDropdown");$(".exportDivision span.down_"+prodImagePath).removeClass("up_"+prodImagePath);return jsonToMendeley}else{var articleListID=$('input[name="_ArticleListID"]').val();if(typeof articleListID=="undefined"){articleListID=$('input[name="ArticleListID"]').val();
if(typeof articleListID=="undefined")articleListID=""}var modSearch=$('input[name="searchTerm"]').val();var sortVal="";if($("div.searchResults div.sorting")[0]){sortVal=$("div.searchResults div.sorting").find("div.sortLinks li.selected").text();sortVal=$.trim(sortVal)}var rlVal,rsltObj="";if(modSearch)rsltObj=$("div.searchResults div.sorting");else rsltObj=$("div.allResults div.sorting");if($(rsltObj)[0]){rlVal=$(rsltObj).find("div.filterLinks li.selected").text();rlVal=$.trim(rlVal)}var hubEID=$('input[name="_hubEid"]').val();
var pgType=$('input[name="pgType"]').val();var mlktType=$('input[name="_mlktType"]').val();var mod_cid=$('input[name="MOD_CID"]').val();var mod_isbn=$('input[name="MOD_ISBN"]').val();var conceptId=$('input[name="topic"]').val();var cid=$('input[name="_cid"]').val();var isAip=$('input[name="isAip"]').val();var book_isbn=$('input[name="_isbn"]').val();var bookSearch=$('input[name="_searchTerm"]').val();var bookSearchResults=$('input[name="isBookResults"]').val();var actionVal=$('form[name="Tag"]').attr("action");
var isbnArray=actionVal.split("/");var isbn="";var modSearch=$('input[name="searchTerm"]').val();if(isbnArray.length==4)var isbn=isbn[isbn.length-1];var isStarted="";var exportInfoUrl="/science/export/exportInfo/?";if(articleListID)exportInfoUrl=exportInfoUrl+"articleListID="+articleListID;if(pgType)exportInfoUrl=exportInfoUrl+"&pgType="+pgType;if(hubEID)exportInfoUrl=exportInfoUrl+"hubEID="+hubEID;if(rlVal)exportInfoUrl=exportInfoUrl+"&rlVal="+rlVal;if(modSearch)exportInfoUrl=exportInfoUrl+"&modSearch="+
modSearch;if(mod_cid)exportInfoUrl=exportInfoUrl+"&mod_cid="+mod_cid;if(conceptId)exportInfoUrl=exportInfoUrl+"&conceptId="+conceptId;if(mod_isbn)exportInfoUrl=exportInfoUrl+"&mod_isbn="+mod_isbn;if(sortVal)exportInfoUrl=exportInfoUrl+"&sort="+sortVal;if(pgType=="module"||pgType=="topic")exportInfoUrl=exportInfoUrl+"&_origin="+"ref_work";if(cid)exportInfoUrl=exportInfoUrl+"&cid="+cid;if(isAip=="TRUE")exportInfoUrl=exportInfoUrl+"&isAip="+isAip;if(book_isbn)exportInfoUrl=exportInfoUrl+"&bookIsbn="+
book_isbn;if(bookSearch)exportInfoUrl=exportInfoUrl+"&bookSearchTerm="+bookSearch;if(bookSearchResults)exportInfoUrl=exportInfoUrl+"&isBookResults="+bookSearchResults;if(mlktType)exportInfoUrl=exportInfoUrl+"&_mlktType="+mlktType;jQuery.ajax({url:exportInfoUrl,type:"GET",dataType:"json",success:function(data){jsonToMendeley=data},async:false,error:function(d){if(typeof console!="undefined")console.log("Error on Export Info")}});return jsonToMendeley}}}
function exportCountMsg(){if(exportCite.config.exportCountValue==0){var hitCount=0;var chunkSize=0;var isMlkt="";var len=0;isMlkt=$('input[name="REC_ARTLIST_ID"]').val();var orgin="";hitCount=parseInt($('input[name="hitCount"]').val());chunkSize=parseInt($('input[name="chunkSize"]').val());orgin=$('input[name="_origin"]').val();if(orgin)len=orgin.length;if(len==0)orgin=$('input[name="pgType"]').val();if(orgin)if(orgin=="module"||orgin=="ref_work"){hitCount=parseInt($('input[name="ARTICLE_COUNT"]').val());
chunkSize=parseInt($('input[name="_ct"]').val())}else{if(orgin=="topic"||isMlkt){hitCount=0;chunkSize=0}}else;if(hitCount!=0&&chunkSize!=0&&hitCount>chunkSize){$(".chkboxCount").text("All citation information will be exported.");$(".export_popup .warningIcon").show();$(".cit").text("Citations only");$(".cab").text("Citations and abstracts");$(".citab").prop("checked",true);$(".export_pageSubHead tr").children().eq(0).removeClass("countTd");$(".export_pageSubHead tr").children().eq(1).removeClass("helpTd")}else{$(".chkboxCount").text("All citation information on this page will be exported.");
$(".export_popup .warningIcon").show();$(".cit").text("Citations Only");$(".cab").text("Citations and Abstracts");$(".citab").prop("checked",true);$(".export_pageSubHead tr").children().eq(0).addClass("countTd");$(".export_pageSubHead tr").children().eq(1).addClass("helpTd")}}else if(exportCite.config.exportCountValue==1){$(".chkboxCount").text("You have selected "+exportCite.config.exportCountValue+" citation for export.");$(".export_popup .warningIcon").hide();$(".cit").text("Citation Only");$(".cab").text("Citation and Abstract");
$(".export_pageSubHead tr").children().eq(0).removeClass("countTd");$(".export_pageSubHead tr").children().eq(1).removeClass("helpTd")}else{$(".chkboxCount").text("You have selected "+exportCite.config.exportCountValue+" citations for export.");$(".export_popup .warningIcon").hide();$(".cit").text("Citations Only");$(".cab").text("Citations and Abstracts")}}
var filterTitles={alpha:"",pubType:"",accessType:"",init:function(){$(".pulldown").on("click",".menu li",filterTitles.applyFilter);filterTitles.generateAlphaFilter("*","*")},applyFilter:function(e){e.preventDefault();e.stopPropagation();var elementSelected="",alphaFilter=false;if($(e.currentTarget)[0].tagName=="LI")elementSelected=$(e.currentTarget).find("a:first");else elementSelected=$(e.currentTarget);if(elementSelected.hasClass("filterDisabled"))return;var filter=elementSelected.attr("data-filter");
var type=elementSelected.attr("data-filtertype");if(type=="alpha"){var selectedAlpha=$.trim(elementSelected.text());var previousAlpha="";previousAlpha=elementSelected.closest("ul.alphabet").find("h2.browseLeft > span.linkopenBrws").text();elementSelected.closest("ul.alphabet").find("h2.browseLeft").replaceWith('<a data-filtertype="alpha" href="#'+previousAlpha+'" class="canonBrowseLink">'+previousAlpha+"</a>");elementSelected.closest(".pulldown").find(".selectedAlpha").text('"'+selectedAlpha+'"').removeClass("hidden");
if(selectedAlpha!="All"){filterTitles.alpha=selectedAlpha;elementSelected.closest(".pulldown").find(".alphaText").text("Titles starting with")}else{filterTitles.alpha="";elementSelected.closest(".pulldown").find(".alphaText").text("All titles");elementSelected.closest(".pulldown").find(".selectedAlpha").addClass("hidden")}elementSelected.replaceWith('<h2 class="browseLeft"><span class="linkopenBrws '+selectedAlpha+'">'+selectedAlpha+'</span><span class="txtHidden"> selected</span></h2>');alphaFilter=
true}if(type=="publication"||type=="access"){if(type=="publication"){filterTitles.pubType=filter;if("B,RW".indexOf(filter)>=0)$("a[data-filter='OA,ConOA'],a[data-filter='OA'],a[data-filter='ConOA']").addClass("filterDisabled");else $("a[data-filter='OA,ConOA'],a[data-filter='OA'],a[data-filter='ConOA']").removeClass("filterDisabled")}if(type=="access"){filterTitles.accessType=filter;if("OA,ConOA".indexOf(filter)>=0)$("a[data-filter='B'],a[data-filter='RW']").addClass("filterDisabled");else $("a[data-filter='B'],a[data-filter='RW']").removeClass("filterDisabled")}if(filterTitles.pubType==
"All")filterTitles.pubType="";if(filterTitles.accessType=="All")filterTitles.accessType="";var selectedText=$.trim(elementSelected.text());var previousText="";previousText=elementSelected.closest("ul").find("a.itemSelected").text();elementSelected.closest(".pulldown").find("a.itemSelected").removeClass("itemSelected");elementSelected.addClass("itemSelected");elementSelected.closest(".pulldown").find(".selectedFilter").text(selectedText);alphaFilter=false}filterTitles.filterResults(alphaFilter);filterTitles.updateCount();
filterTitles.hidePopup()},filterResults:function(alphaFilter){var pubClassName="*",accessClassName="*";$(".brwPubList > li").hide();if(filterTitles.pubType!="")if(filterTitles.pubType.split(",").length>1)pubClassName="."+filterTitles.pubType.replace(/,/g,",.");else pubClassName="."+filterTitles.pubType;if(filterTitles.accessType!="")if(filterTitles.accessType.split(",").length>1)accessClassName="."+filterTitles.accessType.replace(/,/g,",.");else accessClassName="."+filterTitles.accessType;if(filterTitles.alpha!=
""){$(".brwPubList > li").each(function(i){var compareFirstLetter=$(this).text().substr(0,1).toUpperCase();var regex=/^[0-9]/;if(compareFirstLetter==filterTitles.alpha)$(this).closest("li").filter(pubClassName).filter(accessClassName).show();else if(regex.test(compareFirstLetter)&&filterTitles.alpha=="0-9")$(this).closest("li").filter(pubClassName).filter(accessClassName).show()});if(!alphaFilter)filterTitles.generateAlphaFilter(pubClassName,accessClassName)}else{$(".brwPubList > li").filter(pubClassName).filter(accessClassName).show();
filterTitles.generateAlphaFilter(pubClassName,accessClassName)}if($.trim(filterTitles.accessType)=="tSearchSub")$(".filterContainer,.brwPubList").addClass("subSelected");else $(".filterContainer,.brwPubList").removeClass("subSelected");if(filterTitles.pubType=="J"||filterTitles.pubType=="RW"){$(".filterContainer .yearColumn").addClass("hidden");$(".brwPubList li li.titleResultsColSecond").addClass("hidden");$(".filterContainer,.brwPubList").removeClass("bookYear")}else{var size=$(".brwPubList > li:visible .titleResultsColSecond:not(:empty)").size();
if(size==0){$(".filterContainer .yearColumn").addClass("hidden");$(".brwPubList li li.titleResultsColSecond").addClass("hidden");$(".filterContainer,.brwPubList").removeClass("bookYear")}else{$(".filterContainer .yearColumn").removeClass("hidden");$(".brwPubList li li.titleResultsColSecond").removeClass("hidden");$(".filterContainer,.brwPubList").addClass("bookYear")}}},updateCount:function(){var count=$(".brwPubList > li:visible").size();if(count==0)$(".titleCount").text("No");else if(count==1){$(".titleCount").text(count);
$(".titleCountDesc").text("title found")}else{$(".titleCount").text(count);$(".titleCountDesc").text("titles found")}if($(".brwPubList > li:visible").size()==0)if($("div.msgBox")[0])$("div.msgBox").show();else $(".browseMain").append('<div style="margin:10px;" class="msgBox"><div class="imgIcon"><h3><img title="Alert Message" alt="Alert Message" src="/sd/alertIcon.gif"></h3></div><div class="errMsgText" id="errorMsg">No publications were found for the criteria specified.<br>Please change your filter settings to try again.</div></div>');
else $("div.msgBox").hide()},hidePopup:function(elementSelected){if(!$(".pulldown")[0]){$(".pulldown a").attr("aria-expanded","false");$(".pulldown a").each(function(){$("#"+$(this).attr("aria-controls")).addClass("hidden")})}},generateAlphaFilter:function(pubClassName,accessClassName){var html=[];var alpha=[];var containsNumeric=false;$(".brwPubList > li").filter(pubClassName).filter(accessClassName).find("ul > li.titleResultsColFirst").each(function(){alpha.push($(this).text().substr(0,1));if(!isNaN($(this).text().substr(0,
1)))containsNumeric=true});$.unique(alpha);for(var i=65;i<=90;i++)if($.inArray(String.fromCharCode(i),alpha)>-1)if(filterTitles.alpha==String.fromCharCode(i))html.push('<li class="browseAlphaLink"><h2 class="browseLeft"><span class="linkopenBrws '+String.fromCharCode(i)+'">'+String.fromCharCode(i).toUpperCase()+'<span class="txtHidden"> selected</span></span></h2></li>');else html.push('<li class="browseAlphaLink"><a data-filtertype="alpha" class="'+String.fromCharCode(i)+'" href="#">'+String.fromCharCode(i).toUpperCase()+
"</a></li>");else html.push('<li class="browseAlphaLink"><span class="linkdisabled '+String.fromCharCode(i)+'">'+String.fromCharCode(i).toUpperCase()+"</span></li>");if($(".brwPubList > li").filter(pubClassName).filter(accessClassName).find("ul > li.titleResultsColFirst").size()>0){if(filterTitles.alpha=="0-9")html.push('<li class="browseAlphaLink"><h2 class="browseLeft"><span class="linkopenBrws 0-9">0-9 </span><span class="txtHidden"> selected</span></h2></li>');else if(containsNumeric)html.push('<li class="browseAlphaLink"><a data-filtertype="alpha" href="#0-9" class="canonBrowseLink">0-9 </a></li>');
else html.push('<li class="browseAlphaLink"><span class="linkdisabled 0-9">0-9 </span></li>');if(filterTitles.alpha=="")html.push('<li class="browseAlphaLink"><h2 class="browseLeft"><span class="linkopenBrws all">All </span><span class="txtHidden"> selected</span></h2></li>');else html.push('<li class="browseAlphaLink"><a data-filtertype="alpha" href="#all" class="canonBrowseLink">All </a></li>')}else{html.push('<li class="browseAlphaLink"><span class="linkdisabled 0-9">0-9 </span></li>');html.push('<li class="browseAlphaLink"><span class="linkdisabled all">All </span></li>')}$(".pulldown ul.alphabet").html(html.join(""))},
sendKeyEvents:function(){}};
var BookSearch={config:{searchBlk:"#EbookSearchContainer",txtSearched:false,placeholderTxt:"Search within this book",placeHolderSupport:false,lastHash:"",hashInterval:"",docTitle:""},init:function(){$(this.config.searchBlk).show();var $inputBox=$(this.config.searchBlk).find("input[type=text]");var test=document.createElement("input");if("placeholder"in test){this.config.placeHolderSupport=true;$inputBox.attr("placeholder",BookSearch.config.placeholderTxt)}else $inputBox.val(BookSearch.config.placeholderTxt).css("color","#9B9B9B");
BookSearch.hashInterval=setInterval(BookSearch.checkForHashChange,200);this.initEventHandlers();BookSearch.config.docTitle=$(document).attr("title")},initEventHandlers:function(){$(this.config.searchBlk).on("submit","form",BookSearch.handleSearch);$(this.config.searchBlk).on("click",".clearButton",BookSearch.switchToDefaultView);$(".bookSrchRslts").off("click").on("click","a.spellSuggest",BookSearch.handleSearch);var $inputBox=$(BookSearch.config.searchBlk).find("input[type=text]");if(!BookSearch.config.placeHolderSupport){$inputBox.unbind("focus").bind("focus",
function(){$(this).css("color","#000000");if($(this).val()==BookSearch.config.placeholderTxt)$(this).val("");else if($(this).val()!=BookSearch.config.placeholderTxt&&$(this).val()!="")$(this).parent().find(".clearButton span.clearField").css("visibility","visible")});$inputBox.unbind("keypress").bind("keypress",function(){if($(this).val()!=""&&$(this).val()!=BookSearch.config.placeholderTxt)$(this).parent().find(".clearButton span.clearField").css("visibility","visible");else $(this).parent().find(".clearButton span.clearField").css("visibility",
"hidden")});$inputBox.unbind("blur").bind("blur",function(){if($(this).val()=="")$(this).val(BookSearch.config.placeholderTxt).css("color","#9B9B9B");else if($(this).val()!=BookSearch.config.placeholderTxt)$(this).parent().find(".clearButton span.clearField").css("visibility","visible")})}$inputBox.unbind("keyup").bind("keyup",function(){if($(this).val()!=""&&$(this).val()!=BookSearch.config.placeholderTxt)$(this).parent().find("span.clearField").css("visibility","visible");else if(!BookSearch.config.txtSearched)$(this).parent().find("span.clearField").css("visibility",
"hidden")})},handleSearch:function(e){e.preventDefault();if($(this).closest("form").attr("_submit_attached"))$(this).closest("form").removeAttr("_submit_attached");var obj=$(e.target).closest("a");var searchTerm="";if($(obj).hasClass("spellSuggest")){searchTerm=$(obj).attr("data-suggStr");$(BookSearch.config.searchBlk).find('input[name="book"]').val(searchTerm)}else searchTerm=$(BookSearch.config.searchBlk).find('input[name="book"]').val();var cid=$('input[name="cid"]').val();BookSearch.config.txtSearched=
true;if(searchTerm!=""&&(searchTerm!=BookSearch.config.placeholderTxt&&searchTerm!="undefined")){var encSearchTerm=encodeURIComponent(searchTerm);var targetUrl="/"+SD_URL_QUALIFIER+"/booksearch?_searchTerm="+encSearchTerm+"&_cid="+cid;document.location.hash="srch="+searchTerm;BookSearch.lastHash="srch="+searchTerm;$.ajax({url:targetUrl,success:BookSearch.setResponse})}else{document.location.hash="srch=";var data='<div class="resultsHeader"></div><div class="msgBox"><div class="imgIcon"><img src="/sd/errorIcon.gif" alt="Error" title="Error"></div><div class="errMsgText">';
data+="No search term entered.</div></div>";var inputBox=$(BookSearch.config.searchBlk).find("input[type=text]");inputBox.attr("placeholder","").val("").unbind("focus blur");$(this).parent().find("span.clearField").css("visibility","visible");BookSearch.setResponse(data)}},setResponse:function(data){var srchBox=$("#EbookSearchContainer").clone();$("#EbookSearchContainer").remove();$("div.eBookContents").hide();$("div.bookSrchRslts").html(data);$("div.bookSrchRslts div.resultsHeader").append(srchBox);
BookSearch.initEventHandlers();$("div.bookSrchRslts").removeClass("hidden");$("div#EbookSearchContainer input.field")[0].focus();if($(".resultCount")[0]){var resCount=$(".resultCount strong").eq(0).text();$(document).attr("title",resCount+" Search results found - "+BookSearch.config.docTitle)}else $(document).attr("title","No results found - "+BookSearch.config.docTitle);exportCite.init()},switchToDefaultView:function(e){if(e)e.preventDefault();var $inputBox=$(BookSearch.config.searchBlk).find("input[type=text]");
$inputBox.val("");$(BookSearch.config.searchBlk).find("span.clearField").css("visibility","hidden");if(BookSearch.config.placeHolderSupport)$inputBox.attr("placeholder",BookSearch.config.placeholderTxt);else $inputBox.val(BookSearch.config.placeholderTxt).css("color","#9B9B9B");if(BookSearch.config.txtSearched){var srchBox=$("#EbookSearchContainer").clone();$("#EbookSearchContainer").remove();$("div.eBookContents .toc_header").append(srchBox);BookSearch.initEventHandlers();if(document.location.hash&&
document.location.hash.indexOf("srch=")!=-1)document.location.hash=""}BookSearch.config.txtSearched=false;$("div.eBookContents").show();$("div#EbookSearchContainer input.field")[0].focus();$("div.bookSrchRslts").addClass("hidden");$(document).attr("title",BookSearch.config.docTitle);exportCite.init()},checkForHashChange:function(){var hash=document.location.hash;if(hash)if(hash.indexOf("srch=")!=-1){hash=hash.substr(1);if(hash!=BookSearch.lastHash){var sterm=hash.split("srch=");$(BookSearch.config.searchBlk).find("input[type=text]").val(sterm[1]);
if(!BookSearch.config.placeHolderSupport)$(BookSearch.config.searchBlk).find("input[type=text]").css("color","#000000");$(BookSearch.config.searchBlk).find("span.clearField").css("visibility","visible");$(BookSearch.config.searchBlk).find("form").submit();BookSearch.lastHash=hash}}else{if($("div.bookSrchRslts").is(":visible")){BookSearch.lastHash=hash;BookSearch.config.txtSearched=true;BookSearch.switchToDefaultView()}}else if($("div.bookSrchRslts").is(":visible")){BookSearch.lastHash="";BookSearch.config.txtSearched=
true;BookSearch.switchToDefaultView()}}};
$.fn.scrollToTopic=function(opts){var cfg={selTopic:""};return this.each(function(){if(opts)$.extend(cfg,opts);var $scrollContainer=$(this);var $topic=$(cfg.selTopic,this);if(!$topic.length)return false;var vx=$scrollContainer.width();var vy=$scrollContainer.height();var pos=$topic.position();var size={"width":$topic.outerWidth(),"height":$topic.outerHeight()};if(size.width>vx)if(pos.left>vx/2)sl=vx/2;else sl=0;else if(pos.left>vx/2)sl=vx/2;else sl=0;if(size.height>vy)st=pos.top+20;else st=pos.top+
size.height-(vy+16)*0.8;if(0>sl)sl=0;if(0>st)st=0;$scrollContainer.animate({"scrollTop":st,"scrollLeft":sl})})};var homeaccPopup={closePopup:function(){document.getElementById("homeAccMsgWindow").style.display="none";Cookie.set("homeacc_pop",1)},init:function(){var msgBox=$("#homeAccPopupBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox.outerHeight())/2;var left=(winWidth-msgBox.outerWidth())/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px")}};
var eCredPopup={closePopup:function(){document.getElementById("confirmation_popup").style.display="none"},init:function(){var msgBox=$("#eCredPopupBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox.outerHeight())/2;var left=(winWidth-msgBox.outerWidth())/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px")}};
var refModSrp={init:function(){refModSrp.getRefModSrp()},getRefModSrp:function(){$.getJSON(SDM.ep.modSrp.REF_MOD_SRP_URL,refModSrp.buildRefModSrp).error(function(){$(".RMtopics").remove()})},buildRefModSrp:function(res){if(SDM.ep.modSrp.IGNORE_RMS_RESPONSE=="Y")return;if(res){var suggestTopics=res.results;var htmlStr="";if(suggestTopics.length<=0)return;$(".srchRightCol .container").prepend('<div id="refmodtopics" role="region" aria-label="Reference Module Topics" class="RMtopics"></div>');htmlStr+=
"<h2>Fundamentals on</h2>";htmlStr+="<ul>";$.each(suggestTopics,function(i,rslts){var taxonamyBranch=rslts.taxonomyBranch;$.each(taxonamyBranch,function(i,item){var conceptUri="";if(item.conceptId&&item.conceptISBN)conceptUri="/"+SD_URL_QUALIFIER+"/module/topic/"+item.conceptISBN+"/"+item.conceptId;else if(item.conceptISBN)conceptUri="/"+SD_URL_QUALIFIER+"/referenceworks/"+item.conceptISBN;htmlStr+='<li class="suggestions">';htmlStr+='<a href="'+conceptUri+'" rel="nofollow,noindex"  class="cLink" title="'+
item.prefLabel+'" queryStr="?_origin=rslt_list&_zone=relatedRefModContainer">';if(item.prefLabel!="")htmlStr+='<div class="preflabel multiline">'+item.prefLabel+"</div> </a>";if(item.parentPrefLabel!=undefined)htmlStr+='<div class="parentlabel">'+item.parentPrefLabel+"</div>";htmlStr+="</li>"})});htmlStr+="</ul>";$(".RMtopics").html(htmlStr).show();$(".RMtopics").after('<div class="seperator"/>');$("li.suggestions div.preflabel").addEllipsis()}}};
var SuggestedBooks={init:function(){SuggestedBooks.getSuggestedBooks()},getSuggestedBooks:function(){$.getJSON(SDM.pf.sb.url,SuggestedBooks.buildSuggestions).error(function(){$(".suggestedBooks").remove()})},buildSuggestions:function(res){if(res){var suggestions=res.BookSuggestions;var htmlStr="";if(suggestions.length<=0)return;htmlStr+="<h2>Related books</h2>";htmlStr+="<ul>";$.each(suggestions,function(i,item){htmlStr+='<li class="suggestions"> <div class="suggestionImg">';htmlStr+='<a href="'+
item.pubHomeUrl+'" queryStr="?_origin=rslt_list&_zone=relatedBooksContainer">';htmlStr+='<span class="pubImage"><img src="'+item.pubCoverUrl+'" alt=""/></span>';htmlStr+="</a></div>";htmlStr+='<div class="suggestionContent"><a href="'+item.pubHomeUrl+'" queryStr="?_origin=rslt_list&_zone=relatedBooksContainer" title="'+item.bookTitle+'" >';htmlStr+='<span class="pubTitle multiline">'+item.bookTitle+"</span>";htmlStr+="</a>";htmlStr+="<p >"+item.pubYear+"</p>";if(item.pubAuthor!="undefined")htmlStr+=
'<p class="suggestionAuthTxt multiline" title="'+item.pubAuthor+'">'+item.pubAuthor+"</p>";htmlStr+="</div></li>"});htmlStr+="</ul>";$(".amtResults, .noRefineResults, .alertMesg, #rsRightCol").addClass("suggBooks");$(".cbodyAllResults").css("padding-right","0px");$(".suggestedBooks").html(htmlStr).show();$(".suggestedBooks").after('<div class="seperator"/>');$(".suggestedBooks span.pubTitle,.suggestedBooks p.suggestionAuthTxt").addEllipsis()}}};
var entitlementIcons={oaTitle:"Open Access Journal - click for details",oaText:"Open Access",coaTitle:"Journal contains Open Access articles - click for details",coaText:"Contains Open Access",jsTitle:"Full-text available - click for details",jusTitle:"Abstract only - click for details",init:function(){var keyArr=new Array;var cid;$("li.browseColFourth:empty").each(function(){var hubeid=$(this).attr("data-hubeid");if(hubeid=="")cid=$(this).attr("id");else cid=$(this).attr("data-cid");keyArr.push({"cid":cid,
"hubeid":hubeid})});var jsondata=JSON.stringify(keyArr);$.ajax({type:"POST",url:ENTITLE_URL,data:{data:jsondata},dataType:"json",success:function(data){var keyJSON=JSON.stringify(data);var html="";var entColElm;$(data.keyIds).each(function(index){if(typeof this.hubEid!="undefined")entColElm=$(document.getElementById(this.hubEid));else entColElm=$("[data-cid="+this.cid+"]");html="<a href='javascript:void(0)'"+" summaryurl='/science/subscriptionSummary/"+this.cid+"/"+entColElm.attr("data-pubType")+
"' summaryimgname='img"+this.cid+"' id='key_"+this.cid+"' onclick='openSummary(this)' class='popupLink popupSummaryAcc'>";html+=entitlementIcons.generateEntitlementHTML(this.entType,"icon")+"</a>";html+=entitlementIcons.generateEntitlementHTML(this.entType,"text");entColElm.html(html)})}})},generateEntitlementHTML:function(entType,tagType){var html="",iconClass="icon_fulltext",icoTitle=entitlementIcons.jsTitle,entText="";if(entType=="sub"){iconClass="icon_fulltext";icoTitle=entitlementIcons.jsTitle;
entText=""}else if(entType=="nonsub"){iconClass="icon_abstract";icoTitle=entitlementIcons.jusTitle;entText=""}else if(entType=="OA"){iconClass="icon_OA";icoTitle=entitlementIcons.oaTitle;entText=entitlementIcons.oaText}else if(entType=="subCOA"||entType=="nonsubCOA"){iconClass="icon_containsOA";icoTitle=entitlementIcons.coaTitle;entText=entitlementIcons.coaText;if(entType=="nonsubCOA")iconClass="icon_containsabstractOA"}if(tagType=="icon")html='<div class="'+iconClass+'" title="'+icoTitle+'" alt="'+
icoTitle+'">&nbsp;'+'<span class="offscreen">'+icoTitle+"</span></div>";else html='<div class="openAccessTxt" title="'+entText+'">'+entText+"</div>";return html}};function triggerUsabillaLive(){pdfDownloadBtn="article";if(SDM.ep.enableUsabillaMsg=="Y")window.usabilla_live("trigger","article")};
