ag.search={};ag.search.currentPage=1;ag.search.filters={category:null,tag:null,rating:null};ag.search.filterHeights={category:{contracted:84,expanded:180},tag:{contracted:102,expanded:728}};ag.search.keyword=null;ag.search.sortType=null;ag.search.url="/search/filter-games.jsp?";ag.search.init=function(){var a=btg.String.queryStringToObject(window.location.search);ag.search.keyword=a.gameKeyword;"undefined"!==typeof a.pageNo&&(ag.search.currentPage=parseInt(a.pageNo))};
ag.search.returnSortParamString=function(a){var b=[[ag.search.keyword,"gameKeyword\x3d"],[ag.search.sortType,"sortBy\x3d"],[ag.search.filters.category,"category\x3d"],[ag.search.filters.tag,"tag\x3d"],[ag.search.filters.rating,"contentRating\x3d"]],d=[];a&&b.push([ag.search.currentPage,"pageNo\x3d"]);for(a=0;a<b.length;a++)null!==b[a][0]&&d.push(b[a][1]+b[a][0]);return d.join("\x26")};ag.search.setFilter=function(a,b){ag.search.filters[a]=b};
ag.search.expandFilterList=function(a){var b="#"+a+"List";$("#"+a+"Label").removeClass("contracted").addClass("expanded");$(b+" li.showMoreFilters").hide();$(b).animate({height:ag.search.filterHeights[a].expanded})};ag.search.contractFilterList=function(a){var b=$("#"+a+"List");$("#"+a+"Label").removeClass("expanded").addClass("contracted");b.height()===ag.search.filterHeights[a].expanded&&b.animate({height:ag.search.filterHeights[a].contracted},function(){$("#"+a+"List li.showMoreFilters").show()})};
ag.search.filterClickHandler=function(a){return function(b){var d={"ALL AGES":"1","TWEEN+":"100","TEEN+":"200","TEEN CAUTION":"201"},c=null,e="#"+a+"List li";b=$(b.target);b.hasClass("showMoreFilters")?ag.search.expandFilterList(a):(b.hasClass("active")?b.removeClass("active"):(c="rating"===a?d[$(this).text()]:$(this).text(),$(e).removeClass("active"),b.addClass("active")),"category"===a&&null!==c&&(c=$.trim(c)+" Games",c=encodeURIComponent(c)),"tag"===a&&null!==c&&(c=c.toLowerCase(),c="brain teasers \x26 quizzes"===
c?"quiz":"two-player"===c?"multi-player":"high scores"===c?"high-score":"teens"===c?"teen":"cute shooters"===c?"cute-shooter":c.replace(" ","-")),ag.search.setFilter(a,c),ag.search.getResults(ag.search.returnSortParamString(!1)))}};ag.search.updateResultCount=function(){$("#searchResultsNumber").text($("#searchResultsNumberSource").text())};ag.search.getResults=function(a){a=ag.search.url+a;$("#resultsContainer").load(a,ag.search.updateResultCount)};
ag.search.loadPage=function(a){ag.search.currentPage=a;ag.search.getResults(ag.search.returnSortParamString(!0))};
$(document).ready(function(){ag.search.init();for(var a in ag.search.filters)$("#"+a+"List \x3e li").click(ag.search.filterClickHandler(a));$("#categoryLabel").click(function(){$(this).hasClass("contracted")?ag.search.expandFilterList("category"):ag.search.contractFilterList("category")});$("#tagLabel").click(function(){$(this).hasClass("contracted")?ag.search.expandFilterList("tag"):ag.search.contractFilterList("tag")});$("#sgm_submit").bind("click",this,function(a){a.preventDefault();""!=$.trim($("#sgm_search_input").val())&&
(window.location="/search/games.jsp?gameKeyword\x3d"+encodeURIComponent($("#sgm_search_input").val()))});$("#sgm_search_form").bind("submit",this,function(a){a.preventDefault();""!=$.trim($("#sgm_search_input").val())&&(window.location="/search/games.jsp?gameKeyword\x3d"+encodeURIComponent($("#sgm_search_input").val()))});$(".searchResult").click(function(a){a.preventDefault();var d=$(this).attr("href");a=$(this).attr("name");btg.Search.setConversion(a);setTimeout(function(){window.location=d},100)});
$(".searchSuggestion").click(function(a){a.preventDefault();var d=$(this).attr("href");btg.Search.setSynConversion();setTimeout(function(){window.location=d},100)});$("#resultsContainer").on("click","span.searchPgPrev",function(){ag.search.loadPage(ag.search.currentPage-1)});$("#resultsContainer").on("click","span.searchPgNext",function(){ag.search.loadPage(ag.search.currentPage+1)});$("#resultsContainer").on("click","div.pageNumbers span.searchPage",function(a){ag.search.currentPage=parseInt($(a.target).text());
ag.search.getResults(ag.search.returnSortParamString(!0))});$("#resultsContainer").on("change","#searchSort",function(a){ag.search.sortType=encodeURIComponent(a.target.value);ag.search.getResults(ag.search.returnSortParamString(!0))})});