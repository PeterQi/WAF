/* DCRLite v1.0.0.19*/ (function(){
'use strict';(function(b){try{b.NOLLite=b.NOLLite||{}}catch(f){"undefined"!==typeof console&&console&&console.warn&&console.warn("Error initializing NOL SDK")}})(window);
window.NOLLite.Common=window.NOLLite.Common||function(){var b={};try{(function(b){b.Config=b.Config||function(){var b={sdkVersion:"bj.5.1.5",buildVersion:"1.0.0.19",domain:"imrworldwide.com",sfcode:"us",lsHTMLUrl:"novms/html/ls.html",tagParamPrefix:"nol_",scriptName:"nlsDcrLite510",monitorInterval:1E3,reporterInterval:3E5,validationInterval:1E3,intervalThreshold:9E4,durationThreshold:2E4,reporterIntervalThreshold:{min:30,max:300},requiredParams:"nol_sfcode nol_ci nol_apid nol_assetname nol_apn nol_vc".split(" ")};
b.endpoints={staticPing:{route:"/cgi-bin/gn",params:{prd:{type:"static",value:"dcr",encLvl:0},st:{type:"static",value:"dcr",encLvl:0},at:{type:"dynamic",value:"{{at}}",encLvl:0},rt:{type:"static",value:"text",encLvl:0},forward:{type:"static",value:"0",encLvl:0},sup:{type:"static",value:'|!nol_sup||"0"!|',encLvl:0},ad:{type:"static",value:'|!nol_ad||"0"!|',encLvl:0},asn:{type:"static",value:"|!nol_assetname!|",encLvl:1},ci:{type:"static",value:"|!nol_ci!|",encLvl:0},cr:{type:"dynamic",value:"{{cr}}",
encLvl:0},c6:{type:"static",value:"vc,|!nol_vc!|",encLvl:0},c9:{type:"static",value:"devid,|!nol_devid!|",encLvl:0},c11:{type:"static",value:'agg,|!nol_agg||"1"!|',encLvl:0},c12:{type:"static",value:"apv,|!nol_apv!|",encLvl:0},c13:{type:"static",value:"asid,|!nol_apid!|",encLvl:0},c15:{type:"static",value:"apn,|!nol_apn!|",encLvl:0},c16:{type:"static",value:"sdkv,"+b.sdkVersion,encLvl:0},c26:{type:"static",value:'dmap,|!nol_dmap||"1"!|',encLvl:0},c27:{type:"dynamic",value:"cln,{{cln}}",encLvl:0},
c29:{type:"static",value:"plid,"+(Date.now?Date.now():(new Date).getTime())+Math.round(1E4*Math.random()).toString(),encLvl:0},c30:{type:"static",value:"bldv,"+b.buildVersion,encLvl:0},c32:{type:"static",value:'segA,|!nol_segA||"NA"!|',encLvl:1},c33:{type:"static",value:'segB,|!nol_segB||"NA"!|',encLvl:1},c34:{type:"static",value:'segC,|!nol_segC||"NA"!|',encLvl:1},c36:{type:"static",value:"cref1,|!nol_cref1!|",removeIfEmpty:!0,encLvl:0},c37:{type:"static",value:"cref2,|!nol_cref2!|",removeIfEmpty:!0,
encLvl:0},uoo:{type:"dynamic",value:"{{optout}}",removeIfEmpty:!0,encLvl:0}}}};return b}();b.Util=b.Util||function(){var e={parseNOLParams:function(a){var d={},k=b.Config.tagParamPrefix;if(!a)return d;a=a.replace(new RegExp("&"+k,"gi"),"<<nol_delimeter>>"+k);a=a.split("<<nol_delimeter>>");for(var c=null,k=0;k<a.length;k++){var c=a[k].indexOf("="),e=unescape(a[k].substr(0,c)),c=unescape(a[k].substr(c+1)),c=c.replace(/\+/g," ");d[e]=c}return d},parseQuery:function(a){var d={};if(!a)return d;a=a.split(/[;&]/);
for(var b=0;b<a.length;b++){var c=a[b].split("=");if(c&&2==c.length){var e=unescape(c[0]),c=unescape(c[1]),c=c.replace(/\+/g," ");d[e]=c}}return d},toQuery:function(a){if(a){var d=[],b;for(b in a)d.push(b+"="+a[b]);return d.join("&")}return""},timeStamp:function(){try{return(new Date).toISOString()}catch(a){return(new Date).toString()}},log:function(a,d){window.NOLLite.debug&&"undefined"!==typeof console&&console&&console.log&&(void 0!==d&&null!==d?console.log(e.timeStamp()+" LOG: "+a,d):console.log(e.timeStamp()+
" LOG: "+a))},debug:function(a,d){window.NOLLite.debug&&"undefined"!==typeof console&&console&&console.debug&&(void 0!==d&&null!==d?console.debug(e.timeStamp()+" DEBUG: "+a,d):console.debug(e.timeStamp()+" DEBUG: "+a))},warn:function(a,d){window.NOLLite.debug&&"undefined"!==typeof console&&console&&console.warn&&(void 0!==d&&null!==d?console.warn(e.timeStamp()+" WARN: "+a,d):console.warn(e.timeStamp()+" WARN: "+a))},error:function(a,d){window.NOLLite.debug&&"undefined"!==typeof console&&console&&
console.error&&(void 0!==d&&null!==d?console.error(e.timeStamp()+" ERROR: "+a,d):console.error(e.timeStamp()+" ERROR: "+a))},parseExp:function(a,d){var b="";a&&(b=/".*?"/gi.test(a)?a.replace(/"/gi,""):d&&void 0!==d[a]?d[a]:"");return b},urlEncode:function(a,d){if(d&&0<d){for(var b=a,c=d;c--;)b=encodeURIComponent(b).replace("'","%27");return b}return a},evalStaticValue:function(a,d,b){var c="";if(a&&a.value&&d){var c=a.value,h=c.match(/\|!.*?!\|/ig);if(h){var g=h[0].replace("|!","").replace("!|",""),
m=null;if(/.*?\|\|.*?/gi.test(g)){if(g=g.split("||"))for(var f=0,n=g.length;f<n&&!(m=e.parseExp(g[f],d))&&f!=n-1;f+=1);}else m=e.parseExp(g,d);m=e.urlEncode(m,-1<b?b:a.encLvl);if(""===m&&a.removeIfEmpty)return"";c=c.replace(h[0],m)}}return c},evalDynamicValue:function(a,b,c){var l="";if(a&&a.value&&b){var h=a.value.match(/{{.*?}}/ig),l=a.value;if(h)for(var g=null,m=h.length;m--;)g=b[h[m].replace("{{","").replace("}}","")],l=l.replace(h[m],void 0!==g&&null!==g?g:"")}return l=e.urlEncode(l,-1<c?c:a.encLvl)},
evalDynamicParams:function(a,b,c,l){if(a&&b&&c){var h=[];if(b.params){var g=null,m=null,f;for(f in b.params)(m=b.params[f])&&"dynamic"===m.type&&(g=e.evalDynamicValue(m,c,l),m.removeIfEmpty&&""===g||h.push(f+"="+g))}return a+"&"+h.join("&")}return a},generateEndpoint:function(a,b,c){if(a&&a.route){var l=a.route+"?",h=[];if(a.params){var g=null,g=null,m;for(m in a.params)(g=a.params[m])&&"static"===g.type&&(g=e.evalStaticValue(g,b,c),void 0!==g&&null!==g&&""!==g&&h.push(m+"="+g))}return l+h.join("&")}return""},
endpointProtocol:function(){return c.isSecure?"https://":"http://"},getTimestamp:function(){return Date.now&&"function"===typeof Date.now?Date.now():(new Date).getTime()}},c={state:{ready:!1,focused:!1},get isSecure(){return"https:"===window.location.protocol},get isMobile(){var a=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4)))a=!0;return a},globalHasFocus:function(){var a=!1;if(window.top!=window.self)return!1;c.checkUserAgent("(?=.*macintosh)(?=.*chrome).*")&&(c.addEventListener({element:window.top,eventType:"focus",func:function(){c.state.focused="undefined"===typeof window.top.document.webkitHidden||window.top.document.webkitHidden?!1:!0},useCapture:!1}),c.addEventListener({element:window.top,eventType:"blur",func:function(){c.state.focused=!1},useCapture:!1}),a=c.state.focused);try{a=window.top.document.hasFocus&&
"function"===typeof window.top.document.hasFocus?window.top.document.hasFocus():c.state.focused}catch(b){a=c.state.focused}return a},hidden:function(){var a="hidden",b=["webkit","moz","ms","o"];if(!("hidden"in document))for(var c=0;c<b.length;c++)b[c]+"Hidden"in document&&(a=b[c]+"Hidden");return document[a]},isVisible:function(){var a=c.hidden();return null===a?(e.debug("document.hidden not supported, checking hasFocus()",c.globalHasFocus()),c.globalHasFocus()):!a},ready:function(a){function b(){c.removeEventListener({element:document,
eventType:"DOMContentLoaded",func:b});c.removeEventListener({element:window,eventType:"load",func:b});!c.state.ready&&a&&(c.state.ready=!0,a())}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(b):(c.addEventListener({element:document,eventType:"DOMContentLoaded",func:b}),c.addEventListener({element:window,eventType:"load",func:b}))},addEventListener:function(a){"undefined"!==typeof a.element&&(a.element.addEventListener?a.element.addEventListener(a.eventType,
a.func,a.useCapture):a.element.attachEvent&&a.element.attachEvent("on"+a.eventType,a.func))},removeEventListener:function(a){void 0!=a&&null!=a&&null!=a.element&&void 0!=a.element&&(a.element.removeEventListener?a.element.removeEventListener(a.eventType,a.func,a.useCapture):a.element.detachEvent&&a.element.detachEvent("on"+a.eventType,a.func))},checkUserAgent:function(a){var b=window?window.navigator.userAgent.toLowerCase():null;void 0!==a&&0<a.length&&(b=-1!==b.search(a)?!0:!1);return b}};return{parseQuery:e.parseQuery,
parseNOLParams:e.parseNOLParams,toQuery:e.toQuery,log:e.log,debug:e.debug,warn:e.warn,error:e.error,urlEncode:e.urlEncode,getTimestamp:e.getTimestamp,browser:{isMobile:c.isMobile,ready:c.ready,addEventListener:c.addEventListener,removeEventListener:c.removeEventListener,checkUserAgent:c.checkUserAgent,hasFocus:c.globalHasFocus,isVisible:c.isVisible},endpoint:{generate:e.generateEndpoint,protocol:e.endpointProtocol,evalDynamicParams:e.evalDynamicParams}}}();b.Request=b.Request||function(e){var c={ping:function(a,
d,k,l,h){if(a){k=k||{};h=h||1;if(void 0===k.maxRetry||null===k.maxRetry||0>k.maxRetry)k.maxRetry=1;d&&(a+=(-1==a.indexOf("?")?"?":"")+e.toQuery(d));k.cache||(a+=(-1===a.indexOf("?")?"?":"")+"&rnd="+Math.round(1E6*Math.random()));b.Util.debug("Sending ping - try "+h+" - "+a,k);var g=new Image;g.onerror=function(b){h<k.maxRetry?setTimeout(function(){c.ping(a,d,k,l,++h)},500):l&&l("error")};g.onload=function(a){l&&l(null,a)};g.src=a}},sendBeacon:function(a){navigator.sendBeacon&&"function"==typeof navigator.sendBeacon?
(navigator.sendBeacon(a),b.Util.debug("Sending beacon - "+a)):c.ping(a,null,{cache:!1},null,null)}};return{ping:c.ping,sendBeacon:c.sendBeacon}}(b.Util)})(b)}catch(f){"undefined"!==typeof console&&console&&console.warn&&console.error("Error loading Common module",f.trace)}return b}();
window.NOLLite.Models=window.NOLLite.Models||function(b){var f={};try{(function(e){e.MessageFrame=function(b,a,d){this._id=b;this._url=a;this._content="";this._handle=null;this._initialize(d)};e.MessageFrame.prototype._initialize=function(b){var a=this;try{this._handle=window.document.createElement("iframe"),this._handle.src=this._url,this._handle.height=0,this._handle.width=0,this._handle.style.display="none",this._handle.id=this._id,window.document.body.appendChild(this._handle),this._handle.onload=
function(){b&&b(null,a)}}catch(d){this._handle=null,b&&b(d)}};e.MessageFrame.prototype.sendMessage=function(b,a){this._handle&&a&&this._handle.contentWindow&&this._handle.contentWindow.postMessage&&"function"===typeof this._handle.contentWindow.postMessage&&this._handle.contentWindow.postMessage(JSON.stringify({eventType:b,data:a}),this._url)};e.StopWatch=function(b){this._name=b||"timer";this._duration=0;this._endTime=this._startTime=null;this._running=!1};e.StopWatch.prototype._calculateDelta=function(){if(this._startTime){this._endTime||
(this._endTime=this._getTimestamp());if(void 0===this._duration||null===this._duration)this._duration=0;var b=(this._endTime-this._startTime)/1E3;b&&(this._duration+=b)}};e.StopWatch.prototype._getTimestamp=function(){return Date.now&&"function"===typeof Date.now?Date.now():(new Date).getTime()};e.StopWatch.prototype.start=function(c,a){this._running||(this._startTime=a||this._getTimestamp(),this._endTime=null,c&&this.reset(),this._running=!0,b.Util.debug(this._name+" watch started"+(a?" at "+(new Date(a)).toString():
"")))};e.StopWatch.prototype.stop=function(c,a){this._running&&(this._endTime=a||this._getTimestamp(),this._calculateDelta(),c&&this.reset(),this._running=!1,b.Util.debug(this._name+" watch stopped"+(a?" at "+(new Date(a)).toString():"")))};e.StopWatch.prototype.reset=function(){this._duration=0;this._endTime=this._startTime=null;b.Util.debug(this._name+" watch reset")};e.StopWatch.prototype.restart=function(){this.reset();this._startTime=this._getTimestamp()};e.StopWatch.prototype.read=function(b){this._running&&
this._calculateDelta();var a=this._duration;b&&this.restart();return 0<=a?a:0};e.Timer=function(c,a){var d=this;this._name=a||"timer";this._interval=c;this._running=-1;this._ticker=null;this._tick=0;this._listeners=[];this._onTick=function(){d._tick+=d._interval;d._fireListeners();b.Util.debug(d._name+" timer tick:",d._tick)}};e.Timer.prototype._fireListeners=function(){for(var b=null,a=0,d=this._listeners.length;a<d;a+=1)(b=this._listeners[a])&&b.interval&&0==this._tick%b.interval&&b.callback&&b.callback(this._tick)};
e.Timer.prototype._startTick=function(){this._interval&&0<this._interval&&(this._ticker=setInterval(this._onTick,this._interval))};e.Timer.prototype._stopTick=function(){this._ticker&&clearInterval(this._ticker)};e.Timer.prototype.registerListener=function(b,a,d){this._listeners||(this._listeners=[]);this._listeners.push({name:b,interval:a,callback:d})};e.Timer.prototype.start=function(c){1!==this._running&&(c&&this.reset(),this._running=1,this._startTick(),b.Util.debug(this._name+" started"))};e.Timer.prototype.pause=
function(){1===this._running&&(this._running=0,this._stopTick(),b.Util.debug(this._name+" paused"))};e.Timer.prototype.stop=function(){-1<this._running&&(this._running=-1,this._stopTick(),this.reset(),b.Util.debug(this._name+" stopped and reset"))};e.Timer.prototype.reset=function(){this._tick=0;b.Util.debug(this._name+" reset")}})(f)}catch(e){b.Util.error("Error loading NOLLite models",e)}return f}(window.NOLLite.Common);
window.NOLLite.Modules=window.NOLLite.Modules||function(b,f){var e={};try{(function(c){c.DCR=function(a){var d=this;this._onBlur=function(){b.Util.debug("Blur event - not in focus");d.activeView=!1;d.monitor.stop()};this._onFocus=function(){b.Util.debug("Focus event - in focus");d.activeView=!0;d._checkLoaded(!0);d.monitor.start()};this._onUnload=function(a){d.loaded&&(d._durationEnabled&&(b.Util.debug("Processing unload ping"),d._firePing(!0,{at:"timer",cr:"D"},b.Util.browser.isMobile)),d._reset())};
this._onPageShow=function(){b.Util.debug("Pageshow event - in focus");!d.loaded&&b.Util.browser.isVisible()&&(d.activeView=!0,d.views=1,d._checkLoaded(!0),d.monitor.start())};this._onVisibilityChanged=function(){var a=b&&b.Util?b.Util.browser:null;a&&a.isVisible&&a.isVisible()?(b.Util.debug("Visibility changed - in focus"),d.activeView=!0,d._checkLoaded(!0),d.monitor.start()):(b.Util.debug("Visibility changed - not in focus"),d.activeView=!1,d.monitor.stop())};this._endpoint="";this.loaded=!1;this.views=
0;this._args=a||{};this._maskPing="1"===this._args.nol_rfrmsk;this.activeView=!1;this._messageFrame={handle:null,ready:!1,queue:[]};this._urlEncodeLevel=parseInt(this._args.nol_encLvl||-1,10);0<=this._urlEncodeLevel||(this._urlEncodeLevel=-1);this._optOut="1"===this._args.nol_uoo?"true":"";a=this._args&&this._args.nol_sfcode?this._args.nol_sfcode:b.Config.sfcode;this._domain=[b.Util.endpoint.protocol(),"secure-",a,".",b.Config.domain].join("");this._reportInterval=b&&b.Config&&b.Config&&b.Config.reporterInterval?
b.Config.reporterInterval:3E5;void 0!==this._args.nol_cadence&&null!==this._args.nol_cadence&&("off"===this._args.nol_cadence?this._reportInterval=0:isNaN(this._args.nol_cadence)||""===this._args.nol_cadence||(a=parseInt(this._args.nol_cadence,10),this._reportInterval=a<b.Config.reporterIntervalThreshold.min?1E3*b.Config.reporterIntervalThreshold.min:a>b.Config.reporterIntervalThreshold.max?1E3*b.Config.reporterIntervalThreshold.max:1E3*a));this._durationEnabled=0<this._reportInterval;this.monitor=
new f.StopWatch("duration");this.timer=new f.Timer(this._reportInterval,"heartbeat");this.intervalCheck={previousTimeStamp:b.Util.getTimestamp(),timer:new f.Timer(b.Config.validationInterval,"interval poll")};this._init()};c.DCR.prototype._init=function(){var a=this;if(this._maskPing){var d=[this._domain,b.Config.lsHTMLUrl].join("/");this._messageFrame.handle=new f.MessageFrame("maskFrame",d,function(){a._messageFrame.ready=!0;for(var b=a._messageFrame.queue.slice(0),d=0,c=b.length;d<c;d+=1)a._maskedPing(b[d]);
a._messageFrame.queue=[]})}this.timer.registerListener("reporter",this._reportInterval,function(){a.loaded&&a._firePing(!0,{at:"timer",cr:"D"},!1)});this.intervalCheck.timer.registerListener("IntervalPoll",b.Config.validationInterval,function(){var d=b.Util.getTimestamp();if(a.activeView){b.Util.debug("Interval threshold poll checking thresholds.");try{var c=Math.abs(d-a.intervalCheck.previousTimeStamp);c>b.Config.intervalThreshold&&(b.Util.debug("Interval check poll detected that time interval "+
c+" exceeded threshold of "+b.Config.intervalThreshold+". Time gap will be ignored."),b.Util.debug("Previous timestamp:",a.intervalCheck.previousTimeStamp),b.Util.debug("Current timestamp:",d),a.monitor.stop(!1,a.intervalCheck.previousTimeStamp),a.monitor.start(!1,d));b.Util.browser.hasFocus()&&b.Util.browser.isVisible()||(b.Util.debug("Interval poll detected that browser is not focused."),a._onBlur())}catch(e){b.Util.error("Error trying to evaluate interval threshold check",e.stack)}}a.intervalCheck.previousTimeStamp=
d})};c.DCR.prototype._reset=function(){this.activeView=this.loaded=!1;this.views=0;this.timer&&this.timer.stop();this.monitor&&this.monitor.stop(!0);b.Util.debug("DCR Reset")};c.DCR.prototype._setOptionParams=function(a){a||(a={});a.optout=this._optOut;return a};c.DCR.prototype._generatePingUrl=function(a,d,c){var e=[this._domain];this._endpoint||(this._endpoint=b.Util.endpoint.generate(b.Config.endpoints.staticPing,this._args,this._urlEncodeLevel));c||(c={});c.cln=d;c.cvw=a;c=this._setOptionParams(c);
a=b.Util.endpoint.evalDynamicParams(this._endpoint,b.Config.endpoints.staticPing,c,this._urlEncodeLevel);e.push(a);return e.join("")};c.DCR.prototype._maskedPing=function(a){try{a&&(this._messageFrame.ready?(this._messageFrame.handle.sendMessage("maskref",{url:a}),b.Util.debug("DCR masked ping fired ",a)):this._messageFrame.queue.push(a))}catch(c){b.Util.debug("DCR error trying to fire masked ping for: "+a,c.message)}};c.DCR.prototype._firePing=function(a,c,e){try{if(b&&b.Request){var f=this._durationEnabled?
Math.round(this.monitor.read(a)):0;if(f&&0<f||0<this.views){f>(this._reportInterval+b.Config.durationThreshold)/1E3&&(f=(this._reportInterval+b.Config.durationThreshold)/1E3,b.Util.debug("Duration threshold reached, defaulting to threshold duration based on the cadence:",f));var h=this._generatePingUrl(this.views,f,c);this._maskPing?this._maskedPing(h):e?(b.Request.sendBeacon(h),b.Util.debug("DCR beacon fired ",h)):(b.Request.ping(h),b.Util.debug("DCR ping fired ",h));this.views=0}}else b.Util.error("Request module not loaded")}catch(g){b.Util.debug("Error: Unable to fire ping",
g.message)}};c.DCR.prototype._checkLoaded=function(a){!this.loaded&&this.activeView&&(b.Util.debug("DCR loading and firing V ping"),this._firePing(a,{at:"view",cr:"V"},!1),this.loaded=!0,this.timer.start())};c.DCR.prototype.load=function(a,c){this.views=a;var e=b&&b.Util?b.Util.browser:null;e?(this.activeView=e.hasFocus?e.hasFocus()&&e.isVisible():!0,e.addEventListener({element:window,eventType:"blur",func:this._onBlur,useCapture:!1}),e.addEventListener({element:window,eventType:"focus",func:this._onFocus,
useCapture:!1}),e.addEventListener({element:window,eventType:"beforeunload",func:this._onUnload,useCapture:!1}),e.addEventListener({element:window,eventType:"pagehide",func:this._onUnload,useCapture:!1}),e.addEventListener({element:window,eventType:"pageshow",func:this._onPageShow,useCapture:!1})):"undefined"!==typeof console&&console&&console.warn&&console.warn("SDK Common module not loaded");document.addEventListener&&(document.addEventListener("visibilitychange",this._onVisibilityChanged),document.addEventListener("webkitvisibilitychange",
this._onVisibilityChanged),document.addEventListener("msvisibilitychange",this._onVisibilityChanged),document.addEventListener("mozvisibilitychange",this._onVisibilityChanged));(this.activeView||c)&&this._onFocus();this.intervalCheck.timer.start()}})(e)}catch(c){b.Util.error("Error loading NOLLite modules",c)}return e}(window.NOLLite.Common,window.NOLLite.Models);
(function(b,f,e,c){try{if(!b._instance){var a=function(a){this.initialized=!1;this.args=a;this.DCR=new c.DCR(a)};a.prototype.initialize=function(){this.initialized||(this.DCR.load(1),this.initialized=!0)};var d={initialize:function(c){b._instance||(b._instance=new a(c),b._instance.initialize())},findScript:function(){var a=document.getElementsByTagName("script");if(a)for(var b=null,c="",b=null,d=new RegExp(f.Config.scriptName+"(..*?)*?.js"),e=a.length;e--;)if(c=(b=a[e])&&b.attributes&&b.attributes.src?
b.attributes.src.value:"",b=c.match(d))return c;return""}},k=d.findScript().replace(/^[^\#]+\#?/,""),l=f.Util.parseNOLParams(k);if(l){e=!0;for(var h=f.Config.requiredParams,k=null,g=h.length;g--;)if(k=l[h[g]],void 0===k||null===k){e=!1;f.Util.error(h[g]+" is a required parameter. Please verify that the parameter is included in the script tag and that the src meets HTTP script tag standards.");break}e?"1"==l.nol_forceview?d.initialize(l):f.Util.browser.ready(function(){d.initialize(l)}):f.Util.error("The DCRLite script tag definition or parameters are invalid. Please supply the required parameters and follow HTTP script tag standards.")}}}catch(m){f.Util.error("Error loading NOLLite core",
m)}return b})(window.NOLLite,window.NOLLite.Common,window.NOLLite.Models,window.NOLLite.Modules);
}).call(this)
